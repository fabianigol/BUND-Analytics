â–² Next.js 16.1.1 (webpack)
- Local:         http://localhost:3000
- Network:       http://192.168.0.244:3000
- Environments: .env.local

âœ“ Starting...
âš  The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy
âœ“ Ready in 2.3s
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: false, email: undefined }
ğŸ”’ Redirecting to login
ğŸ‘¤ User status: { hasUser: false, email: undefined }
ğŸ”’ Redirecting to login
ğŸ” Middleware Debug: { url: '/login', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: false, email: undefined }
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (131kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
â—‹ Compiling /login ...
 GET /login 200 in 4.2s (compile: 3.3s, proxy.ts: 3ms, render: 938ms)
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: false, email: undefined }
ğŸ”’ Redirecting to login
ğŸ” Middleware Debug: { url: '/login', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: false, email: undefined }
 GET /login 200 in 47ms (compile: 3ms, proxy.ts: 5ms, render: 39ms)
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: false, email: undefined }
ğŸ”’ Redirecting to login
ğŸ” Middleware Debug: { url: '/login', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: false, email: undefined }
 GET /login 200 in 36ms (compile: 3ms, proxy.ts: 4ms, render: 29ms)
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
AuthApiError: Invalid Refresh Token: Refresh Token Not Found
    at ignore-listed frames {
  __isAuthError: true,
  status: 400,
  code: 'refresh_token_not_found'
}
AuthApiError: Invalid Refresh Token: Refresh Token Not Found
    at ignore-listed frames {
  __isAuthError: true,
  status: 400,
  code: 'refresh_token_not_found'
}
ğŸ‘¤ User status: { hasUser: false, email: undefined }
ğŸ”’ Redirecting to login
ğŸ” Middleware Debug: { url: '/login', hasSupabaseUrl: true, hasSupabaseKey: true }
AuthApiError: Invalid Refresh Token: Refresh Token Not Found
    at ignore-listed frames {
  __isAuthError: true,
  status: 400,
  code: 'refresh_token_not_found'
}
AuthApiError: Invalid Refresh Token: Refresh Token Not Found
    at ignore-listed frames {
  __isAuthError: true,
  status: 400,
  code: 'refresh_token_not_found'
}
ğŸ‘¤ User status: { hasUser: false, email: undefined }
 GET /login 200 in 168ms (compile: 6ms, proxy.ts: 111ms, render: 51ms)
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling / ...
 GET / 200 in 4.8s (compile: 4.5s, proxy.ts: 195ms, render: 32ms)
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET / 200 in 651ms (compile: 38ms, proxy.ts: 566ms, render: 47ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Raw availability data: {
  count: 18,
  sample: [
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 0,
      available: 2,
      total: 2
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      available: 0,
      total: 1
    },
    {
      store_name: 'The Bundclub Murcia',
      normalized: 'Murcia',
      category: 'mediciÃ³n',
      booked: 2,
      available: 0,
      total: 2
    },
    {
      store_name: 'The Bundclub Murcia',
      normalized: 'Murcia',
      category: 'fitting',
      booked: 1,
      available: 0,
      total: 1
    },
    {
      store_name: 'The Bundclub Valencia',
      normalized: 'Valencia',
      category: 'fitting',
      booked: 0,
      available: 1,
      total: 1
    }
  ]
}
[Dashboard] Store map after processing: {
  storesInMap: [
    'Sevilla', 'Barcelona',
    'Murcia',  'Valencia',
    'Bilbao',  'Zaragoza',
    'Cdmx',    'MÃ¡laga',
    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-09',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-23', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-16', 0 ],
    [ '2025-12-26', 0 ],
    [ '2025-12-22', 0 ]
  ]
}
 GET /api/dashboard 200 in 2.5s (compile: 998ms, proxy.ts: 102ms, render: 1418ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Raw availability data: {
  count: 18,
  sample: [
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 0,
      available: 2,
      total: 2
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      available: 0,
      total: 1
    },
    {
      store_name: 'The Bundclub Murcia',
      normalized: 'Murcia',
      category: 'mediciÃ³n',
      booked: 2,
      available: 0,
      total: 2
    },
    {
      store_name: 'The Bundclub Murcia',
      normalized: 'Murcia',
      category: 'fitting',
      booked: 1,
      available: 0,
      total: 1
    },
    {
      store_name: 'The Bundclub Valencia',
      normalized: 'Valencia',
      category: 'fitting',
      booked: 0,
      available: 1,
      total: 1
    }
  ]
}
[Dashboard] Store map after processing: {
  storesInMap: [
    'Sevilla', 'Barcelona',
    'Murcia',  'Valencia',
    'Bilbao',  'Zaragoza',
    'Cdmx',    'MÃ¡laga',
    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-09',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-23', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-16', 0 ],
    [ '2025-12-26', 0 ],
    [ '2025-12-22', 0 ]
  ]
}
 GET /api/dashboard 200 in 986ms (compile: 7ms, proxy.ts: 92ms, render: 887ms)
ğŸ” Middleware Debug: { url: '/calendario', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /calendario 200 in 1631ms (compile: 1489ms, proxy.ts: 114ms, render: 28ms)
ğŸ” Middleware Debug: {
  url: '/api/calendar/events',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/calendar/events?year=2026 200 in 1054ms (compile: 770ms, proxy.ts: 103ms, render: 182ms)
ğŸ” Middleware Debug: {
  url: '/api/calendar/events',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/calendar/events?year=2026 200 in 267ms (compile: 4ms, proxy.ts: 89ms, render: 174ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 1331ms (compile: 1161ms, proxy.ts: 135ms, render: 35ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:30.164Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:30.169Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:30.196Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:30.198Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:30.200Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:30.211Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 1286ms (compile: 595ms, proxy.ts: 137ms, render: 554ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 1313ms (compile: 567ms, proxy.ts: 166ms, render: 580ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 1333ms (compile: 566ms, proxy.ts: 166ms, render: 601ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 1378ms (compile: 625ms, proxy.ts: 108ms, render: 645ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:28:30.806Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:28:30.831Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
 GET /api/acuity/stats?type=occupation&days=21 200 in 1590ms (compile: 511ms, proxy.ts: 221ms, render: 857ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 1616ms (compile: 585ms, proxy.ts: 147ms, render: 884ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 333ms (compile: 1850Âµs, proxy.ts: 98ms, render: 233ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 455ms (compile: 1574Âµs, proxy.ts: 80ms, render: 373ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:31.784Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Historical Compare API] Fetching data for years: 2023, 2024, 2025, month: 1
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:31.791Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:31.793Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:31.795Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:31.801Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 925ms (compile: 637ms, proxy.ts: 122ms, render: 165ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 1189ms (compile: 896ms, proxy.ts: 83ms, render: 210ms)
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 960ms (compile: 636ms, proxy.ts: 101ms, render: 222ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 1010ms (compile: 636ms, proxy.ts: 94ms, render: 281ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:28:32.017Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
 GET /api/acuity/stats?type=occupation&days=21 200 in 901ms (compile: 346ms, proxy.ts: 184ms, render: 372ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:28:32.072Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:28:32.086Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2023,2024,2025&month=1 200 in 1441ms (compile: 942ms, proxy.ts: 81ms, render: 418ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 275ms (compile: 1686Âµs, proxy.ts: 83ms, render: 190ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 296ms (compile: 1498Âµs, proxy.ts: 86ms, render: 208ms)
[Historical Compare API] Fetching data for years: 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2023,2024,2025&month=1 200 in 468ms (compile: 1766Âµs, proxy.ts: 85ms, render: 381ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 1022ms (compile: 3ms, proxy.ts: 76ms, render: 944ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 203
 GET /api/acuity/appointments?startDate=2025-12-31&endDate=2026-01-09 200 in 715ms (compile: 464ms, proxy.ts: 94ms, render: 157ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2025-12-31&endDate=2025-01-09 200 in 667ms (compile: 429ms, proxy.ts: 79ms, render: 159ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2024-12-31&endDate=2024-01-09 200 in 264ms (compile: 3ms, proxy.ts: 86ms, render: 175ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2023-12-31&endDate=2023-01-09 200 in 259ms (compile: 5ms, proxy.ts: 98ms, render: 156ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2022-12-31&endDate=2022-01-09 200 in 269ms (compile: 3ms, proxy.ts: 93ms, render: 173ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 160
 GET /api/acuity/appointments?startDate=2026-01-01&endDate=2026-01-08 200 in 342ms (compile: 24ms, proxy.ts: 140ms, render: 178ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2025-01-01&endDate=2025-01-08 200 in 292ms (compile: 5ms, proxy.ts: 86ms, render: 200ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2024-01-01&endDate=2024-01-08 200 in 281ms (compile: 4ms, proxy.ts: 94ms, render: 183ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2023-01-01&endDate=2023-01-08 200 in 266ms (compile: 4ms, proxy.ts: 92ms, render: 170ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2022-01-01&endDate=2022-01-08 200 in 358ms (compile: 9ms, proxy.ts: 104ms, render: 245ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2023,2024,2025&month=1 200 in 634ms (compile: 13ms, proxy.ts: 167ms, render: 454ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2023,2024,2025&month=1 200 in 517ms (compile: 6ms, proxy.ts: 97ms, render: 414ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, month: 1
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022&month=1 200 in 604ms (compile: 4ms, proxy.ts: 97ms, render: 503ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1 200 in 696ms (compile: 6ms, proxy.ts: 147ms, render: 543ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 305ms (compile: 57ms, proxy.ts: 208ms, render: 40ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 4.6s (compile: 1197ms, proxy.ts: 1449ms, render: 1962ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 358ms (compile: 126ms, proxy.ts: 188ms, render: 44ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 282ms (compile: 75ms, proxy.ts: 171ms, render: 36ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 877ms (compile: 204ms, proxy.ts: 518ms, render: 155ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 241ms (compile: 81ms, proxy.ts: 117ms, render: 42ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 181ms (compile: 41ms, proxy.ts: 125ms, render: 15ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 488ms (compile: 196ms, proxy.ts: 236ms, render: 56ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 154ms (compile: 4ms, proxy.ts: 136ms, render: 14ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 1020ms (compile: 68ms, proxy.ts: 917ms, render: 34ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 394ms (compile: 169ms, proxy.ts: 154ms, render: 71ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 120ms (compile: 3ms, proxy.ts: 102ms, render: 15ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 493ms (compile: 18ms, proxy.ts: 356ms, render: 119ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 236ms (compile: 74ms, proxy.ts: 121ms, render: 40ms)
âš  Fast Refresh had to perform a full reload due to a runtime error.
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 2.2s (compile: 1545ms, proxy.ts: 267ms, render: 405ms)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 2.5s (compile: 1618ms, proxy.ts: 369ms, render: 488ms)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:34.875Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:34.902Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:34.908Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:34.914Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:34.916Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:34.924Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 2.9s (compile: 465ms, proxy.ts: 1300ms, render: 1101ms)
 GET /api/acuity/stats?type=monthly&months=12 200 in 2.9s (compile: 463ms, proxy.ts: 1301ms, render: 1122ms)
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 3.0s (compile: 785ms, proxy.ts: 907ms, render: 1282ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 3.1s (compile: 463ms, proxy.ts: 1302ms, render: 1341ms)
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 3.1s (compile: 464ms, proxy.ts: 1300ms, render: 1361ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 3.4s (compile: 464ms, proxy.ts: 1301ms, render: 1600ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:43:36.019Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:43:36.031Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 571ms (compile: 96ms, proxy.ts: 138ms, render: 337ms)
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:36.194Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:36.209Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:36.224Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 615ms (compile: 87ms, proxy.ts: 146ms, render: 382ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=monthly&months=12 200 in 357ms (compile: 19ms, proxy.ts: 138ms, render: 200ms)
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 389ms (compile: 34ms, proxy.ts: 132ms, render: 222ms)
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 361ms (compile: 18ms, proxy.ts: 133ms, render: 209ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 206ms (compile: 47ms, proxy.ts: 98ms, render: 61ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:36.420Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:36.433Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:36.515Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:43:36.527Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:43:36.551Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 373ms (compile: 6ms, proxy.ts: 112ms, render: 255ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 448ms (compile: 15ms, proxy.ts: 126ms, render: 307ms)
âš  Fast Refresh had to perform a full reload due to a runtime error.
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 416ms (compile: 2ms, proxy.ts: 92ms, render: 322ms)
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 430ms (compile: 1302Âµs, proxy.ts: 105ms, render: 323ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
 GET /api/acuity/stats?type=occupation&days=21 200 in 696ms (compile: 2ms, proxy.ts: 92ms, render: 601ms)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 717ms (compile: 5ms, proxy.ts: 93ms, render: 618ms)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
 GET /citas 200 in 628ms (compile: 2ms, proxy.ts: 85ms, render: 541ms)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:41.357Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:41.383Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:41.385Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:41.390Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:41.404Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:41.409Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 903ms (compile: 5ms, proxy.ts: 451ms, render: 447ms)
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 1166ms (compile: 10ms, proxy.ts: 446ms, render: 710ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 1391ms (compile: -2974Âµs, proxy.ts: 459ms, render: 935ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 1726ms (compile: 134ms, proxy.ts: 276ms, render: 1317ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 2.1s (compile: 8ms, proxy.ts: 448ms, render: 1608ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:43:42.915Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:43:42.920Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:42.943Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 2.3s (compile: 7ms, proxy.ts: 449ms, render: 1847ms)
 GET /api/acuity/stats?type=monthly&months=12 200 in 764ms (compile: 11ms, proxy.ts: 457ms, render: 296ms)
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 1050ms (compile: 142ms, proxy.ts: 533ms, render: 375ms)
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 1414ms (compile: 434ms, proxy.ts: 572ms, render: 409ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:43.248Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:43.250Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 478ms (compile: 14ms, proxy.ts: 229ms, render: 235ms)
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 485ms (compile: 13ms, proxy.ts: 230ms, render: 241ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:46.893Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:43:46.899Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:43:46.901Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:46.902Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:43:46.916Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 3.8s (compile: 3.4s, proxy.ts: 128ms, render: 259ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 3.9s (compile: 3.4s, proxy.ts: 171ms, render: 285ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 3.5s (compile: 2.7s, proxy.ts: 550ms, render: 306ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 4.0s (compile: 3.4s, proxy.ts: 147ms, render: 391ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 4.0s (compile: 3.4s, proxy.ts: 170ms, render: 424ms)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 1757ms (compile: 727ms, proxy.ts: 209ms, render: 822ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 2.0s (compile: 1870ms, proxy.ts: 87ms, render: 52ms)
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 2.2s (compile: 1898ms, proxy.ts: 80ms, render: 245ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 294ms (compile: 2ms, proxy.ts: 104ms, render: 188ms)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 2.1s (compile: 1183ms, proxy.ts: 237ms, render: 642ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 219ms (compile: 65ms, proxy.ts: 126ms, render: 28ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 1985ms (compile: 1147ms, proxy.ts: 665ms, render: 173ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /citas 200 in 255ms (compile: 49ms, proxy.ts: 147ms, render: 59ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 2.4s (compile: 1189ms, proxy.ts: 624ms, render: 601ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 598ms (compile: 181ms, proxy.ts: 128ms, render: 289ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 319ms (compile: 50ms, proxy.ts: 221ms, render: 49ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 1655ms (compile: 918ms, proxy.ts: 535ms, render: 201ms)
 GET /citas 200 in 185ms (compile: 29ms, proxy.ts: 138ms, render: 18ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 2.1s (compile: 934ms, proxy.ts: 520ms, render: 655ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 279ms (compile: 91ms, proxy.ts: 171ms, render: 17ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 1480ms (compile: 858ms, proxy.ts: 338ms, render: 284ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /citas 200 in 224ms (compile: 43ms, proxy.ts: 140ms, render: 41ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 1900ms (compile: 858ms, proxy.ts: 339ms, render: 704ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 294ms (compile: 79ms, proxy.ts: 150ms, render: 64ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 1709ms (compile: 809ms, proxy.ts: 588ms, render: 311ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /citas 200 in 312ms (compile: 86ms, proxy.ts: 119ms, render: 108ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 2.2s (compile: 886ms, proxy.ts: 512ms, render: 798ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
âš  Fast Refresh had to perform a full reload due to a runtime error.
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 229ms (compile: 59ms, proxy.ts: 94ms, render: 75ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 889ms (compile: 40ms, proxy.ts: 144ms, render: 705ms)
 GET /citas 200 in 700ms (compile: 1988Âµs, proxy.ts: 86ms, render: 612ms)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 935ms (compile: 26ms, proxy.ts: 141ms, render: 768ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/acuity/stats ...
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:17.431Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:17.435Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:17.436Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:17.480Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:17.481Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:17.484Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 4.4s (compile: 4.0s, proxy.ts: 165ms, render: 249ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 4.5s (compile: 3.7s, proxy.ts: 456ms, render: 276ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=monthly&months=12 200 in 5.3s (compile: 3.8s, proxy.ts: 390ms, render: 1099ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:45:19.320Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:45:19.325Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 6.6s (compile: 4.0s, proxy.ts: 165ms, render: 2.4s)
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 2.1s (compile: 863ms, proxy.ts: 427ms, render: 801ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 6.6s (compile: 4.1s, proxy.ts: 139ms, render: 2.4s)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 2.2s (compile: 1056ms, proxy.ts: 267ms, render: 899ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 6.7s (compile: 3.8s, proxy.ts: 434ms, render: 2.5s)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:20.124Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:20.127Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:20.129Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 446ms (compile: 194ms, proxy.ts: 129ms, render: 123ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:20.197Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 475ms (compile: 39ms, proxy.ts: 139ms, render: 297ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 521ms (compile: 40ms, proxy.ts: 138ms, render: 343ms)
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 531ms (compile: 47ms, proxy.ts: 131ms, render: 353ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:45:20.274Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 592ms (compile: 6ms, proxy.ts: 286ms, render: 301ms)
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 638ms (compile: 111ms, proxy.ts: 193ms, render: 333ms)
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:20.455Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:45:20.466Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 378ms (compile: 36ms, proxy.ts: 123ms, render: 218ms)
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:45:20.603Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=occupation&days=21 200 in 581ms (compile: 4ms, proxy.ts: 214ms, render: 363ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 698ms (compile: 41ms, proxy.ts: 122ms, render: 535ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 858ms (compile: 64ms, proxy.ts: 190ms, render: 603ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 1492ms (compile: 91ms, proxy.ts: 191ms, render: 1210ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[By Store API] Fetching data for years: 2025, grouping: monthly
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 1849ms (compile: 1587ms, proxy.ts: 91ms, render: 172ms)
[By Store API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_by_store with parameters p_grouping, p_months, p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_by_store(p_grouping, p_months, p_years) in the schema cache'
}
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 500 in 2.8s (compile: 2.5s, proxy.ts: 191ms, render: 174ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_by_store with parameters p_grouping, p_months, p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_by_store(p_grouping, p_months, p_years) in the schema cache'
}
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 500 in 2.9s (compile: 2.5s, proxy.ts: 189ms, render: 200ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /citas 200 in 296ms (compile: 72ms, proxy.ts: 171ms, render: 54ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[By Store API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_by_store with parameters p_grouping, p_months, p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_by_store(p_grouping, p_months, p_years) in the schema cache'
}
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 500 in 281ms (compile: 8ms, proxy.ts: 95ms, render: 178ms)
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 1656ms (compile: 857ms, proxy.ts: 260ms, render: 539ms)
[By Store API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_by_store with parameters p_grouping, p_months, p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_by_store(p_grouping, p_months, p_years) in the schema cache'
}
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 500 in 353ms (compile: 4ms, proxy.ts: 171ms, render: 178ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 218ms (compile: 44ms, proxy.ts: 141ms, render: 33ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 212ms (compile: 43ms, proxy.ts: 140ms, render: 29ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 2
[Historical Compare API] Year 2021: 28 appointments found (via RPC)
[Historical Compare API] Year 2022: 312 appointments found (via RPC)
[Historical Compare API] Year 2023: 1198 appointments found (via RPC)
[Historical Compare API] Year 2024: 1610 appointments found (via RPC)
[Historical Compare API] Year 2025: 1797 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=2 200 in 1074ms (compile: 45ms, proxy.ts: 174ms, render: 855ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 858ms (compile: 17ms, proxy.ts: 255ms, render: 587ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:15.427Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:15.436Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:15.446Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:15.482Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:15.484Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:15.486Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 369ms (compile: 31ms, proxy.ts: 128ms, render: 210ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 444ms (compile: 3ms, proxy.ts: 175ms, render: 267ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:47:15.817Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:47:15.919Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 789ms (compile: 3ms, proxy.ts: 208ms, render: 578ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 809ms (compile: 6ms, proxy.ts: 205ms, render: 599ms)
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 412ms (compile: 5ms, proxy.ts: 194ms, render: 213ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 549ms (compile: 2ms, proxy.ts: 74ms, render: 473ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 932ms (compile: 8ms, proxy.ts: 202ms, render: 721ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:16.144Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 1010ms (compile: 1939Âµs, proxy.ts: 176ms, render: 832ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 247ms (compile: 5ms, proxy.ts: 84ms, render: 158ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:16.256Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:16.257Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:47:16.323Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:16.328Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 275ms (compile: 6ms, proxy.ts: 101ms, render: 168ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:47:16.354Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:16.377Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 295ms (compile: 20ms, proxy.ts: 113ms, render: 162ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 340ms (compile: 4ms, proxy.ts: 110ms, render: 226ms)
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 472ms (compile: 19ms, proxy.ts: 150ms, render: 303ms)
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:47:16.524Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 347ms (compile: 6ms, proxy.ts: 79ms, render: 262ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 337ms (compile: 1431Âµs, proxy.ts: 77ms, render: 258ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 374ms (compile: 11ms, proxy.ts: 80ms, render: 283ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_by_store with parameters p_grouping, p_months, p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_by_store(p_grouping, p_months, p_years) in the schema cache'
}
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 500 in 272ms (compile: 8ms, proxy.ts: 110ms, render: 154ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 283ms (compile: 9ms, proxy.ts: 131ms, render: 143ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_by_store with parameters p_grouping, p_months, p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_by_store(p_grouping, p_months, p_years) in the schema cache'
}
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 500 in 326ms (compile: 6ms, proxy.ts: 129ms, render: 190ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[By Store API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_by_store with parameters p_grouping, p_months, p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_by_store(p_grouping, p_months, p_years) in the schema cache'
}
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 500 in 232ms (compile: 1722Âµs, proxy.ts: 78ms, render: 152ms)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 606ms (compile: 20ms, proxy.ts: 112ms, render: 474ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Annual Totals API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_annual with parameter p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_annual(p_years) in the schema cache'
}
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 500 in 506ms (compile: 4ms, proxy.ts: 84ms, render: 419ms)
[By Store API] RPC Error: {
  code: 'PGRST202',
  details: 'Searched for the function public.get_historical_stats_by_store with parameters p_grouping, p_months, p_years or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.',
  hint: 'Perhaps you meant to call the function public.get_historical_stats_by_year_month',
  message: 'Could not find the function public.get_historical_stats_by_store(p_grouping, p_months, p_years) in the schema cache'
}
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 500 in 522ms (compile: 4ms, proxy.ts: 81ms, render: 437ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 1120ms (compile: 4ms, proxy.ts: 342ms, render: 774ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 325ms (compile: 7ms, proxy.ts: 238ms, render: 80ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.071Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.107Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.110Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.112Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.119Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.120Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 447ms (compile: 25ms, proxy.ts: 228ms, render: 193ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 472ms (compile: 4ms, proxy.ts: 226ms, render: 243ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 483ms (compile: 3ms, proxy.ts: 204ms, render: 277ms)
 GET /api/acuity/stats?type=monthly&months=12 200 in 491ms (compile: 10ms, proxy.ts: 219ms, render: 261ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 623ms (compile: 12ms, proxy.ts: 218ms, render: 394ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:48:53.414Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.439Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=occupation&days=21 200 in 663ms (compile: 9ms, proxy.ts: 220ms, render: 434ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:48:53.449Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.497Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 283ms (compile: 7ms, proxy.ts: 75ms, render: 201ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.579Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 321ms (compile: 5ms, proxy.ts: 101ms, render: 216ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 372ms (compile: 1607Âµs, proxy.ts: 129ms, render: 242ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.622Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=monthly&months=12 200 in 252ms (compile: 1806Âµs, proxy.ts: 85ms, render: 165ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.715Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 321ms (compile: 2ms, proxy.ts: 81ms, render: 238ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T15:48:53.784Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T15:48:53.830Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 246ms (compile: 3ms, proxy.ts: 80ms, render: 163ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T15:48:53.865Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 433ms (compile: 1613Âµs, proxy.ts: 91ms, render: 341ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 332ms (compile: 1455Âµs, proxy.ts: 82ms, render: 248ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 670ms (compile: 1883Âµs, proxy.ts: 148ms, render: 520ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[By Store API] Fetching data for years: 2025, grouping: monthly
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 845ms (compile: 164ms, proxy.ts: 210ms, render: 472ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 1026ms (compile: 121ms, proxy.ts: 209ms, render: 696ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 871ms (compile: 3ms, proxy.ts: 381ms, render: 486ms)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 1118ms (compile: 169ms, proxy.ts: 214ms, render: 735ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 1833ms (compile: 1942Âµs, proxy.ts: 86ms, render: 1746ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 307ms (compile: 3ms, proxy.ts: 80ms, render: 224ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 382ms (compile: 8ms, proxy.ts: 99ms, render: 274ms)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 400ms (compile: 5ms, proxy.ts: 199ms, render: 196ms)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 676ms (compile: 6ms, proxy.ts: 98ms, render: 573ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/monthly-breakdown',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Monthly Breakdown API] Fetching data for years: 2025
[Monthly Breakdown API] Success - Retrieved monthly data for 1 years
 GET /api/citas/historical/monthly-breakdown?years=2025 200 in 1930ms (compile: 1494ms, proxy.ts: 167ms, render: 269ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/monthly-breakdown',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/monthly-breakdown',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/monthly-breakdown',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/monthly-breakdown',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Monthly Breakdown API] Fetching data for years: 2023
[Monthly Breakdown API] Fetching data for years: 2022
[Monthly Breakdown API] Fetching data for years: 2021
[Monthly Breakdown API] Fetching data for years: 2024
[Monthly Breakdown API] Success - Retrieved monthly data for 1 years
 GET /api/citas/historical/monthly-breakdown?years=2023 200 in 683ms (compile: 6ms, proxy.ts: 177ms, render: 500ms)
[Monthly Breakdown API] Success - Retrieved monthly data for 1 years
 GET /api/citas/historical/monthly-breakdown?years=2021 200 in 700ms (compile: 3ms, proxy.ts: 199ms, render: 498ms)
[Monthly Breakdown API] Success - Retrieved monthly data for 1 years
 GET /api/citas/historical/monthly-breakdown?years=2022 200 in 701ms (compile: 2ms, proxy.ts: 199ms, render: 500ms)
[Monthly Breakdown API] Success - Retrieved monthly data for 1 years
 GET /api/citas/historical/monthly-breakdown?years=2024 200 in 708ms (compile: 4ms, proxy.ts: 197ms, render: 507ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2024, grouping: monthly
[By Store API] Success - Retrieved data for 8 stores
 GET /api/citas/historical/by-store?years=2024&grouping=monthly 200 in 520ms (compile: 24ms, proxy.ts: 288ms, render: 208ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2023, grouping: monthly
[By Store API] Success - Retrieved data for 6 stores
 GET /api/citas/historical/by-store?years=2023&grouping=monthly 200 in 298ms (compile: 3ms, proxy.ts: 84ms, render: 212ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 339ms (compile: 7ms, proxy.ts: 120ms, render: 212ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 806ms (compile: 305ms, proxy.ts: 440ms, render: 60ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 210ms (compile: 6ms, proxy.ts: 180ms, render: 23ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 144ms (compile: 4ms, proxy.ts: 118ms, render: 22ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 2
[Historical Compare API] Year 2021: 28 appointments found (via RPC)
[Historical Compare API] Year 2022: 312 appointments found (via RPC)
[Historical Compare API] Year 2023: 1198 appointments found (via RPC)
[Historical Compare API] Year 2024: 1610 appointments found (via RPC)
[Historical Compare API] Year 2025: 1797 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=2 200 in 3.1s (compile: 1389ms, proxy.ts: 312ms, render: 1357ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 330ms (compile: 120ms, proxy.ts: 177ms, render: 34ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 287ms (compile: 77ms, proxy.ts: 183ms, render: 27ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 240ms (compile: 44ms, proxy.ts: 173ms, render: 23ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 207ms (compile: 45ms, proxy.ts: 137ms, render: 25ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 1769ms (compile: 1162ms, proxy.ts: 170ms, render: 436ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 539ms (compile: 1872Âµs, proxy.ts: 85ms, render: 452ms)
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 2, store: Madrid
[Historical Compare API] Year 2025: 762 appointments found (via RPC)
[Historical Compare API] Year 2024: 655 appointments found (via RPC)
[Historical Compare API] Year 2023: 598 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=2&storeCity=Madrid 200 in 985ms (compile: 356ms, proxy.ts: 125ms, render: 503ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 2, store: Madrid
[Historical Compare API] Year 2025: 762 appointments found (via RPC)
[Historical Compare API] Year 2024: 655 appointments found (via RPC)
[Historical Compare API] Year 2023: 598 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=2&storeCity=Madrid 200 in 480ms (compile: 1334Âµs, proxy.ts: 78ms, render: 401ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical?year=2024 200 in 619ms (compile: 110ms, proxy.ts: 110ms, render: 398ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 1731ms (compile: 898ms, proxy.ts: 322ms, render: 511ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 1815ms (compile: 877ms, proxy.ts: 344ms, render: 594ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 1816ms (compile: 876ms, proxy.ts: 344ms, render: 596ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Madrid
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
 GET /api/citas/historical?year=2024 200 in 390ms (compile: 1554Âµs, proxy.ts: 82ms, render: 306ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 365ms (compile: 14ms, proxy.ts: 96ms, render: 254ms)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 457ms (compile: 15ms, proxy.ts: 122ms, render: 320ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 467ms (compile: 16ms, proxy.ts: 123ms, render: 327ms)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 2.3s (compile: 883ms, proxy.ts: 338ms, render: 1070ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Madrid 200 in 729ms (compile: 22ms, proxy.ts: 147ms, render: 560ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Madrid
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Madrid 200 in 645ms (compile: 1886Âµs, proxy.ts: 90ms, render: 554ms)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 953ms (compile: 3ms, proxy.ts: 119ms, render: 831ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 720ms (compile: 11ms, proxy.ts: 223ms, render: 486ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 557ms (compile: 3ms, proxy.ts: 112ms, render: 442ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 533ms (compile: 3ms, proxy.ts: 160ms, render: 370ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Madrid
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical?year=2024 200 in 436ms (compile: 8ms, proxy.ts: 126ms, render: 302ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Madrid 200 in 606ms (compile: 3ms, proxy.ts: 154ms, render: 449ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Madrid
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Madrid 200 in 518ms (compile: 4ms, proxy.ts: 88ms, render: 426ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 347ms (compile: 81ms, proxy.ts: 229ms, render: 36ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 170ms (compile: 4ms, proxy.ts: 152ms, render: 14ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: monthly
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 481ms (compile: 10ms, proxy.ts: 169ms, render: 302ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 496ms (compile: 9ms, proxy.ts: 171ms, render: 317ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 519ms (compile: 79ms, proxy.ts: 176ms, render: 264ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: monthly
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 312ms (compile: 1346Âµs, proxy.ts: 91ms, render: 220ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 312ms (compile: 5ms, proxy.ts: 136ms, render: 171ms)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 341ms (compile: 1776Âµs, proxy.ts: 95ms, render: 244ms)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 963ms (compile: 74ms, proxy.ts: 175ms, render: 714ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 691ms (compile: 1303Âµs, proxy.ts: 95ms, render: 594ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 433ms (compile: 8ms, proxy.ts: 164ms, render: 260ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Madrid
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical?year=2024 200 in 368ms (compile: 2ms, proxy.ts: 96ms, render: 269ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Madrid 200 in 456ms (compile: 1587Âµs, proxy.ts: 125ms, render: 329ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Madrid
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Madrid 200 in 407ms (compile: 2ms, proxy.ts: 79ms, render: 325ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[By Store API] Fetching data for years: 2025, grouping: monthly
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 2.3s (compile: 1466ms, proxy.ts: 642ms, render: 233ms)
 GET /citas 200 in 202ms (compile: 49ms, proxy.ts: 111ms, render: 42ms)
 GET /api/citas/historical?year=2024 200 in 2.4s (compile: 1475ms, proxy.ts: 633ms, render: 260ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2023, 2024, 2025, grouping: monthly
[Historical Compare API] Fetching data for years: 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2023,2024,2025&grouping=annual 200 in 458ms (compile: 19ms, proxy.ts: 151ms, render: 288ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2023,2024,2025&grouping=monthly 200 in 469ms (compile: 16ms, proxy.ts: 154ms, render: 298ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 541ms (compile: 10ms, proxy.ts: 238ms, render: 293ms)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2023,2024,2025&month=1&storeCity=Madrid 200 in 593ms (compile: 43ms, proxy.ts: 153ms, render: 398ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 219ms (compile: 54ms, proxy.ts: 136ms, render: 29ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Sevilla
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2025: 478 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 491ms (compile: 104ms, proxy.ts: 165ms, render: 223ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 496ms (compile: 115ms, proxy.ts: 169ms, render: 211ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=annual 200 in 525ms (compile: 108ms, proxy.ts: 161ms, render: 256ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=monthly 200 in 546ms (compile: 103ms, proxy.ts: 166ms, render: 277ms)
[Historical Compare API] Year 2024: 422 appointments found (via RPC)
[Historical Compare API] Year 2023: 284 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Sevilla 200 in 638ms (compile: 94ms, proxy.ts: 164ms, render: 380ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: monthly
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: MÃ¡laga
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2025: 186 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 351ms (compile: 9ms, proxy.ts: 153ms, render: 189ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=monthly 200 in 378ms (compile: 7ms, proxy.ts: 155ms, render: 216ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 405ms (compile: 54ms, proxy.ts: 159ms, render: 192ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=annual 200 in 407ms (compile: 39ms, proxy.ts: 179ms, render: 188ms)
[Historical Compare API] Year 2024: 127 appointments found (via RPC)
[Historical Compare API] Year 2023: 28 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=M%C3%A1laga 200 in 530ms (compile: 19ms, proxy.ts: 157ms, render: 354ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 299ms (compile: 107ms, proxy.ts: 104ms, render: 88ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: annual
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Barcelona
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 373ms (compile: 36ms, proxy.ts: 155ms, render: 181ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=annual 200 in 386ms (compile: 30ms, proxy.ts: 161ms, render: 194ms)
[Historical Compare API] Year 2025: 129 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=monthly 200 in 408ms (compile: 31ms, proxy.ts: 161ms, render: 217ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 449ms (compile: 1036Âµs, proxy.ts: 223ms, render: 224ms)
[Historical Compare API] Year 2024: 24 appointments found (via RPC)
[Historical Compare API] Year 2023: 36 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Barcelona 200 in 553ms (compile: 5ms, proxy.ts: 211ms, render: 338ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: monthly
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Murcia
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 352ms (compile: 12ms, proxy.ts: 162ms, render: 177ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=annual 200 in 367ms (compile: 1340Âµs, proxy.ts: 174ms, render: 192ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 369ms (compile: 6ms, proxy.ts: 160ms, render: 202ms)
[Historical Compare API] Year 2025: 80 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=monthly 200 in 421ms (compile: 1075Âµs, proxy.ts: 186ms, render: 234ms)
[Historical Compare API] Year 2024: 23 appointments found (via RPC)
[Historical Compare API] Year 2023: 0 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Murcia 200 in 553ms (compile: 1223Âµs, proxy.ts: 193ms, render: 359ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: monthly
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 379ms (compile: 2ms, proxy.ts: 191ms, render: 186ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=annual 200 in 380ms (compile: 3ms, proxy.ts: 190ms, render: 187ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=monthly 200 in 395ms (compile: 3ms, proxy.ts: 169ms, render: 223ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 425ms (compile: 964Âµs, proxy.ts: 210ms, render: 214ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Madrid 200 in 533ms (compile: 14ms, proxy.ts: 168ms, render: 351ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, 2024, grouping: monthly
[By Store API] Fetching data for years: 2025, 2024, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024&grouping=annual 200 in 380ms (compile: 10ms, proxy.ts: 180ms, render: 190ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024&grouping=monthly 200 in 393ms (compile: 5ms, proxy.ts: 202ms, render: 187ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 397ms (compile: 10ms, proxy.ts: 180ms, render: 207ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024&month=1&storeCity=Madrid 200 in 450ms (compile: 43ms, proxy.ts: 140ms, render: 267ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025&month=1&storeCity=Madrid 200 in 283ms (compile: 10ms, proxy.ts: 101ms, render: 172ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 307ms (compile: 6ms, proxy.ts: 100ms, render: 202ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 321ms (compile: 7ms, proxy.ts: 98ms, render: 216ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 286ms (compile: 3ms, proxy.ts: 83ms, render: 199ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, grouping: monthly
[Historical Compare API] Fetching data for years: 2025, 2024, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024&grouping=annual 200 in 345ms (compile: 5ms, proxy.ts: 114ms, render: 226ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 348ms (compile: 1074Âµs, proxy.ts: 161ms, render: 187ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024&grouping=monthly 200 in 351ms (compile: 4ms, proxy.ts: 116ms, render: 232ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024&month=1&storeCity=Madrid 200 in 420ms (compile: 1494Âµs, proxy.ts: 146ms, render: 273ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2024, grouping: annual
[By Store API] Fetching data for years: 2024, grouping: monthly
[Historical Compare API] Fetching data for years: 2024, month: 1, store: Madrid
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 277ms (compile: 12ms, proxy.ts: 95ms, render: 170ms)
[By Store API] Success - Retrieved data for 8 stores
 GET /api/citas/historical/by-store?years=2024&grouping=annual 200 in 291ms (compile: 8ms, proxy.ts: 100ms, render: 183ms)
[By Store API] Success - Retrieved data for 8 stores
 GET /api/citas/historical/by-store?years=2024&grouping=monthly 200 in 297ms (compile: 5ms, proxy.ts: 131ms, render: 161ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2024&month=1&storeCity=Madrid 200 in 302ms (compile: 27ms, proxy.ts: 104ms, render: 171ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, grouping: annual
[Historical Compare API] Fetching data for years: 2025, 2024, month: 1, store: Madrid
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024&grouping=monthly 200 in 340ms (compile: 46ms, proxy.ts: 123ms, render: 171ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 341ms (compile: 6ms, proxy.ts: 163ms, render: 172ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024&grouping=annual 200 in 375ms (compile: 4ms, proxy.ts: 165ms, render: 206ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024&month=1&storeCity=Madrid 200 in 443ms (compile: 14ms, proxy.ts: 164ms, render: 265ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: monthly
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=monthly 200 in 368ms (compile: 13ms, proxy.ts: 161ms, render: 194ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 378ms (compile: 10ms, proxy.ts: 163ms, render: 205ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023&grouping=annual 200 in 394ms (compile: 11ms, proxy.ts: 163ms, render: 221ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023&month=1&storeCity=Madrid 200 in 498ms (compile: 25ms, proxy.ts: 167ms, render: 307ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, grouping: annual
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 351ms (compile: 3ms, proxy.ts: 131ms, render: 217ms)
[By Store API] Success - Retrieved data for 14 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022&grouping=annual 200 in 357ms (compile: 3ms, proxy.ts: 115ms, render: 239ms)
[By Store API] Success - Retrieved data for 14 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022&grouping=monthly 200 in 362ms (compile: 6ms, proxy.ts: 128ms, render: 228ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022&month=1&storeCity=Madrid 200 in 582ms (compile: 13ms, proxy.ts: 129ms, render: 439ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: Madrid
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 311ms (compile: 9ms, proxy.ts: 103ms, render: 199ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 316ms (compile: 12ms, proxy.ts: 101ms, render: 203ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 319ms (compile: 4ms, proxy.ts: 109ms, render: 206ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=Madrid 200 in 620ms (compile: 17ms, proxy.ts: 107ms, render: 497ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[By Store API] Fetching data for years: 2025, grouping: monthly
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 1767ms (compile: 741ms, proxy.ts: 783ms, render: 243ms)
 GET /citas 200 in 231ms (compile: 46ms, proxy.ts: 144ms, render: 41ms)
 GET /api/citas/historical?year=2024 200 in 1956ms (compile: 740ms, proxy.ts: 783ms, render: 432ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 339ms (compile: 1625Âµs, proxy.ts: 87ms, render: 251ms)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 1430ms (compile: 1031ms, proxy.ts: 137ms, render: 261ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 1564ms (compile: 995ms, proxy.ts: 174ms, render: 396ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 1852ms (compile: 1055ms, proxy.ts: 114ms, render: 683ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
 GET /citas 200 in 323ms (compile: 39ms, proxy.ts: 251ms, render: 34ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 576ms (compile: 47ms, proxy.ts: 150ms, render: 378ms)
 GET /api/citas/historical?year=2024 200 in 609ms (compile: 41ms, proxy.ts: 149ms, render: 419ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 297ms (compile: 1341Âµs, proxy.ts: 113ms, render: 182ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 333ms (compile: 939Âµs, proxy.ts: 160ms, render: 172ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 405ms (compile: 1057Âµs, proxy.ts: 155ms, render: 249ms)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 752ms (compile: 11ms, proxy.ts: 96ms, render: 645ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 252ms (compile: 50ms, proxy.ts: 160ms, render: 42ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 215ms (compile: 50ms, proxy.ts: 141ms, render: 24ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 190ms (compile: 44ms, proxy.ts: 132ms, render: 14ms)
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expression expected
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |           )}
 197 |         </div>
 198 |       </CardContent>
 199 |     </Card>
     :     ^
 200 |   );
 201 | }
     `----
  x Unterminated regexp literal
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |           )}
 197 |         </div>
 198 |       </CardContent>
 199 |     </Card>
     :      ^^^^^^
 200 |   );
 201 | }
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:200:1]
 197 |         </div>
 198 |       </div>
 199 |       
 200 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 201 |       <div className="flex items-center justify-center">
 202 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 203 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:200:1]
 197 |         </div>
 198 |       </div>
 199 |       
 200 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 201 |       <div className="flex items-center justify-center">
 202 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 203 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:200:1]
 197 |         </div>
 198 |       </div>
 199 |       
 200 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 201 |       <div className="flex items-center justify-center">
 202 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 203 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:200:1]
 197 |       </div>
 198 |       </div>
 199 |       
 200 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 201 |       <div className="flex items-center justify-center">
 202 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 203 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |       </div>
 197 |       </div>
 198 |       
 199 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 200 |       <div className="flex items-center justify-center">
 201 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 202 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |       </div>
 197 |       </div>
 198 |       
 199 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 200 |       <div className="flex items-center justify-center">
 201 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 202 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |       </div>
 197 |       </div>
 198 |       
 199 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 200 |       <div className="flex items-center justify-center">
 201 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 202 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |       </div>
 197 |       </div>
 198 |       
 199 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 200 |       <div className="flex items-center justify-center">
 201 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 202 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |       </div>
 197 |       </div>
 198 |       
 199 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 200 |       <div className="flex items-center justify-center">
 201 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 202 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |       </div>
 197 |       </div>
 198 |       
 199 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 200 |       <div className="flex items-center justify-center">
 201 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 202 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |       </div>
 197 |       </div>
 198 |       
 199 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 200 |       <div className="flex items-center justify-center">
 201 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 202 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |       </div>
 197 |       </div>
 198 |       
 199 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 200 |       <div className="flex items-center justify-center">
 201 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 202 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |       </div>
 197 |       </div>
 198 |       
 199 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 200 |       <div className="flex items-center justify-center">
 201 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 202 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â¨¯ ./src/components/citas/StoreRankingCard.tsx
Error:   x Expected ',', got '{'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/components/citas/StoreRankingCard.tsx:199:1]
 196 |       </div>
 197 |       </div>
 198 |       
 199 |       {/* Badge de posiciÃ³n grande */}
     :       ^
 200 |       <div className="flex items-center justify-center">
 201 |         <Badge variant={getPositionBadgeVariant(position)} className="text-2xl px-6 py-2">
 202 |           #{position}
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/components/citas/StoreRankingCard.tsx
./src/app/(dashboard)/citas/comparativas/tienda-view.tsx
./src/app/(dashboard)/citas/comparativas/HistoricalComparativesSection.tsx
./src/app/(dashboard)/citas/page.tsx
â—‹ Compiling /_error ...
 GET /citas 500 in 7.6s (compile: 7.0s, proxy.ts: 454ms, render: 92ms)
 GET /citas 500 in 1223ms (compile: 977ms, proxy.ts: 163ms, render: 83ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
âš  Fast Refresh had to perform a full reload due to a runtime error.
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
âš  Fast Refresh had to perform a full reload due to a runtime error.
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 3.6s (compile: 533ms, proxy.ts: 455ms, render: 2.6s)
âš  Fast Refresh had to perform a full reload due to a runtime error.
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 1036ms (compile: 7ms, proxy.ts: 979ms, render: 50ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/acuity/stats ...
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:12.560Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:12.564Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:12.566Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:12.567Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:12.574Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:12.606Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 5.4s (compile: 4.2s, proxy.ts: 601ms, render: 656ms)
 GET /api/acuity/stats?type=monthly&months=12 200 in 5.4s (compile: 4.1s, proxy.ts: 633ms, render: 659ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 5.5s (compile: 4.6s, proxy.ts: 138ms, render: 721ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 5.6s (compile: 3.8s, proxy.ts: 957ms, render: 799ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 5.6s (compile: 4.1s, proxy.ts: 636ms, render: 839ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 5.6s (compile: 3.8s, proxy.ts: 958ms, render: 855ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T16:15:13.050Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T16:15:13.073Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:13.109Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:13.171Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 332ms (compile: 6ms, proxy.ts: 135ms, render: 191ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:13.199Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 362ms (compile: 7ms, proxy.ts: 96ms, render: 258ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 295ms (compile: 1164Âµs, proxy.ts: 97ms, render: 197ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:13.245Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 263ms (compile: 1320Âµs, proxy.ts: 90ms, render: 172ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 284ms (compile: 2ms, proxy.ts: 88ms, render: 194ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:13.372Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:15:13.386Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 355ms (compile: 3ms, proxy.ts: 105ms, render: 248ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T16:15:13.405Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T16:15:13.439Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 269ms (compile: 1604Âµs, proxy.ts: 93ms, render: 175ms)
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 282ms (compile: 1297Âµs, proxy.ts: 83ms, render: 197ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 398ms (compile: 1712Âµs, proxy.ts: 103ms, render: 293ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 423ms (compile: 1074Âµs, proxy.ts: 81ms, render: 340ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 2.7s (compile: 2.1s, proxy.ts: 272ms, render: 333ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 2.8s (compile: 2.1s, proxy.ts: 273ms, render: 432ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 2.8s (compile: 1553ms, proxy.ts: 792ms, render: 450ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, grouping: monthly
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 2.9s (compile: 2.1s, proxy.ts: 275ms, render: 544ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 253ms (compile: 1328Âµs, proxy.ts: 81ms, render: 170ms)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 337ms (compile: 2ms, proxy.ts: 78ms, render: 258ms)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 399ms (compile: 1282Âµs, proxy.ts: 80ms, render: 317ms)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 773ms (compile: 62ms, proxy.ts: 164ms, render: 547ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 323ms (compile: 4ms, proxy.ts: 100ms, render: 218ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 349ms (compile: 2ms, proxy.ts: 103ms, render: 244ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 1212ms (compile: 910ms, proxy.ts: 90ms, render: 212ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 935ms (compile: 549ms, proxy.ts: 151ms, render: 234ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 963ms (compile: 550ms, proxy.ts: 167ms, render: 246ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 1300ms (compile: 907ms, proxy.ts: 146ms, render: 247ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/citas/historical?year=2024 200 in 1316ms (compile: 932ms, proxy.ts: 122ms, render: 262ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 263ms (compile: 1347Âµs, proxy.ts: 99ms, render: 162ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 1567ms (compile: 910ms, proxy.ts: 143ms, render: 514ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 318ms (compile: 939Âµs, proxy.ts: 83ms, render: 234ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 304ms (compile: 993Âµs, proxy.ts: 88ms, render: 215ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 314ms (compile: 1140Âµs, proxy.ts: 80ms, render: 233ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 258ms (compile: 4ms, proxy.ts: 89ms, render: 165ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 287ms (compile: 1436Âµs, proxy.ts: 77ms, render: 208ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 349ms (compile: 12ms, proxy.ts: 103ms, render: 234ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 253ms (compile: 1286Âµs, proxy.ts: 84ms, render: 167ms)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 330ms (compile: 9ms, proxy.ts: 93ms, render: 227ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 261ms (compile: 1984Âµs, proxy.ts: 80ms, render: 179ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 611ms (compile: 1012Âµs, proxy.ts: 79ms, render: 531ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=Madrid 200 in 622ms (compile: 2ms, proxy.ts: 89ms, render: 530ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 273ms (compile: 3ms, proxy.ts: 84ms, render: 186ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 604ms (compile: 1415Âµs, proxy.ts: 100ms, render: 503ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 330ms (compile: 3ms, proxy.ts: 101ms, render: 226ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 306ms (compile: 3ms, proxy.ts: 84ms, render: 218ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Fetching data for years: 2024, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: Madrid
[By Store API] Success - Retrieved data for 8 stores
 GET /api/citas/historical/by-store?years=2024&grouping=annual 200 in 666ms (compile: 11ms, proxy.ts: 430ms, render: 226ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 680ms (compile: 13ms, proxy.ts: 427ms, render: 240ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 690ms (compile: 2ms, proxy.ts: 464ms, render: 224ms)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=Madrid 200 in 1129ms (compile: 4ms, proxy.ts: 511ms, render: 613ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 283ms (compile: 5ms, proxy.ts: 85ms, render: 194ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 7.5s (compile: 2.2s, proxy.ts: 4.9s, render: 295ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 7.5s (compile: 2.2s, proxy.ts: 4.9s, render: 302ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 7.5s (compile: 2.2s, proxy.ts: 4.9s, render: 339ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
 GET /api/citas/historical?year=2024 200 in 7.5s (compile: 2.2s, proxy.ts: 4.9s, render: 363ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 7.5s (compile: 2.2s, proxy.ts: 4.9s, render: 374ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 10.1s (compile: 2.2s, proxy.ts: 4.9s, render: 3.0s)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
 GET /citas 200 in 3.1s (compile: 2.1s, proxy.ts: 97ms, render: 816ms)
[By Store API] Fetching data for years: 2025, grouping: annual
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 3.1s (compile: 1320ms, proxy.ts: 1123ms, render: 662ms)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 3.5s (compile: 966ms, proxy.ts: 1478ms, render: 1029ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 3.9s (compile: 25ms, proxy.ts: 2.9s, render: 1017ms)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 1268ms (compile: 163ms, proxy.ts: 893ms, render: 211ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 2.5s (compile: 166ms, proxy.ts: 874ms, render: 1491ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 2.9s (compile: 2.4s, proxy.ts: 330ms, render: 236ms)
 GET /citas 200 in 226ms (compile: 37ms, proxy.ts: 150ms, render: 39ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 1581ms (compile: 33ms, proxy.ts: 571ms, render: 977ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 581ms (compile: 4ms, proxy.ts: 131ms, render: 446ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical?year=2024 200 in 995ms (compile: 72ms, proxy.ts: 504ms, render: 420ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 1137ms (compile: 30ms, proxy.ts: 495ms, render: 611ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 1150ms (compile: 18ms, proxy.ts: 507ms, render: 624ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 1198ms (compile: 34ms, proxy.ts: 489ms, render: 674ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 1230ms (compile: 29ms, proxy.ts: 497ms, render: 704ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: annual
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 331ms (compile: 1767Âµs, proxy.ts: 83ms, render: 246ms)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 278ms (compile: 2ms, proxy.ts: 82ms, render: 193ms)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 1424ms (compile: 67ms, proxy.ts: 503ms, render: 854ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 288ms (compile: 4ms, proxy.ts: 79ms, render: 205ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 302ms (compile: 1381Âµs, proxy.ts: 89ms, render: 212ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 355ms (compile: 2ms, proxy.ts: 101ms, render: 252ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 272ms (compile: 4ms, proxy.ts: 81ms, render: 187ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 276ms (compile: 2ms, proxy.ts: 92ms, render: 181ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 404ms (compile: 2ms, proxy.ts: 89ms, render: 312ms)
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 418ms (compile: 2ms, proxy.ts: 103ms, render: 313ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 339ms (compile: 5ms, proxy.ts: 93ms, render: 241ms)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 729ms (compile: 2ms, proxy.ts: 93ms, render: 633ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 298ms (compile: 1969Âµs, proxy.ts: 80ms, render: 216ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 344ms (compile: 3ms, proxy.ts: 85ms, render: 256ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 342ms (compile: 31ms, proxy.ts: 104ms, render: 206ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 634ms (compile: 1773Âµs, proxy.ts: 97ms, render: 536ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 315ms (compile: 2ms, proxy.ts: 96ms, render: 216ms)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 682ms (compile: 4ms, proxy.ts: 97ms, render: 581ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: Sevilla
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 288ms (compile: 2ms, proxy.ts: 120ms, render: 166ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 290ms (compile: 3ms, proxy.ts: 93ms, render: 193ms)
[Historical Compare API] Year 2025: 478 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 325ms (compile: 6ms, proxy.ts: 115ms, render: 203ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 369ms (compile: 1759Âµs, proxy.ts: 142ms, render: 226ms)
[Historical Compare API] Year 2024: 422 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 284 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2022: 0 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 279ms (compile: 1763Âµs, proxy.ts: 75ms, render: 202ms)
[Historical Compare API] Year 2021: 0 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=Sevilla 200 in 662ms (compile: 5ms, proxy.ts: 107ms, render: 550ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 377ms (compile: 5ms, proxy.ts: 172ms, render: 200ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: MÃ¡laga
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
[Historical Compare API] Year 2025: 186 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 275ms (compile: 11ms, proxy.ts: 98ms, render: 166ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 287ms (compile: 8ms, proxy.ts: 107ms, render: 171ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 331ms (compile: 1379Âµs, proxy.ts: 132ms, render: 198ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 347ms (compile: 8ms, proxy.ts: 108ms, render: 231ms)
[Historical Compare API] Year 2024: 127 appointments found (via RPC)
[Historical Compare API] Year 2023: 28 appointments found (via RPC)
[Historical Compare API] Year 2022: 0 appointments found (via RPC)
[Historical Compare API] Year 2021: 0 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=M%C3%A1laga 200 in 651ms (compile: 6ms, proxy.ts: 94ms, render: 552ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 322ms (compile: 2ms, proxy.ts: 93ms, render: 227ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: Barcelona
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 332ms (compile: 5ms, proxy.ts: 169ms, render: 158ms)
[Historical Compare API] Year 2025: 129 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 374ms (compile: 7ms, proxy.ts: 149ms, render: 217ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 388ms (compile: 5ms, proxy.ts: 169ms, render: 214ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 421ms (compile: 1735Âµs, proxy.ts: 186ms, render: 233ms)
[Historical Compare API] Year 2024: 24 appointments found (via RPC)
[Historical Compare API] Year 2023: 36 appointments found (via RPC)
[Historical Compare API] Year 2022: 0 appointments found (via RPC)
[Historical Compare API] Year 2021: 0 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=Barcelona 200 in 717ms (compile: 9ms, proxy.ts: 170ms, render: 539ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 343ms (compile: 1994Âµs, proxy.ts: 98ms, render: 243ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2022, grouping: monthly
[By Store API] Success - Retrieved data for 13 stores
 GET /api/citas/historical/by-store?years=2022&grouping=monthly 200 in 381ms (compile: 5ms, proxy.ts: 154ms, render: 222ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2023, grouping: monthly
[By Store API] Success - Retrieved data for 6 stores
 GET /api/citas/historical/by-store?years=2023&grouping=monthly 200 in 347ms (compile: 7ms, proxy.ts: 150ms, render: 191ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2024, grouping: monthly
[By Store API] Success - Retrieved data for 8 stores
 GET /api/citas/historical/by-store?years=2024&grouping=monthly 200 in 374ms (compile: 4ms, proxy.ts: 150ms, render: 219ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 403ms (compile: 8ms, proxy.ts: 145ms, render: 249ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 509ms (compile: 43ms, proxy.ts: 178ms, render: 289ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 353ms (compile: 1757Âµs, proxy.ts: 86ms, render: 265ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 1830ms (compile: 55ms, proxy.ts: 283ms, render: 1492ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 704ms (compile: 366ms, proxy.ts: 297ms, render: 42ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 472ms (compile: 56ms, proxy.ts: 377ms, render: 39ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 1028ms (compile: 509ms, proxy.ts: 310ms, render: 209ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 201ms (compile: 4ms, proxy.ts: 148ms, render: 49ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 504ms (compile: 57ms, proxy.ts: 312ms, render: 135ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 167ms (compile: 5ms, proxy.ts: 141ms, render: 21ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 309ms (compile: 8ms, proxy.ts: 273ms, render: 27ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 151ms (compile: 4ms, proxy.ts: 134ms, render: 13ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 235ms (compile: 5ms, proxy.ts: 180ms, render: 50ms)
ğŸ” Middleware Debug: { url: '/calendario', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /calendario 200 in 303ms (compile: 36ms, proxy.ts: 182ms, render: 85ms)
ğŸ” Middleware Debug: {
  url: '/api/calendar/events',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/calendario', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/calendar/events ...
 GET /calendario 200 in 3.9s (compile: 3.7s, proxy.ts: 146ms, render: 95ms)
 GET /api/calendar/events?year=2026 200 in 4.2s (compile: 3.7s, proxy.ts: 109ms, render: 335ms)
ğŸ” Middleware Debug: {
  url: '/api/calendar/events',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/calendar/events?year=2026 200 in 345ms (compile: 12ms, proxy.ts: 119ms, render: 214ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 257ms (compile: 41ms, proxy.ts: 199ms, render: 17ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/acuity/stats ...
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:05.927Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:05.931Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:05.933Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:05.946Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:05.963Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:06.043Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 4.2s (compile: 3.8s, proxy.ts: 106ms, render: 263ms)
 GET /api/acuity/stats?type=monthly&months=12 200 in 4.2s (compile: 3.2s, proxy.ts: 709ms, render: 279ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 4.2s (compile: 2.9s, proxy.ts: 955ms, render: 326ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 4.2s (compile: 3.0s, proxy.ts: 867ms, render: 345ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 4.3s (compile: 3.2s, proxy.ts: 715ms, render: 379ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 4.4s (compile: 3.2s, proxy.ts: 703ms, render: 470ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T16:30:06.321Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 412ms (compile: 1873Âµs, proxy.ts: 106ms, render: 304ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:07.587Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[By Store API] Fetching data for years: 2025, grouping: monthly
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T16:30:07.606Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 1125ms (compile: 765ms, proxy.ts: 179ms, render: 181ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 1411ms (compile: 996ms, proxy.ts: 192ms, render: 223ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 1512ms (compile: 1193ms, proxy.ts: 90ms, render: 229ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 1586ms (compile: 1231ms, proxy.ts: 94ms, render: 261ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 1690ms (compile: 1250ms, proxy.ts: 127ms, render: 312ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:07.872Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:07.912Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:07.916Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:07.934Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
 GET /api/acuity/stats?type=monthly&months=12 200 in 274ms (compile: 1940Âµs, proxy.ts: 90ms, render: 182ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 294ms (compile: 12ms, proxy.ts: 100ms, render: 182ms)
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:30:08.050Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 1897ms (compile: 1262ms, proxy.ts: 80ms, render: 555ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 372ms (compile: 1404Âµs, proxy.ts: 103ms, render: 268ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 376ms (compile: 2ms, proxy.ts: 83ms, render: 291ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T16:30:08.186Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 322ms (compile: 15ms, proxy.ts: 96ms, render: 211ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T16:30:08.308Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=occupation&days=21 200 in 507ms (compile: 10ms, proxy.ts: 124ms, render: 373ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 265ms (compile: 3ms, proxy.ts: 95ms, render: 166ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 360ms (compile: 1265Âµs, proxy.ts: 150ms, render: 209ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 271ms (compile: 2ms, proxy.ts: 74ms, render: 194ms)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 314ms (compile: 1312Âµs, proxy.ts: 86ms, render: 227ms)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 567ms (compile: 1879Âµs, proxy.ts: 85ms, render: 480ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 4.0s (compile: 760ms, proxy.ts: 139ms, render: 3.1s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 6.9s (compile: 14ms, proxy.ts: 1260ms, render: 5.7s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 306ms (compile: 100ms, proxy.ts: 171ms, render: 36ms)
 GET /api/citas/historical?year=2024 200 in 4.8s (compile: 4.3s, proxy.ts: 144ms, render: 352ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 1783ms (compile: 1378ms, proxy.ts: 91ms, render: 314ms)
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 1950ms (compile: 1359ms, proxy.ts: 110ms, render: 481ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 298ms (compile: 54ms, proxy.ts: 212ms, render: 32ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 149ms (compile: 6ms, proxy.ts: 106ms, render: 37ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 171ms (compile: 2ms, proxy.ts: 140ms, render: 29ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 179ms (compile: 4ms, proxy.ts: 152ms, render: 23ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 220ms (compile: 6ms, proxy.ts: 185ms, render: 30ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022&stores=all&patternType=all 200 in 498ms (compile: 8ms, proxy.ts: 161ms, render: 329ms)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022&stores=all&insightTypes=all 200 in 519ms (compile: 1951Âµs, proxy.ts: 241ms, render: 277ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 336ms (compile: 2ms, proxy.ts: 83ms, render: 251ms)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 343ms (compile: 1410Âµs, proxy.ts: 90ms, render: 252ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025&stores=all&insightTypes=all 200 in 922ms (compile: 6ms, proxy.ts: 640ms, render: 277ms)
 GET /api/citas/historical/patterns?years=2025&stores=all&patternType=all 200 in 962ms (compile: 24ms, proxy.ts: 642ms, render: 296ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 454ms (compile: 12ms, proxy.ts: 164ms, render: 278ms)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 497ms (compile: 34ms, proxy.ts: 162ms, render: 300ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025&stores=all&patternType=all 200 in 456ms (compile: 7ms, proxy.ts: 149ms, render: 299ms)
 GET /api/citas/historical/insights?years=2025&stores=all&insightTypes=all 200 in 870ms (compile: 1549Âµs, proxy.ts: 176ms, render: 692ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 447ms (compile: 2ms, proxy.ts: 89ms, render: 356ms)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 598ms (compile: 4ms, proxy.ts: 166ms, render: 429ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025&stores=all&insightTypes=all 200 in 427ms (compile: 8ms, proxy.ts: 106ms, render: 314ms)
 GET /api/citas/historical/patterns?years=2025&stores=all&patternType=all 200 in 454ms (compile: 2ms, proxy.ts: 191ms, render: 261ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 368ms (compile: 9ms, proxy.ts: 117ms, render: 242ms)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 374ms (compile: 7ms, proxy.ts: 113ms, render: 254ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 2.4s (compile: 54ms, proxy.ts: 633ms, render: 1683ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:31.704Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:31.714Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:31.717Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:31.719Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:31.731Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:31.762Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 1322ms (compile: 125ms, proxy.ts: 653ms, render: 544ms)
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 1330ms (compile: 123ms, proxy.ts: 654ms, render: 553ms)
 GET /api/acuity/stats?type=monthly&months=12 200 in 1369ms (compile: 29ms, proxy.ts: 777ms, render: 563ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 1407ms (compile: 92ms, proxy.ts: 650ms, render: 665ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 1506ms (compile: 171ms, proxy.ts: 571ms, render: 764ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 1510ms (compile: 167ms, proxy.ts: 574ms, render: 768ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T16:36:32.389Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T16:36:32.415Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:32.420Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:32.432Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 259ms (compile: 6ms, proxy.ts: 82ms, render: 172ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 333ms (compile: 7ms, proxy.ts: 106ms, render: 219ms)
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 345ms (compile: 1777Âµs, proxy.ts: 94ms, render: 249ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 378ms (compile: 14ms, proxy.ts: 103ms, render: 261ms)
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:32.596Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:32.618Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=monthly&months=12 200 in 324ms (compile: 22ms, proxy.ts: 82ms, render: 219ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:32.746Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T16:36:32.748Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T16:36:32.754Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 438ms (compile: 2ms, proxy.ts: 102ms, render: 334ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T16:36:32.819Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 302ms (compile: 1342Âµs, proxy.ts: 82ms, render: 218ms)
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 365ms (compile: 1637Âµs, proxy.ts: 105ms, render: 258ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 426ms (compile: 1741Âµs, proxy.ts: 79ms, render: 345ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 462ms (compile: 1053Âµs, proxy.ts: 117ms, render: 344ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 3.0s (compile: 75ms, proxy.ts: 1231ms, render: 1743ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/citas/historical?year=2024 200 in 2000ms (compile: 30ms, proxy.ts: 989ms, render: 980ms)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 3.2s (compile: 817ms, proxy.ts: 1232ms, render: 1138ms)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 3.2s (compile: 78ms, proxy.ts: 1227ms, render: 1889ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 3.7s (compile: 887ms, proxy.ts: 1234ms, render: 1543ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 581ms (compile: 3ms, proxy.ts: 222ms, render: 355ms)
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 1062ms (compile: 7ms, proxy.ts: 461ms, render: 594ms)
 GET /api/citas/historical?year=2024 200 in 1085ms (compile: 31ms, proxy.ts: 298ms, render: 756ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 1186ms (compile: 34ms, proxy.ts: 297ms, render: 856ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 1210ms (compile: 30ms, proxy.ts: 295ms, render: 885ms)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 1185ms (compile: 11ms, proxy.ts: 663ms, render: 510ms)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 804ms (compile: 6ms, proxy.ts: 295ms, render: 503ms)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 1879ms (compile: 7ms, proxy.ts: 662ms, render: 1210ms)
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 1147ms (compile: 318ms, proxy.ts: 291ms, render: 538ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022&stores=all&patternType=all 200 in 579ms (compile: 13ms, proxy.ts: 263ms, render: 304ms)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022&stores=all&insightTypes=all 200 in 710ms (compile: 1549Âµs, proxy.ts: 314ms, render: 395ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 476ms (compile: 6ms, proxy.ts: 127ms, render: 343ms)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 494ms (compile: 8ms, proxy.ts: 128ms, render: 358ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025&stores=all&patternType=all 200 in 1844ms (compile: 32ms, proxy.ts: 849ms, render: 964ms)
 GET /api/citas/historical/insights?years=2025&stores=all&insightTypes=all 200 in 1851ms (compile: 20ms, proxy.ts: 846ms, render: 985ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 642ms (compile: 8ms, proxy.ts: 219ms, render: 416ms)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 752ms (compile: 7ms, proxy.ts: 327ms, render: 418ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 837ms (compile: 428ms, proxy.ts: 321ms, render: 88ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 201ms (compile: 5ms, proxy.ts: 177ms, render: 19ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 175ms (compile: 4ms, proxy.ts: 148ms, render: 23ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 173ms (compile: 4ms, proxy.ts: 145ms, render: 24ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 172ms (compile: 4ms, proxy.ts: 145ms, render: 23ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: monthly
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 2.4s (compile: 1704ms, proxy.ts: 193ms, render: 508ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 2.4s (compile: 1709ms, proxy.ts: 188ms, render: 522ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 2.4s (compile: 1705ms, proxy.ts: 192ms, render: 527ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 367ms (compile: 4ms, proxy.ts: 95ms, render: 268ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 412ms (compile: 7ms, proxy.ts: 110ms, render: 295ms)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 436ms (compile: 8ms, proxy.ts: 109ms, render: 320ms)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 3.0s (compile: 1795ms, proxy.ts: 102ms, render: 1098ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 725ms (compile: 1616Âµs, proxy.ts: 85ms, render: 638ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 1059ms (compile: 665ms, proxy.ts: 102ms, render: 291ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 2.2s (compile: 1959Âµs, proxy.ts: 90ms, render: 2.1s)
â—‹ Compiling /api/citas/historical/insights ...
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 3.0s (compile: 164ms, proxy.ts: 2.7s, render: 75ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 269ms (compile: 46ms, proxy.ts: 157ms, render: 66ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 1213ms (compile: 268ms, proxy.ts: 812ms, render: 133ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 351ms (compile: 59ms, proxy.ts: 239ms, render: 52ms)
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 45s (compile: 13.0s, proxy.ts: 136ms, render: 32.2s)
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 46s (compile: 13.0s, proxy.ts: 135ms, render: 33.0s)
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 23.4s (compile: 2.1s, proxy.ts: 344ms, render: 21.0s)
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 24.0s (compile: 2.1s, proxy.ts: 342ms, render: 21.5s)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 288ms (compile: 61ms, proxy.ts: 185ms, render: 41ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 401ms (compile: 160ms, proxy.ts: 177ms, render: 64ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 221ms (compile: 47ms, proxy.ts: 148ms, render: 26ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 289ms (compile: 58ms, proxy.ts: 139ms, render: 92ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 328ms (compile: 167ms, proxy.ts: 134ms, render: 26ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/citas/historical/insights ...
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 349ms (compile: 80ms, proxy.ts: 170ms, render: 98ms)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022&stores=all&patternType=all 200 in 24.5s (compile: 5.7s, proxy.ts: 108ms, render: 18.8s)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022&stores=all&insightTypes=all 200 in 25.2s (compile: 5.5s, proxy.ts: 240ms, render: 19.5s)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 21.5s (compile: 1009ms, proxy.ts: 429ms, render: 20.0s)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 25.3s (compile: 1007ms, proxy.ts: 430ms, render: 23.9s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 13.7s (compile: 37ms, proxy.ts: 285ms, render: 13.4s)
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 14.9s (compile: 4ms, proxy.ts: 350ms, render: 14.5s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025,2024,2023,2021&stores=all&insightTypes=all 200 in 14.9s (compile: 63ms, proxy.ts: 450ms, render: 14.4s)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2021&stores=all&patternType=all 200 in 15.1s (compile: 17ms, proxy.ts: 449ms, render: 14.6s)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022&stores=all&patternType=all 200 in 18.0s (compile: 333ms, proxy.ts: 1374ms, render: 16.3s)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022&stores=all&insightTypes=all 200 in 18.3s (compile: 379ms, proxy.ts: 1379ms, render: 16.6s)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 12.7s (compile: 6ms, proxy.ts: 1164ms, render: 11.6s)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 12.2s (compile: 1883Âµs, proxy.ts: 146ms, render: 12.0s)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 775ms (compile: 293ms, proxy.ts: 436ms, render: 46ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 501ms (compile: 226ms, proxy.ts: 156ms, render: 118ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 263ms (compile: 74ms, proxy.ts: 161ms, render: 28ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 251ms (compile: 49ms, proxy.ts: 181ms, render: 21ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 382ms (compile: 74ms, proxy.ts: 215ms, render: 94ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 299ms (compile: 89ms, proxy.ts: 146ms, render: 64ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/citas/historical/compare ...
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical?year=2024 200 in 5.8s (compile: 4.7s, proxy.ts: 362ms, render: 791ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 5.8s (compile: 4.6s, proxy.ts: 384ms, render: 823ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 5.9s (compile: 4.6s, proxy.ts: 422ms, render: 829ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 6.0s (compile: 4.6s, proxy.ts: 424ms, render: 954ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 6.0s (compile: 4.6s, proxy.ts: 418ms, render: 964ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: annual
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 6.2s (compile: 4.4s, proxy.ts: 610ms, render: 1196ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 383ms (compile: 17ms, proxy.ts: 115ms, render: 252ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 378ms (compile: 16ms, proxy.ts: 109ms, render: 253ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 307ms (compile: 1530Âµs, proxy.ts: 88ms, render: 218ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 307ms (compile: 2ms, proxy.ts: 83ms, render: 222ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 509ms (compile: 25ms, proxy.ts: 108ms, render: 376ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 272ms (compile: 1561Âµs, proxy.ts: 94ms, render: 177ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 302ms (compile: 4ms, proxy.ts: 91ms, render: 206ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 268ms (compile: 1224Âµs, proxy.ts: 74ms, render: 193ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 298ms (compile: 4ms, proxy.ts: 94ms, render: 201ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: Madrid
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 279ms (compile: 1044Âµs, proxy.ts: 81ms, render: 197ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 261ms (compile: 1277Âµs, proxy.ts: 84ms, render: 176ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 266ms (compile: 1409Âµs, proxy.ts: 91ms, render: 173ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 669ms (compile: 6ms, proxy.ts: 83ms, render: 580ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=Madrid 200 in 591ms (compile: 1333Âµs, proxy.ts: 89ms, render: 500ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 293ms (compile: 2ms, proxy.ts: 82ms, render: 208ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 297ms (compile: 6ms, proxy.ts: 89ms, render: 202ms)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 605ms (compile: 6ms, proxy.ts: 93ms, render: 506ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 298ms (compile: 2ms, proxy.ts: 103ms, render: 192ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 352ms (compile: 3ms, proxy.ts: 113ms, render: 236ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/citas/historical/patterns ...
 GET /api/citas/historical?year=2024 200 in 5.3s (compile: 4.7s, proxy.ts: 116ms, render: 440ms)
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 18.5s (compile: 4.7s, proxy.ts: 108ms, render: 13.6s)
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 18.8s (compile: 4.8s, proxy.ts: 84ms, render: 14.0s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 11.3s (compile: 6ms, proxy.ts: 101ms, render: 11.2s)
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 12.3s (compile: 3ms, proxy.ts: 120ms, render: 12.2s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025,2024,2023,2022&stores=all&insightTypes=all 200 in 15.9s (compile: 1984Âµs, proxy.ts: 148ms, render: 15.7s)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 33.6s (compile: 2ms, proxy.ts: 124ms, render: 33.5s)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022&stores=all&patternType=all 200 in 35.7s (compile: 4ms, proxy.ts: 98ms, render: 35.6s)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 748ms (compile: 292ms, proxy.ts: 306ms, render: 150ms)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 40s (compile: 1882Âµs, proxy.ts: 81ms, render: 40.0s)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 390ms (compile: 143ms, proxy.ts: 206ms, render: 41ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 2.1s (compile: 10ms, proxy.ts: 210ms, render: 1836ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/acuity/stats ...
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:06.932Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:06.937Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:06.943Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:06.945Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:06.947Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:06.966Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 17.0s (compile: 14.2s, proxy.ts: 2.3s, render: 412ms)
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 17.0s (compile: 16.4s, proxy.ts: 137ms, render: 455ms)
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 17.1s (compile: 15.2s, proxy.ts: 1359ms, render: 496ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 17.1s (compile: 14.2s, proxy.ts: 2.3s, render: 548ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 17.1s (compile: 15.1s, proxy.ts: 1476ms, render: 567ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 17.2s (compile: 15.1s, proxy.ts: 1443ms, render: 641ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T17:40:07.372Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T17:40:07.374Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 598ms (compile: 3ms, proxy.ts: 112ms, render: 482ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 735ms (compile: 4ms, proxy.ts: 164ms, render: 568ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/citas/historical ...
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[By Store API] Fetching data for years: 2025, grouping: monthly
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:14.712Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 7.0s (compile: 6.5s, proxy.ts: 131ms, render: 311ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 7.6s (compile: 7.1s, proxy.ts: 142ms, render: 336ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 7.5s (compile: 7.1s, proxy.ts: 84ms, render: 340ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/citas/historical?year=2024 200 in 7.0s (compile: 6.5s, proxy.ts: 138ms, render: 358ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 7.6s (compile: 7.1s, proxy.ts: 138ms, render: 379ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:14.985Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:15.003Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:15.004Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:15.054Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:40:15.056Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 249ms (compile: 1854Âµs, proxy.ts: 93ms, render: 154ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 264ms (compile: 1022Âµs, proxy.ts: 86ms, render: 177ms)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 337ms (compile: 979Âµs, proxy.ts: 82ms, render: 253ms)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 8.0s (compile: 7.2s, proxy.ts: 111ms, render: 705ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T17:40:15.254Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T17:40:15.297Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 459ms (compile: 1510Âµs, proxy.ts: 87ms, render: 371ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 276ms (compile: 3ms, proxy.ts: 92ms, render: 181ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 322ms (compile: 8ms, proxy.ts: 101ms, render: 213ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, grouping: monthly
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 322ms (compile: 990Âµs, proxy.ts: 93ms, render: 228ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 278ms (compile: 3ms, proxy.ts: 87ms, render: 188ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 285ms (compile: 3ms, proxy.ts: 82ms, render: 199ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 703ms (compile: 2ms, proxy.ts: 108ms, render: 593ms)
 GET /api/citas/historical?year=2024 200 in 498ms (compile: 1619Âµs, proxy.ts: 87ms, render: 409ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 3.1s (compile: 1108Âµs, proxy.ts: 93ms, render: 3.0s)
â—‹ Compiling /api/citas/historical/insights ...
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 358ms (compile: 6ms, proxy.ts: 159ms, render: 193ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 378ms (compile: 7ms, proxy.ts: 177ms, render: 195ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 392ms (compile: 6ms, proxy.ts: 177ms, render: 209ms)
 GET /api/citas/historical?year=2024 200 in 397ms (compile: 5ms, proxy.ts: 176ms, render: 216ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 277ms (compile: 1292Âµs, proxy.ts: 91ms, render: 185ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 274ms (compile: 1200Âµs, proxy.ts: 90ms, render: 183ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 347ms (compile: 4ms, proxy.ts: 102ms, render: 241ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 269ms (compile: 1386Âµs, proxy.ts: 80ms, render: 187ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 613ms (compile: 8ms, proxy.ts: 93ms, render: 512ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/citas/historical?year=2024 200 in 331ms (compile: 1413Âµs, proxy.ts: 82ms, render: 247ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 309ms (compile: 5ms, proxy.ts: 102ms, render: 203ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 833ms (compile: 2ms, proxy.ts: 89ms, render: 743ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 942ms (compile: 2ms, proxy.ts: 91ms, render: 849ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 1606ms (compile: 745ms, proxy.ts: 563ms, render: 298ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 1756ms (compile: 1725Âµs, proxy.ts: 82ms, render: 1672ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 371ms (compile: 10ms, proxy.ts: 123ms, render: 238ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 386ms (compile: 5ms, proxy.ts: 109ms, render: 272ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 314ms (compile: 1828Âµs, proxy.ts: 134ms, render: 178ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 336ms (compile: 12ms, proxy.ts: 120ms, render: 204ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 290ms (compile: 1465Âµs, proxy.ts: 78ms, render: 210ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=Madrid 200 in 713ms (compile: 70ms, proxy.ts: 109ms, render: 535ms)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 664ms (compile: 10ms, proxy.ts: 122ms, render: 532ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 305ms (compile: 1203Âµs, proxy.ts: 99ms, render: 204ms)
 GET /api/citas/historical?year=2024 200 in 331ms (compile: 4ms, proxy.ts: 107ms, render: 219ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
 GET /api/citas/historical?year=2024 200 in 339ms (compile: 1132Âµs, proxy.ts: 107ms, render: 232ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 359ms (compile: 12ms, proxy.ts: 102ms, render: 245ms)
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 13.6s (compile: 3.6s, proxy.ts: 84ms, render: 10.0s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 14.0s (compile: 3.4s, proxy.ts: 110ms, render: 10.4s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 9.1s (compile: 4ms, proxy.ts: 110ms, render: 9.0s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 10.8s (compile: 1867Âµs, proxy.ts: 84ms, render: 10.7s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 11.2s (compile: 3ms, proxy.ts: 88ms, render: 11.1s)
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 9.7s (compile: 2ms, proxy.ts: 109ms, render: 9.6s)
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 9.8s (compile: 8ms, proxy.ts: 173ms, render: 9.6s)
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 10.2s (compile: 1868Âµs, proxy.ts: 259ms, render: 9.9s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 16.3s (compile: 44ms, proxy.ts: 213ms, render: 16.0s)
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 16.8s (compile: 39ms, proxy.ts: 245ms, render: 16.5s)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022&stores=all&insightTypes=all 200 in 19.9s (compile: 41ms, proxy.ts: 547ms, render: 19.3s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022&stores=all&patternType=all 200 in 20.3s (compile: 16ms, proxy.ts: 546ms, render: 19.8s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 19.9s (compile: 2ms, proxy.ts: 118ms, render: 19.8s)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 21.4s (compile: 4ms, proxy.ts: 164ms, render: 21.2s)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022&stores=all&patternType=all 200 in 14.5s (compile: 2ms, proxy.ts: 89ms, render: 14.4s)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022&stores=all&insightTypes=all 200 in 16.3s (compile: 3ms, proxy.ts: 90ms, render: 16.2s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: monthly
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 813ms (compile: 10ms, proxy.ts: 292ms, render: 512ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 842ms (compile: 14ms, proxy.ts: 444ms, render: 384ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 855ms (compile: 14ms, proxy.ts: 443ms, render: 398ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 887ms (compile: 10ms, proxy.ts: 317ms, render: 559ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/citas/historical?year=2024 200 in 912ms (compile: 5ms, proxy.ts: 443ms, render: 464ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 273ms (compile: 1262Âµs, proxy.ts: 94ms, render: 178ms)
[By Store API] Fetching data for years: 2025, grouping: monthly
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 1192ms (compile: 19ms, proxy.ts: 443ms, render: 730ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 372ms (compile: 1213Âµs, proxy.ts: 100ms, render: 271ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 395ms (compile: 1326Âµs, proxy.ts: 93ms, render: 301ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 457ms (compile: 1158Âµs, proxy.ts: 100ms, render: 356ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/citas/historical?year=2024 200 in 437ms (compile: 1471Âµs, proxy.ts: 86ms, render: 349ms)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 299ms (compile: 1083Âµs, proxy.ts: 85ms, render: 213ms)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 318ms (compile: 2ms, proxy.ts: 92ms, render: 224ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 346ms (compile: 15ms, proxy.ts: 88ms, render: 242ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 381ms (compile: 1963Âµs, proxy.ts: 112ms, render: 267ms)
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: Madrid
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 298ms (compile: 3ms, proxy.ts: 88ms, render: 206ms)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 643ms (compile: 3ms, proxy.ts: 94ms, render: 546ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 301ms (compile: 4ms, proxy.ts: 134ms, render: 163ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 569ms (compile: 1314Âµs, proxy.ts: 74ms, render: 494ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=Madrid 200 in 824ms (compile: 10ms, proxy.ts: 90ms, render: 724ms)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 500ms (compile: 170ms, proxy.ts: 115ms, render: 215ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 1014ms (compile: 81ms, proxy.ts: 319ms, render: 615ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 321ms (compile: 1840Âµs, proxy.ts: 108ms, render: 211ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 277ms (compile: 1617Âµs, proxy.ts: 79ms, render: 196ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 13.4s (compile: 15ms, proxy.ts: 1894ms, render: 11.4s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 2.3s (compile: 1928ms, proxy.ts: 194ms, render: 144ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 140ms (compile: 3ms, proxy.ts: 128ms, render: 10ms)
 GET /api/citas/historical?year=2024 200 in 3.1s (compile: 2.0s, proxy.ts: 396ms, render: 644ms)
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 14.7s (compile: 2.1s, proxy.ts: 358ms, render: 12.3s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 15.1s (compile: 2.1s, proxy.ts: 361ms, render: 12.6s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/patterns?years=2025,2024,2023&stores=all&patternType=all 200 in 10.3s (compile: 3ms, proxy.ts: 99ms, render: 10.2s)
 GET /api/citas/historical/insights?years=2025,2024,2023&stores=all&insightTypes=all 200 in 17.2s (compile: 3ms, proxy.ts: 105ms, render: 17.1s)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/patterns',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/insights',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical/insights?years=2025,2024,2023,2022&stores=all&insightTypes=all 200 in 15.3s (compile: 74ms, proxy.ts: 202ms, render: 15.0s)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 342ms (compile: 138ms, proxy.ts: 156ms, render: 48ms)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022,2021&stores=all&patternType=all 200 in 21.2s (compile: 1450Âµs, proxy.ts: 94ms, render: 21.1s)
 GET /api/citas/historical/patterns?years=2025,2024,2023,2022&stores=all&patternType=all 200 in 24.4s (compile: 6ms, proxy.ts: 179ms, render: 24.2s)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 1168ms (compile: 246ms, proxy.ts: 778ms, render: 144ms)
 GET /api/citas/historical/insights?years=2025,2024,2023,2022,2021&stores=all&insightTypes=all 200 in 28.9s (compile: 1661Âµs, proxy.ts: 118ms, render: 28.8s)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 929ms (compile: 325ms, proxy.ts: 410ms, render: 194ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 336ms (compile: 113ms, proxy.ts: 181ms, render: 42ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 242ms (compile: 62ms, proxy.ts: 154ms, render: 26ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 347ms (compile: 119ms, proxy.ts: 195ms, render: 34ms)
ğŸ” Middleware Debug: {
  url: '/citas/clubs/madrid',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /citas/clubs/[storeName] ...
 GET /citas/clubs/madrid 200 in 17.8s (compile: 17.5s, proxy.ts: 252ms, render: 53ms)
ğŸ” Middleware Debug: {
  url: '/citas/clubs/madrid',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas/clubs/madrid 200 in 177ms (compile: 10ms, proxy.ts: 146ms, render: 20ms)
ğŸ” Middleware Debug: {
  url: '/citas/clubs/madrid',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas/clubs/madrid 200 in 155ms (compile: 5ms, proxy.ts: 138ms, render: 13ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/acuity/stats ...
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:57.081Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:57.092Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:57.093Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:57.098Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:57.121Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:57.126Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 7.9s (compile: 7.4s, proxy.ts: 199ms, render: 330ms)
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 7.9s (compile: 7.4s, proxy.ts: 200ms, render: 366ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations&startDate=2026-01-09 200 in 8.0s (compile: 7.4s, proxy.ts: 199ms, render: 402ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=365&startDate=2026-01-09 200 in 8.0s (compile: 7.4s, proxy.ts: 122ms, render: 453ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=365&startDate=2026-01-09 200 in 8.1s (compile: 6.7s, proxy.ts: 864ms, render: 531ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:57.499Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=365&startDate=2026-01-09 200 in 8.1s (compile: 7.4s, proxy.ts: 200ms, render: 568ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 307ms (compile: 2ms, proxy.ts: 117ms, render: 188ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:57.628Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 459ms (compile: 29ms, proxy.ts: 134ms, render: 296ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'availability',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:59.106Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:59.110Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:59.126Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:49:59.127Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations&startDate=2026-01-09 200 in 1810ms (compile: 1498ms, proxy.ts: 106ms, render: 206ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Appointments] Total appointments before filtering: 507
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Madrid + Solo quiero informarme',
  'The Bundclub CDMX (Polanco)'
]
[Acuity Appointments] Filtered appointments: 507 -> 218
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-01-09 200 in 1418ms (compile: 971ms, proxy.ts: 218ms, render: 230ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 1906ms (compile: 1531ms, proxy.ts: 126ms, render: 248ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=365&startDate=2026-01-09 200 in 1884ms (compile: 1401ms, proxy.ts: 120ms, render: 363ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=365&startDate=2026-01-09 200 in 1862ms (compile: 1369ms, proxy.ts: 116ms, render: 376ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=occupation&days=365&startDate=2026-01-09 200 in 1839ms (compile: 1229ms, proxy.ts: 171ms, render: 439ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 304
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Murcia',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 304 -> 145
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-12-01&endDate=2025-12-31 200 in 305ms (compile: 2ms, proxy.ts: 121ms, render: 182ms)
[Acuity Appointments] Total appointments before filtering: 5
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Sevilla',
  'The Bundclub Madrid',
  'The Bundclub MÃ¡laga'
]
[Acuity Appointments] Filtered appointments: 5 -> 3
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-02-01&endDate=2026-02-28 200 in 338ms (compile: 13ms, proxy.ts: 94ms, render: 231ms)
[Acuity Appointments] Total appointments before filtering: 1
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [ '- The Bundclub Zaragoza -' ]
[Acuity Appointments] Filtered appointments: 1 -> 0
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-04-01&endDate=2026-04-30 200 in 326ms (compile: 2ms, proxy.ts: 112ms, render: 213ms)
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 279ms (compile: 1334Âµs, proxy.ts: 104ms, render: 174ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 268ms (compile: 1582Âµs, proxy.ts: 87ms, render: 179ms)
âš  Server is approaching the used memory threshold, restarting...
â–² Next.js 16.1.1 (webpack)
- Local:         http://localhost:3000
- Network:       http://192.168.0.244:3000
- Environments: .env.local

âœ“ Starting...
âš  The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy
âœ“ Ready in 1830ms
ğŸ” Middleware Debug: {
  url: '/citas/clubs/madrid',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /citas/clubs/[storeName] ...
 GET /citas/clubs/madrid 200 in 4.7s (compile: 4.1s, proxy.ts: 256ms, render: 376ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:10.540Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:10.545Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:10.547Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:10.550Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:10.555Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:10.618Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 1781ms (compile: 1413ms, proxy.ts: 160ms, render: 208ms)
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations&startDate=2026-01-09 200 in 1796ms (compile: 1381ms, proxy.ts: 192ms, render: 223ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=365&startDate=2026-01-09 200 in 1923ms (compile: 1414ms, proxy.ts: 164ms, render: 346ms)
 GET /api/acuity/stats?type=monthly&months=12 200 in 1934ms (compile: 1412ms, proxy.ts: 165ms, render: 356ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=365&startDate=2026-01-09 200 in 1967ms (compile: 1416ms, proxy.ts: 162ms, render: 390ms)
 GET /api/acuity/stats?type=occupation&days=365&startDate=2026-01-09 200 in 1985ms (compile: 1132ms, proxy.ts: 445ms, render: 407ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:11.398Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:11.403Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:11.408Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:11.430Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations&startDate=2026-01-09 200 in 703ms (compile: 428ms, proxy.ts: 92ms, render: 184ms)
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:11.507Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 855ms (compile: 561ms, proxy.ts: 91ms, render: 202ms)
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 862ms (compile: 572ms, proxy.ts: 81ms, render: 209ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=365&startDate=2026-01-09 200 in 770ms (compile: 334ms, proxy.ts: 186ms, render: 250ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=365&startDate=2026-01-09 200 in 763ms (compile: 333ms, proxy.ts: 111ms, render: 319ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:50:11.666Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 850ms (compile: 333ms, proxy.ts: 156ms, render: 360ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 304
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Murcia',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 304 -> 145
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-12-01&endDate=2025-12-31 200 in 235ms (compile: 4ms, proxy.ts: 86ms, render: 145ms)
[Acuity Appointments] Total appointments before filtering: 5
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Sevilla',
  'The Bundclub Madrid',
  'The Bundclub MÃ¡laga'
]
[Acuity Appointments] Filtered appointments: 5 -> 3
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-02-01&endDate=2026-02-28 200 in 226ms (compile: 1171Âµs, proxy.ts: 78ms, render: 147ms)
[Acuity Appointments] Total appointments before filtering: 507
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Madrid + Solo quiero informarme',
  'The Bundclub CDMX (Polanco)'
]
[Acuity Appointments] Filtered appointments: 507 -> 218
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-01-09 200 in 296ms (compile: 2ms, proxy.ts: 97ms, render: 197ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 1
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [ '- The Bundclub Zaragoza -' ]
[Acuity Appointments] Filtered appointments: 1 -> 0
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-04-01&endDate=2026-04-30 200 in 251ms (compile: 1657Âµs, proxy.ts: 74ms, render: 175ms)
 GET /api/acuity/stats?type=occupation&days=365&startDate=2026-01-09 200 in 406ms (compile: 1846Âµs, proxy.ts: 87ms, render: 317ms)
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 443ms (compile: 3ms, proxy.ts: 179ms, render: 261ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 507
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Madrid + Solo quiero informarme',
  'The Bundclub CDMX (Polanco)'
]
[Acuity Appointments] Filtered appointments: 507 -> 218
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-01-09 200 in 231ms (compile: 1389Âµs, proxy.ts: 79ms, render: 151ms)
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 273ms (compile: 18ms, proxy.ts: 80ms, render: 175ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Appointments] Total appointments before filtering: 304
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Murcia',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 304 -> 145
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-12-01&endDate=2025-12-31 200 in 242ms (compile: 1363Âµs, proxy.ts: 84ms, render: 157ms)
[Acuity Appointments] Total appointments before filtering: 5
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Sevilla',
  'The Bundclub Madrid',
  'The Bundclub MÃ¡laga'
]
[Acuity Appointments] Filtered appointments: 5 -> 3
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-02-01&endDate=2026-02-28 200 in 246ms (compile: 3ms, proxy.ts: 90ms, render: 153ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 1
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [ '- The Bundclub Zaragoza -' ]
[Acuity Appointments] Filtered appointments: 1 -> 0
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-04-01&endDate=2026-04-30 200 in 354ms (compile: 2ms, proxy.ts: 88ms, render: 263ms)
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 255ms (compile: 1955Âµs, proxy.ts: 93ms, render: 160ms)
ğŸ” Middleware Debug: {
  url: '/citas/clubs/madrid',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas/clubs/madrid 200 in 459ms (compile: 145ms, proxy.ts: 254ms, render: 60ms)
ğŸ” Middleware Debug: {
  url: '/citas/clubs/madrid',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas/clubs/madrid 200 in 349ms (compile: 120ms, proxy.ts: 176ms, render: 52ms)
ğŸ” Middleware Debug: {
  url: '/citas/clubs/madrid',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas/clubs/madrid 200 in 288ms (compile: 74ms, proxy.ts: 118ms, render: 96ms)
ğŸ” Middleware Debug: {
  url: '/citas/clubs/madrid',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas/clubs/madrid 200 in 492ms (compile: 8ms, proxy.ts: 94ms, render: 390ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:52:35.889Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:52:35.897Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:52:35.903Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:52:35.913Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:52:35.919Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 2.3s (compile: 1953ms, proxy.ts: 160ms, render: 227ms)
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations&startDate=2026-01-09 200 in 2.3s (compile: 1970ms, proxy.ts: 143ms, render: 229ms)
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 2.3s (compile: 1956ms, proxy.ts: 157ms, render: 234ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=365&startDate=2026-01-09 200 in 2.4s (compile: 2.0s, proxy.ts: 99ms, render: 316ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=365&startDate=2026-01-09 200 in 2.5s (compile: 1916ms, proxy.ts: 197ms, render: 371ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=365&startDate=2026-01-09 200 in 2.5s (compile: 1955ms, proxy.ts: 158ms, render: 415ms)
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:52:36.242Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:52:36.275Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:52:36.310Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations&startDate=2026-01-09 200 in 296ms (compile: 3ms, proxy.ts: 107ms, render: 186ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'availability',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:52:36.361Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 339ms (compile: 3ms, proxy.ts: 137ms, render: 198ms)
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 345ms (compile: 4ms, proxy.ts: 138ms, render: 203ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:52:36.436Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=365&startDate=2026-01-09 200 in 334ms (compile: 18ms, proxy.ts: 94ms, render: 222ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=365&startDate=2026-01-09 200 in 405ms (compile: 14ms, proxy.ts: 97ms, render: 294ms)
[Acuity Appointments] Total appointments before filtering: 507
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Madrid + Solo quiero informarme',
  'The Bundclub CDMX (Polanco)'
]
[Acuity Appointments] Filtered appointments: 507 -> 218
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-01-09 200 in 249ms (compile: 1623Âµs, proxy.ts: 80ms, render: 168ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Appointments] Total appointments before filtering: 5
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Sevilla',
  'The Bundclub Madrid',
  'The Bundclub MÃ¡laga'
]
[Acuity Appointments] Filtered appointments: 5 -> 3
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-02-01&endDate=2026-02-28 200 in 257ms (compile: 1376Âµs, proxy.ts: 86ms, render: 170ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 1
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [ '- The Bundclub Zaragoza -' ]
[Acuity Appointments] Filtered appointments: 1 -> 0
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-04-01&endDate=2026-04-30 200 in 428ms (compile: 1535Âµs, proxy.ts: 74ms, render: 352ms)
 GET /api/acuity/stats?type=occupation&days=365&startDate=2026-01-09 200 in 674ms (compile: 1338Âµs, proxy.ts: 138ms, render: 534ms)
[Acuity Appointments] Total appointments before filtering: 304
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Murcia',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 304 -> 145
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-12-01&endDate=2025-12-31 200 in 545ms (compile: 1405Âµs, proxy.ts: 126ms, render: 418ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 534ms (compile: 77ms, proxy.ts: 270ms, render: 187ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 5
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Sevilla',
  'The Bundclub Madrid',
  'The Bundclub MÃ¡laga'
]
[Acuity Appointments] Filtered appointments: 5 -> 3
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-02-01&endDate=2026-02-28 200 in 285ms (compile: 6ms, proxy.ts: 120ms, render: 158ms)
[Acuity Appointments] Total appointments before filtering: 507
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Madrid + Solo quiero informarme',
  'The Bundclub CDMX (Polanco)'
]
[Acuity Appointments] Filtered appointments: 507 -> 218
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-01-09 200 in 315ms (compile: 5ms, proxy.ts: 142ms, render: 168ms)
[Acuity Appointments] Total appointments before filtering: 304
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Murcia',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 304 -> 145
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-12-01&endDate=2025-12-31 200 in 316ms (compile: 3ms, proxy.ts: 119ms, render: 194ms)
[Acuity Appointments] Total appointments before filtering: 1
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [ '- The Bundclub Zaragoza -' ]
[Acuity Appointments] Filtered appointments: 1 -> 0
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-04-01&endDate=2026-04-30 200 in 346ms (compile: 2ms, proxy.ts: 107ms, render: 236ms)
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 241ms (compile: 3ms, proxy.ts: 85ms, render: 153ms)
ğŸ” Middleware Debug: {
  url: '/citas/clubs/madrid',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas/clubs/madrid 200 in 383ms (compile: 116ms, proxy.ts: 135ms, render: 132ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 3.2s (compile: 2.8s, proxy.ts: 286ms, render: 35ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:05.161Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:05.164Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:05.306Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:05.311Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:05.324Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:05.349Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 980ms (compile: 64ms, proxy.ts: 230ms, render: 685ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 996ms (compile: 67ms, proxy.ts: 228ms, render: 702ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T17:53:05.776Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T17:53:05.803Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 1780ms (compile: 35ms, proxy.ts: 627ms, render: 1118ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 1828ms (compile: 32ms, proxy.ts: 631ms, render: 1165ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 2.1s (compile: 1592Âµs, proxy.ts: 96ms, render: 1970ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 2.2s (compile: 1908Âµs, proxy.ts: 124ms, render: 2.1s)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=occupation&days=21 200 in 3.4s (compile: 33ms, proxy.ts: 630ms, render: 2.7s)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 3.4s (compile: 34ms, proxy.ts: 629ms, render: 2.8s)
â¨¯ ./src/app/(dashboard)/citas/clubs/[storeName]/page.tsx
Error:   x Expected '</', got 'jsx text (
  |     )'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/app/(dashboard)/citas/clubs/[storeName]/page.tsx:877:1]
 874 |                 </CardContent>
 875 |               </Card>
 876 |             )}
 877 | ,->       </div>
 878 | `->     </div>
 879 |       )
 880 |     }
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/app/(dashboard)/citas/clubs/[storeName]/page.tsx
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â¨¯ ./src/app/(dashboard)/citas/clubs/[storeName]/page.tsx
Error:   x Expected '</', got 'jsx text (
  |     )'
     ,-[/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/src/app/(dashboard)/citas/clubs/[storeName]/page.tsx:877:1]
 874 |                 </CardContent>
 875 |               </Card>
 876 |             )}
 877 | ,->       </div>
 878 | `->     </div>
 879 |       )
 880 |     }
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./src/app/(dashboard)/citas/clubs/[storeName]/page.tsx
 GET /api/acuity/stats?type=monthly&months=12 500 in 8.2s (compile: 6.8s, proxy.ts: 1228ms, render: 131ms)
 GET /api/acuity/stats?type=upcoming&days=21 500 in 6.9s (compile: 6.6s, proxy.ts: 148ms, render: 129ms)
 GET /api/acuity/stats?type=daily&year=2026&month=1 500 in 8.1s (compile: 6.8s, proxy.ts: 1180ms, render: 129ms)
 GET /api/acuity/stats?type=cancellations 500 in 6.7s (compile: 6.3s, proxy.ts: 270ms, render: 129ms)
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 500 in 6.5s (compile: 6.2s, proxy.ts: 211ms, render: 128ms)
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 500 in 6.5s (compile: 6.2s, proxy.ts: 222ms, render: 128ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 500 in 159ms (compile: 10ms, proxy.ts: 141ms, render: 8ms)
âš  Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 500 in 194ms (compile: 20ms, proxy.ts: 158ms, render: 17ms)
 GET /api/acuity/stats?type=availability&days=21 500 in 197ms (compile: 10ms, proxy.ts: 170ms, render: 17ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 500 in 125ms (compile: 15ms, proxy.ts: 90ms, render: 19ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 500 in 161ms (compile: 10ms, proxy.ts: 146ms, render: 5ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 500 in 123ms (compile: 19ms, proxy.ts: 98ms, render: 6ms)
â—‹ Compiling /_error ...
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, rename '/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/.next/dev/cache/webpack/client-development-fallback/1.pack.gz_' -> '/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/.next/dev/cache/webpack/client-development-fallback/1.pack.gz'
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, rename '/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/.next/dev/cache/webpack/client-development-fallback/1.pack.gz_' -> '/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/.next/dev/cache/webpack/client-development-fallback/1.pack.gz'
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, rename '/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/.next/dev/cache/webpack/client-development-fallback/0.pack.gz_' -> '/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/.next/dev/cache/webpack/client-development-fallback/0.pack.gz'
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, rename '/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/.next/dev/cache/webpack/client-development-fallback/1.pack.gz_' -> '/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/.next/dev/cache/webpack/client-development-fallback/1.pack.gz'
<w> [webpack.cache.PackFileCacheStrategy] Caching failed for pack: Error: ENOENT: no such file or directory, rename '/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/.next/dev/cache/webpack/client-development-fallback/0.pack.gz_' -> '/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/.next/dev/cache/webpack/client-development-fallback/0.pack.gz'
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 648ms (compile: 155ms, proxy.ts: 171ms, render: 322ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:47.684Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:47.687Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:47.689Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:47.690Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:47.692Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:47.697Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 553ms (compile: 8ms, proxy.ts: 190ms, render: 355ms)
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 560ms (compile: 53ms, proxy.ts: 117ms, render: 389ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 574ms (compile: 7ms, proxy.ts: 191ms, render: 376ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 672ms (compile: 5ms, proxy.ts: 193ms, render: 474ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 691ms (compile: 6ms, proxy.ts: 192ms, render: 493ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T17:53:48.150Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T17:53:48.156Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:48.191Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=occupation&days=21 200 in 800ms (compile: 8ms, proxy.ts: 190ms, render: 602ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:48.257Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:48.274Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 298ms (compile: 8ms, proxy.ts: 110ms, render: 180ms)
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 317ms (compile: 5ms, proxy.ts: 91ms, render: 220ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 263ms (compile: 1502Âµs, proxy.ts: 95ms, render: 167ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 254ms (compile: 3ms, proxy.ts: 83ms, render: 168ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:48.412Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:48.452Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:53:48.460Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T17:53:48.510Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 375ms (compile: 8ms, proxy.ts: 103ms, render: 263ms)
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 276ms (compile: 1623Âµs, proxy.ts: 84ms, render: 190ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 410ms (compile: 3ms, proxy.ts: 83ms, render: 324ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 730ms (compile: 1854Âµs, proxy.ts: 92ms, render: 636ms)
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 3.7s (compile: 3ms, proxy.ts: 89ms, render: 3.6s)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T17:53:51.873Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 352ms (compile: 31ms, proxy.ts: 97ms, render: 225ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 331ms (compile: 78ms, proxy.ts: 228ms, render: 25ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 260ms (compile: 90ms, proxy.ts: 150ms, render: 19ms)
ğŸ” Middleware Debug: {
  url: '/citas/clubs/madrid',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas/clubs/madrid 200 in 222ms (compile: 34ms, proxy.ts: 147ms, render: 41ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:54:59.330Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:54:59.356Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:54:59.368Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:54:59.369Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:54:59.376Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 807ms (compile: 4ms, proxy.ts: 230ms, render: 573ms)
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations&startDate=2026-01-09 200 in 943ms (compile: 6ms, proxy.ts: 228ms, render: 709ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=365&startDate=2026-01-09 200 in 1349ms (compile: 6ms, proxy.ts: 232ms, render: 1111ms)
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=365&startDate=2026-01-09 200 in 1373ms (compile: 103ms, proxy.ts: 105ms, render: 1165ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=occupation&days=365&startDate=2026-01-09 200 in 1485ms (compile: 7ms, proxy.ts: 231ms, render: 1248ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'availability',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:00.929Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:00.939Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:00.942Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:00.951Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 365,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2027-01-09T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2027-01-09',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:00.954Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 1075ms (compile: 541ms, proxy.ts: 337ms, render: 197ms)
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 2.0s (compile: 1606ms, proxy.ts: 229ms, render: 200ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations&startDate=2026-01-09 200 in 990ms (compile: 424ms, proxy.ts: 345ms, render: 221ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=365&startDate=2026-01-09 200 in 714ms (compile: 338ms, proxy.ts: 102ms, render: 274ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=365&startDate=2026-01-09 200 in 739ms (compile: 337ms, proxy.ts: 103ms, render: 299ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=365&startDate=2026-01-09 200 in 764ms (compile: 224ms, proxy.ts: 105ms, render: 435ms)
[Acuity Appointments] Total appointments before filtering: 304
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Murcia',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 304 -> 145
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-12-01&endDate=2025-12-31 200 in 257ms (compile: 1826Âµs, proxy.ts: 84ms, render: 172ms)
[Acuity Appointments] Total appointments before filtering: 507
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Madrid + Solo quiero informarme',
  'The Bundclub CDMX (Polanco)'
]
[Acuity Appointments] Filtered appointments: 507 -> 218
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-01-09 200 in 259ms (compile: 2ms, proxy.ts: 83ms, render: 174ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Appointments] Total appointments before filtering: 5
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Sevilla',
  'The Bundclub Madrid',
  'The Bundclub MÃ¡laga'
]
[Acuity Appointments] Filtered appointments: 5 -> 3
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-02-01&endDate=2026-02-28 200 in 271ms (compile: 1514Âµs, proxy.ts: 87ms, render: 182ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Appointments] Total appointments before filtering: 1
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [ '- The Bundclub Zaragoza -' ]
[Acuity Appointments] Filtered appointments: 1 -> 0
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-04-01&endDate=2026-04-30 200 in 265ms (compile: 8ms, proxy.ts: 88ms, render: 170ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 269ms (compile: 2ms, proxy.ts: 92ms, render: 174ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 507
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Madrid + Solo quiero informarme',
  'The Bundclub CDMX (Polanco)'
]
[Acuity Appointments] Filtered appointments: 507 -> 218
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-01-09 200 in 276ms (compile: 10ms, proxy.ts: 84ms, render: 182ms)
[Acuity Appointments] Total appointments before filtering: 5
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Sevilla',
  'The Bundclub Madrid',
  'The Bundclub MÃ¡laga'
]
[Acuity Appointments] Filtered appointments: 5 -> 3
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-02-01&endDate=2026-02-28 200 in 247ms (compile: 1916Âµs, proxy.ts: 78ms, render: 167ms)
[Acuity Appointments] Total appointments before filtering: 304
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  '- The Bundclub Madrid -',
  'The Bundclub Sevilla',
  'The Bundclub Murcia',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 304 -> 145
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2025-12-01&endDate=2025-12-31 200 in 283ms (compile: 5ms, proxy.ts: 96ms, render: 181ms)
[Acuity Appointments] Total appointments before filtering: 1
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [ '- The Bundclub Zaragoza -' ]
[Acuity Appointments] Filtered appointments: 1 -> 0
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-04-01&endDate=2026-04-30 200 in 282ms (compile: 9ms, proxy.ts: 110ms, render: 163ms)
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 268ms (compile: 4ms, proxy.ts: 91ms, render: 173ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 699
[Acuity Appointments] Filtering by store: "The Bundclub Madrid" (normalized: "The Bundclub Madrid")
[Acuity Appointments] Unique store names in data: [
  'The Bundclub Madrid',
  'The Bundclub Madrid + AÃ±adir 1 persona mÃ¡s',
  'The Bundclub Sevilla',
  'The Bundclub Sevilla + Solo quiero informarme',
  'The Bundclub Barcelona'
]
[Acuity Appointments] Filtered appointments: 699 -> 262
 GET /api/acuity/appointments?store=The%20Bundclub%20Madrid&startDate=2026-01-01&endDate=2026-01-31 200 in 290ms (compile: 1710Âµs, proxy.ts: 95ms, render: 194ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 202ms (compile: 47ms, proxy.ts: 135ms, render: 20ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.337Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.352Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.365Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.374Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.375Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.380Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 280ms (compile: 12ms, proxy.ts: 92ms, render: 176ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 288ms (compile: 1556Âµs, proxy.ts: 132ms, render: 155ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 324ms (compile: 2ms, proxy.ts: 151ms, render: 171ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 386ms (compile: 3ms, proxy.ts: 138ms, render: 245ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T17:55:28.580Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T17:55:28.581Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 450ms (compile: 1243Âµs, proxy.ts: 150ms, render: 299ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.626Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
 GET /api/acuity/stats?type=occupation&days=21 200 in 494ms (compile: 1088Âµs, proxy.ts: 140ms, render: 354ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.688Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 260ms (compile: 1581Âµs, proxy.ts: 74ms, render: 184ms)
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 231ms (compile: 1460Âµs, proxy.ts: 80ms, render: 150ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 326ms (compile: 1368Âµs, proxy.ts: 76ms, render: 248ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=monthly&months=12 200 in 246ms (compile: 1168Âµs, proxy.ts: 79ms, render: 166ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.832Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.844Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.863Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-08T23:00:00.000Z',
  endDateStr: '2026-01-30T22:59:59.999Z',
  futureEndDateStr: '2027-01-09T22:59:59.999Z',
  startDateStrOnly: '2026-01-09',
  endDateStrOnly: '2026-01-30',
  futureEndDateStrOnly: '2027-01-09',
  category: null,
  calendar: null,
  todayISO: '2026-01-09T17:55:28.904Z',
  todayStartISO: '2026-01-08T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-09T17:55:29.163Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-09T17:55:29.264Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 83 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 778ms (compile: 1907Âµs, proxy.ts: 119ms, render: 658ms)
[Acuity Stats] Found 137 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611668691,
  datetime: '2026-01-14T19:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 629ms (compile: 38ms, proxy.ts: 104ms, render: 487ms)
[Stats Availability] Found 734 total employee availability records
[Stats Availability] Found 718 valid employee availability records (with calendar_id)
[Stats Availability] Found 87 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 30
[Stats Availability] Calendar Name to Store map size: 30
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 697ms (compile: 4ms, proxy.ts: 78ms, render: 615ms)
[Acuity Stats] Found 459 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1611793718,
  datetime: '2026-01-14T13:00:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Andrea HernÃ¡ndez'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 762ms (compile: 2ms, proxy.ts: 75ms, render: 684ms)
[Acuity Stats] Found 479 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612279748,
  datetime: '2026-01-15T19:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'AdriÃ¡n SÃ¡nchez'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 634ms (compile: 153ms, proxy.ts: 92ms, render: 389ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 806ms (compile: 1988Âµs, proxy.ts: 81ms, render: 723ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[By Store API] Fetching data for years: 2025, grouping: monthly
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 1791ms (compile: 1191ms, proxy.ts: 252ms, render: 347ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 1905ms (compile: 1178ms, proxy.ts: 264ms, render: 463ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 1969ms (compile: 1182ms, proxy.ts: 260ms, render: 527ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Fetching data for years: 2025, grouping: monthly
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 2.0s (compile: 1153ms, proxy.ts: 291ms, render: 599ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 321ms (compile: 1657Âµs, proxy.ts: 96ms, render: 223ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 290ms (compile: 1139Âµs, proxy.ts: 89ms, render: 200ms)
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 358ms (compile: 3ms, proxy.ts: 101ms, render: 254ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 630ms (compile: 2ms, proxy.ts: 79ms, render: 549ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 399ms (compile: 118ms, proxy.ts: 218ms, render: 63ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 423ms (compile: 193ms, proxy.ts: 205ms, render: 25ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/monthly-breakdown',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Monthly Breakdown API] Fetching data for years: 2025
[Monthly Breakdown API] Success - Retrieved monthly data for 1 years
 GET /api/citas/historical/monthly-breakdown?years=2025 200 in 3.2s (compile: 2.8s, proxy.ts: 143ms, render: 284ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/monthly-breakdown',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/monthly-breakdown',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/monthly-breakdown',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/monthly-breakdown',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Monthly Breakdown API] Fetching data for years: 2024
[Monthly Breakdown API] Fetching data for years: 2023
[Monthly Breakdown API] Fetching data for years: 2021
[Monthly Breakdown API] Fetching data for years: 2022
[Monthly Breakdown API] Success - Retrieved monthly data for 1 years
 GET /api/citas/historical/monthly-breakdown?years=2021 200 in 382ms (compile: 19ms, proxy.ts: 155ms, render: 208ms)
[Monthly Breakdown API] Success - Retrieved monthly data for 1 years
 GET /api/citas/historical/monthly-breakdown?years=2022 200 in 397ms (compile: 9ms, proxy.ts: 171ms, render: 217ms)
[Monthly Breakdown API] Success - Retrieved monthly data for 1 years
 GET /api/citas/historical/monthly-breakdown?years=2024 200 in 398ms (compile: 5ms, proxy.ts: 152ms, render: 241ms)
[Monthly Breakdown API] Success - Retrieved monthly data for 1 years
 GET /api/citas/historical/monthly-breakdown?years=2023 200 in 406ms (compile: 8ms, proxy.ts: 172ms, render: 226ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 263ms (compile: 73ms, proxy.ts: 149ms, render: 41ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 222ms (compile: 45ms, proxy.ts: 132ms, render: 44ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 500ms (compile: 298ms, proxy.ts: 163ms, render: 40ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 1006ms (compile: 621ms, proxy.ts: 356ms, render: 30ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 218ms (compile: 10ms, proxy.ts: 180ms, render: 28ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 166ms (compile: 5ms, proxy.ts: 134ms, render: 28ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 197ms (compile: 7ms, proxy.ts: 160ms, render: 31ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 459ms (compile: 3ms, proxy.ts: 442ms, render: 15ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 171ms (compile: 3ms, proxy.ts: 155ms, render: 13ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 164ms (compile: 3ms, proxy.ts: 144ms, render: 17ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 704ms (compile: 209ms, proxy.ts: 417ms, render: 78ms)
