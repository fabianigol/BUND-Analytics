â–² Next.js 16.1.1 (webpack)
- Local:         http://localhost:3000
- Network:       http://192.168.1.37:3000
- Environments: .env.local

âœ“ Starting...
âš  The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy
âœ“ Ready in 1913ms
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling / ...
 GET / 200 in 4.5s (compile: 3.9s, proxy.ts: 272ms, render: 363ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
 GET /integraciones 200 in 1020ms (compile: 889ms, proxy.ts: 104ms, render: 28ms)
 GET /api/dashboard 200 in 3.0s (compile: 1335ms, proxy.ts: 303ms, render: 1400ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
 GET /api/integrations/shopify?country=MX&t=1768376587298&_=0.8573985591139961 200 in 1055ms (compile: 801ms, proxy.ts: 102ms, render: 152ms)
 GET /api/integrations/acuity?t=1768376587298&_=0.7632412522486687 200 in 1063ms (compile: 802ms, proxy.ts: 102ms, render: 159ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/integrations/shopify?country=ES&t=1768376587298&_=0.443755858410955 200 in 1071ms (compile: 800ms, proxy.ts: 103ms, render: 168ms)
 GET /api/integrations/meta?t=1768376587298&_=0.17411950960912548 200 in 1073ms (compile: 799ms, proxy.ts: 105ms, render: 170ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/integrations/analytics?t=1768376587298&_=0.2631562227425306 200 in 1107ms (compile: 800ms, proxy.ts: 104ms, render: 204ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/dashboard 200 in 1185ms (compile: 51ms, proxy.ts: 80ms, render: 1055ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/meta?t=1768376587300&_=0.09753140158141393 200 in 228ms (compile: 10ms, proxy.ts: 80ms, render: 138ms)
 GET /api/integrations/acuity?t=1768376587300&_=0.9949240366805832 200 in 241ms (compile: 5ms, proxy.ts: 85ms, render: 152ms)
 GET /api/integrations/shopify?country=ES&t=1768376587300&_=0.8517884580641998 200 in 265ms (compile: 5ms, proxy.ts: 114ms, render: 146ms)
 GET /api/integrations/shopify?country=MX&t=1768376587300&_=0.7720874404077319 200 in 235ms (compile: 9ms, proxy.ts: 84ms, render: 141ms)
 GET /api/integrations/analytics?t=1768376587300&_=0.365275695009567 200 in 275ms (compile: 25ms, proxy.ts: 87ms, render: 164ms)
ğŸ” Middleware Debug: {
  url: '/api/sync/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Shopify Sync] Starting sync for country: ES
[Shopify Sync ES] Loaded settings:
[Shopify Sync ES] - Shop domain: "bund-mexico.myshopify.com"
[Shopify Sync ES] - Access token exists: true
[Shopify Sync ES] - Access token length: 38
[Shopify Sync ES] - Access token prefix: shpss_45bf...
[Shopify Sync ES] Creating Shopify service with domain: bund-mexico.myshopify.com
[ShopifyService] Created with:
[ShopifyService] - Domain: "bund-mexico.myshopify.com"
[ShopifyService] - Token length: 38
[ShopifyService] - Token prefix: shpss_45bf...
[ShopifyService] - API version: 2024-01
[Shopify Sync ES] Error creating sync log: {
  code: '23514',
  details: null,
  hint: null,
  message: 'new row for relation "sync_logs" violates check constraint "sync_logs_integration_check"'
}
[Shopify Sync ES] Starting sync process...
[Shopify Sync ES] ==========================================
[Shopify Sync ES] Country: ES
[Shopify Sync ES] Today: 2026-01-14T07:43:10.717Z
[Shopify Sync ES] Year: 2026, Month: 1
[Shopify Sync ES] First day ISO: 2026-01-01T00:00:00.000Z
[Shopify Sync ES] Today ISO: 2026-01-14T23:59:59.999Z
[Shopify Sync ES] Sync start date: 2026-01-01T00:00:00.000Z
[Shopify Sync ES] Sync end date: 2026-01-14T23:59:59.999Z
[Shopify Sync ES] Connection date: 2025-12-14T16:51:26.285Z
[Shopify Sync ES] ==========================================
[Shopify Sync ES] Fetching orders from Shopify API...
[Shopify] Fetching page 1 (first page)
[ShopifyService] API Error:
[ShopifyService] - Status: 401
[ShopifyService] - URL: https://bund-mexico.myshopify.com/admin/api/2024-01/orders.json?status=any&created_at_min=2026-01-01T00%3A00%3A00.000Z&created_at_max=2026-01-14T23%3A59%3A59.999Z&limit=250
[ShopifyService] - Response: {"errors":"[API] Invalid API key or access token (unrecognized login or wrong password)"}
Request failed, retrying in 1000ms (attempt 1/3)
[ShopifyService] API Error:
[ShopifyService] - Status: 401
[ShopifyService] - URL: https://bund-mexico.myshopify.com/admin/api/2024-01/orders.json?status=any&created_at_min=2026-01-01T00%3A00%3A00.000Z&created_at_max=2026-01-14T23%3A59%3A59.999Z&limit=250
[ShopifyService] - Response: {"errors":"[API] Invalid API key or access token (unrecognized login or wrong password)"}
Request failed, retrying in 2000ms (attempt 2/3)
[ShopifyService] API Error:
[ShopifyService] - Status: 401
[ShopifyService] - URL: https://bund-mexico.myshopify.com/admin/api/2024-01/orders.json?status=any&created_at_min=2026-01-01T00%3A00%3A00.000Z&created_at_max=2026-01-14T23%3A59%3A59.999Z&limit=250
[ShopifyService] - Response: {"errors":"[API] Invalid API key or access token (unrecognized login or wrong password)"}
[Shopify] Error fetching page 1: Error: [API] Invalid API key or access token (unrecognized login or wrong password)
    at ShopifyService.request (src/lib/integrations/shopify.ts:99:17)
    at async ShopifyService.getAllOrders (src/lib/integrations/shopify.ts:248:24)
    at async syncShopifyData (src/app/api/sync/shopify/route.ts:195:19)
    at async POST (src/app/api/sync/shopify/route.ts:116:12)
   97 |             errorMessage = errorText || errorMessage
   98 |           }
>  99 |           throw new Error(errorMessage)
      |                 ^
  100 |         }
  101 |
  102 |         const data = await response.json()
[Shopify Sync ES] Error fetching orders from Shopify API: Error: Error fetching Shopify orders: [API] Invalid API key or access token (unrecognized login or wrong password)
    at ShopifyService.getAllOrders (src/lib/integrations/shopify.ts:323:15)
    at async syncShopifyData (src/app/api/sync/shopify/route.ts:195:19)
    at async POST (src/app/api/sync/shopify/route.ts:116:12)
  321 |         }
  322 |         // Si es la primera pÃ¡gina o no hay pedidos, lanzar el error
> 323 |         throw new Error(`Error fetching Shopify orders: ${error?.message || String(error)}`)
      |               ^
  324 |       }
  325 |     } while (pageInfo)
  326 |
[Shopify Sync ES] Error during sync: Error: Failed to fetch orders from Shopify: Error fetching Shopify orders: [API] Invalid API key or access token (unrecognized login or wrong password)
    at syncShopifyData (src/app/api/sync/shopify/route.ts:203:13)
    at async POST (src/app/api/sync/shopify/route.ts:116:12)
  201 |     } catch (fetchError: any) {
  202 |       console.error(`[Shopify Sync ${country}] Error fetching orders from Shopify API:`, fetchError)
> 203 |       throw new Error(`Failed to fetch orders from Shopify: ${fetchError.message || String(fetchError)}`)
      |             ^
  204 |     }
  205 |
  206 |     // Transformar y guardar pedidos en BD
Shopify sync error: Error: Failed to fetch orders from Shopify: Error fetching Shopify orders: [API] Invalid API key or access token (unrecognized login or wrong password)
    at syncShopifyData (src/app/api/sync/shopify/route.ts:203:13)
    at async POST (src/app/api/sync/shopify/route.ts:116:12)
  201 |     } catch (fetchError: any) {
  202 |       console.error(`[Shopify Sync ${country}] Error fetching orders from Shopify API:`, fetchError)
> 203 |       throw new Error(`Failed to fetch orders from Shopify: ${fetchError.message || String(fetchError)}`)
      |             ^
  204 |     }
  205 |
  206 |     // Transformar y guardar pedidos en BD
 POST /api/sync/shopify?country=ES 500 in 4.4s (compile: 534ms, proxy.ts: 92ms, render: 3.8s)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 608ms (compile: 151ms, proxy.ts: 424ms, render: 33ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /citas ...
 GET /citas 200 in 3.4s (compile: 3.3s, proxy.ts: 88ms, render: 34ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.006Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.016Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.019Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.021Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.023Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.024Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 2.9s (compile: 1859ms, proxy.ts: 457ms, render: 603ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 134 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 2.9s (compile: 1867ms, proxy.ts: 449ms, render: 627ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 3.0s (compile: 1855ms, proxy.ts: 462ms, render: 664ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Stats Availability] Found 702 total employee availability records
[Stats Availability] Found 696 valid employee availability records (with calendar_id)
[Stats Availability] Found 90 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 31
[Stats Availability] Calendar Name to Store map size: 31
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 3.0s (compile: 1857ms, proxy.ts: 460ms, render: 695ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 499 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1610636740,
  datetime: '2026-01-20T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Ignacio FernÃ¡ndez de Cuevas'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 3.0s (compile: 1854ms, proxy.ts: 463ms, render: 721ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 3.1s (compile: 1858ms, proxy.ts: 459ms, render: 769ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-14T07:45:28.398Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-14T07:45:28.418Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.448Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.483Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.511Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Found 188 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612372274,
  datetime: '2026-01-15T14:15:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 264ms (compile: 1606Âµs, proxy.ts: 81ms, render: 182ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 239ms (compile: 1794Âµs, proxy.ts: 78ms, render: 159ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 684 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1608031931,
  datetime: '2026-01-17T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Andrea QuiÃ±ones'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 314ms (compile: 3ms, proxy.ts: 87ms, render: 224ms)
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.552Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 242ms (compile: 1483Âµs, proxy.ts: 76ms, render: 164ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 134 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 292ms (compile: 2ms, proxy.ts: 82ms, render: 207ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.679Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T07:45:28.689Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-14T07:45:28.731Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Stats Availability] Found 702 total employee availability records
[Stats Availability] Found 696 valid employee availability records (with calendar_id)
[Stats Availability] Found 90 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 31
[Stats Availability] Calendar Name to Store map size: 31
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 348ms (compile: 1568Âµs, proxy.ts: 75ms, render: 271ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-14T07:45:28.758Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 499 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1610636740,
  datetime: '2026-01-20T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Ignacio FernÃ¡ndez de Cuevas'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 330ms (compile: 1801Âµs, proxy.ts: 84ms, render: 244ms)
[Acuity Stats] Found 188 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612372274,
  datetime: '2026-01-15T14:15:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 314ms (compile: 11ms, proxy.ts: 82ms, render: 221ms)
[Acuity Stats] Found 684 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1608031931,
  datetime: '2026-01-17T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Andrea QuiÃ±ones'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 312ms (compile: 4ms, proxy.ts: 83ms, render: 225ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 387ms (compile: 1482Âµs, proxy.ts: 75ms, render: 311ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 399ms (compile: 101ms, proxy.ts: 230ms, render: 69ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 198ms (compile: 65ms, proxy.ts: 114ms, render: 19ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 1005ms (compile: 422ms, proxy.ts: 504ms, render: 79ms)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 176ms (compile: 27ms, proxy.ts: 112ms, render: 38ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/acuity?t=1768376802913&_=0.5302126067641387 200 in 1450ms (compile: 1090ms, proxy.ts: 153ms, render: 207ms)
 GET /api/integrations/shopify?country=ES&t=1768376802913&_=0.5655867046893333 200 in 1462ms (compile: 1106ms, proxy.ts: 137ms, render: 218ms)
 GET /api/integrations/meta?t=1768376802913&_=0.007567539008440649 200 in 1466ms (compile: 1143ms, proxy.ts: 101ms, render: 223ms)
 GET /api/integrations/shopify?country=MX&t=1768376802913&_=0.9910716911556208 200 in 1468ms (compile: 1107ms, proxy.ts: 136ms, render: 225ms)
 GET /api/integrations/meta?t=1768376802914&_=0.47571302424506134 200 in 1471ms (compile: 982ms, proxy.ts: 261ms, render: 228ms)
 GET /api/integrations/analytics?t=1768376802913&_=0.19016491849959172 200 in 1475ms (compile: 1079ms, proxy.ts: 164ms, render: 232ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 274ms (compile: 100ms, proxy.ts: 125ms, render: 49ms)
 GET /api/integrations/acuity?t=1768376802914&_=0.5426582441128665 200 in 356ms (compile: 15ms, proxy.ts: 132ms, render: 209ms)
 GET /api/integrations/shopify?country=ES&t=1768376802914&_=0.6445494393816619 200 in 370ms (compile: 16ms, proxy.ts: 126ms, render: 228ms)
 GET /api/integrations/shopify?country=MX&t=1768376802914&_=0.9491445855558415 200 in 372ms (compile: 17ms, proxy.ts: 126ms, render: 229ms)
 GET /api/integrations/analytics?t=1768376802914&_=0.7287119920112533 200 in 396ms (compile: 5ms, proxy.ts: 107ms, render: 283ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=ES&t=1768376804741&_=0.28138542139383893 200 in 253ms (compile: 3ms, proxy.ts: 102ms, render: 147ms)
 GET /api/integrations/acuity?t=1768376804741&_=0.8798916782742934 200 in 277ms (compile: 4ms, proxy.ts: 111ms, render: 162ms)
 GET /api/integrations/analytics?t=1768376804741&_=0.33768502465877537 200 in 279ms (compile: 16ms, proxy.ts: 112ms, render: 151ms)
 GET /api/integrations/shopify?country=MX&t=1768376804741&_=0.40693435137795897 200 in 281ms (compile: 3ms, proxy.ts: 111ms, render: 167ms)
 GET /api/integrations/meta?t=1768376804741&_=0.9068715273506468 200 in 298ms (compile: 7ms, proxy.ts: 132ms, render: 159ms)
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET / 200 in 1187ms (compile: 659ms, proxy.ts: 232ms, render: 295ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 2.3s (compile: 2.2s, proxy.ts: 78ms, render: 41ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/meta?t=1768376859703&_=0.2065377881963547 200 in 330ms (compile: 13ms, proxy.ts: 118ms, render: 199ms)
 GET /api/integrations/shopify?country=MX&t=1768376859703&_=0.8412920152090845 200 in 338ms (compile: 26ms, proxy.ts: 153ms, render: 159ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
 GET /api/integrations/analytics?t=1768376859703&_=0.3744315344448812 200 in 375ms (compile: 29ms, proxy.ts: 172ms, render: 175ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/integrations/shopify?country=ES&t=1768376859703&_=0.008696007249052728 200 in 408ms (compile: 31ms, proxy.ts: 184ms, render: 193ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/acuity?t=1768376859703&_=0.22164420211730806 200 in 503ms (compile: 30ms, proxy.ts: 183ms, render: 289ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/integrations/analytics?t=1768376859705&_=0.9963551206871495 200 in 243ms (compile: 3ms, proxy.ts: 87ms, render: 153ms)
 GET /api/integrations/meta?t=1768376859705&_=0.6290457790860379 200 in 249ms (compile: 1863Âµs, proxy.ts: 87ms, render: 160ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/acuity?t=1768376859705&_=0.20713680010294488 200 in 224ms (compile: 899Âµs, proxy.ts: 72ms, render: 151ms)
 GET /api/integrations/shopify?country=ES&t=1768376859705&_=0.8605015382026616 200 in 258ms (compile: 3ms, proxy.ts: 97ms, render: 159ms)
 GET /api/integrations/shopify?country=MX&t=1768376859705&_=0.628094707393039 200 in 251ms (compile: 12ms, proxy.ts: 85ms, render: 154ms)
 GET /api/dashboard 200 in 4.3s (compile: 3.0s, proxy.ts: 99ms, render: 1194ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
 GET /api/dashboard 200 in 1015ms (compile: 7ms, proxy.ts: 87ms, render: 921ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Shopify API] POST request for shopify_es
[Shopify API] Country received: "ES"
[Shopify API] Shop domain received: "bundcompany.myshopify.com"
[Shopify API] Has accessToken: true (length: 38)
[Shopify API] Has clientId: false
[Shopify API] Has clientSecret: false
 POST /api/integrations/shopify 200 in 356ms (compile: 4ms, proxy.ts: 150ms, render: 202ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/meta?t=1768376881824&_=0.8376458487124374 200 in 279ms (compile: 4ms, proxy.ts: 116ms, render: 159ms)
 GET /api/integrations/shopify?country=ES&t=1768376881824&_=0.11862643723609323 200 in 318ms (compile: 3ms, proxy.ts: 161ms, render: 153ms)
 GET /api/integrations/analytics?t=1768376881824&_=0.9634569287300367 200 in 323ms (compile: 13ms, proxy.ts: 161ms, render: 149ms)
 GET /api/integrations/shopify?country=MX&t=1768376881824&_=0.022891564916885487 200 in 347ms (compile: 2ms, proxy.ts: 162ms, render: 182ms)
 GET /api/integrations/acuity?t=1768376881824&_=0.2766774176246596 200 in 437ms (compile: 15ms, proxy.ts: 162ms, render: 260ms)
ğŸ” Middleware Debug: {
  url: '/api/sync/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Shopify Sync] Starting sync for country: ES
[Shopify Sync ES] Loaded settings:
[Shopify Sync ES] - Shop domain: "bundcompany.myshopify.com"
[Shopify Sync ES] - Access token exists: true
[Shopify Sync ES] - Access token length: 38
[Shopify Sync ES] - Access token prefix: shpat_f9c0...
[Shopify Sync ES] Creating Shopify service with domain: bundcompany.myshopify.com
[ShopifyService] Created with:
[ShopifyService] - Domain: "bundcompany.myshopify.com"
[ShopifyService] - Token length: 38
[ShopifyService] - Token prefix: shpat_f9c0...
[ShopifyService] - API version: 2024-01
[Shopify Sync ES] Error creating sync log: {
  code: '23514',
  details: null,
  hint: null,
  message: 'new row for relation "sync_logs" violates check constraint "sync_logs_integration_check"'
}
[Shopify Sync ES] Starting sync process...
[Shopify Sync ES] ==========================================
[Shopify Sync ES] Country: ES
[Shopify Sync ES] Today: 2026-01-14T07:48:05.602Z
[Shopify Sync ES] Year: 2026, Month: 1
[Shopify Sync ES] First day ISO: 2026-01-01T00:00:00.000Z
[Shopify Sync ES] Today ISO: 2026-01-14T23:59:59.999Z
[Shopify Sync ES] Sync start date: 2026-01-01T00:00:00.000Z
[Shopify Sync ES] Sync end date: 2026-01-14T23:59:59.999Z
[Shopify Sync ES] Connection date: 2025-12-14T16:51:26.285Z
[Shopify Sync ES] ==========================================
[Shopify Sync ES] Fetching orders from Shopify API...
[Shopify] Fetching page 1 (first page)
[Shopify] Fetched page 1: 230 orders (total so far: 230)
[Shopify] No more pages (orders: 230, limit: 250)
[Shopify] Total orders fetched: 230 across 1 pages
[Shopify Sync ES] Found 230 orders
[Shopify Sync ES] Processed 230 orders
 POST /api/sync/shopify?country=ES 200 in 31.7s (compile: 591ms, proxy.ts: 109ms, render: 31.0s)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/analytics?t=1768376916322&_=0.10968359048588705 200 in 268ms (compile: 12ms, proxy.ts: 101ms, render: 154ms)
 GET /api/integrations/meta?t=1768376916322&_=0.7375168387363786 200 in 286ms (compile: 21ms, proxy.ts: 105ms, render: 161ms)
 GET /api/integrations/acuity?t=1768376916322&_=0.31998395230762033 200 in 300ms (compile: 4ms, proxy.ts: 132ms, render: 163ms)
 GET /api/integrations/shopify?country=ES&t=1768376916322&_=0.7361444167574804 200 in 310ms (compile: 9ms, proxy.ts: 144ms, render: 157ms)
 GET /api/integrations/shopify?country=MX&t=1768376916322&_=0.5279783507292152 200 in 326ms (compile: 10ms, proxy.ts: 143ms, render: 173ms)
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET / 200 in 268ms (compile: 74ms, proxy.ts: 160ms, render: 34ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
 GET /api/dashboard 200 in 1276ms (compile: 24ms, proxy.ts: 98ms, render: 1154ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
 GET /api/dashboard 200 in 1029ms (compile: 4ms, proxy.ts: 91ms, render: 934ms)
ğŸ” Middleware Debug: { url: '/ventas/espana', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas/espana 200 in 1182ms (compile: 1017ms, proxy.ts: 137ms, render: 29ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/ventas/espana', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas/espana 200 in 130ms (compile: 19ms, proxy.ts: 92ms, render: 18ms)
 GET /ventas?country=ES 200 in 1833ms (compile: 1691ms, proxy.ts: 111ms, render: 31ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=ES 200 in 121ms (compile: 3ms, proxy.ts: 108ms, render: 10ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=ES 200 in 119ms (compile: 2ms, proxy.ts: 93ms, render: 23ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=ES 200 in 108ms (compile: 4ms, proxy.ts: 82ms, render: 21ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=ES 200 in 345ms (compile: 55ms, proxy.ts: 102ms, render: 189ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 1149ms (compile: 746ms, proxy.ts: 176ms, render: 227ms)
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 1169ms (compile: 746ms, proxy.ts: 177ms, render: 247ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 872ms (compile: 148ms, proxy.ts: 318ms, render: 405ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 1344ms (compile: 745ms, proxy.ts: 178ms, render: 422ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1393ms (compile: 744ms, proxy.ts: 178ms, render: 471ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 350ms (compile: 1333Âµs, proxy.ts: 77ms, render: 271ms)
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 339ms (compile: 2ms, proxy.ts: 133ms, render: 204ms)
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 517ms (compile: 5ms, proxy.ts: 92ms, render: 420ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 344ms (compile: 6ms, proxy.ts: 167ms, render: 172ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 263ms (compile: 1704Âµs, proxy.ts: 92ms, render: 170ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 276ms (compile: 1344Âµs, proxy.ts: 104ms, render: 171ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 345ms (compile: 1699Âµs, proxy.ts: 89ms, render: 254ms)
 GET /api/integrations/shopify?country=ES 200 in 298ms (compile: 5ms, proxy.ts: 81ms, render: 212ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=50&offset=0&country=ES 200 in 304ms (compile: 1254Âµs, proxy.ts: 96ms, render: 207ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=10&offset=0&periodBasedLTV=true&country=ES 200 in 253ms (compile: 1728Âµs, proxy.ts: 85ms, render: 166ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 2.4s (compile: 823ms, proxy.ts: 100ms, render: 1470ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&limit=10&offset=0&country=ES 200 in 382ms (compile: 2ms, proxy.ts: 93ms, render: 287ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=customer-metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 511ms (compile: 1512Âµs, proxy.ts: 79ms, render: 430ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 383ms (compile: 44ms, proxy.ts: 105ms, render: 234ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 1570ms (compile: 8ms, proxy.ts: 121ms, render: 1441ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 314ms (compile: 23ms, proxy.ts: 103ms, render: 188ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=locations&startDate=2026-01-01&endDate=2026-01-14&country=ALL 200 in 540ms (compile: 10ms, proxy.ts: 88ms, render: 443ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 496ms (compile: 75ms, proxy.ts: 122ms, render: 299ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 506ms (compile: 5ms, proxy.ts: 153ms, render: 348ms)
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 241ms (compile: 1307Âµs, proxy.ts: 79ms, render: 161ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 372ms (compile: 1557Âµs, proxy.ts: 89ms, render: 281ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 342ms (compile: 3ms, proxy.ts: 90ms, render: 249ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 364ms (compile: 1902Âµs, proxy.ts: 79ms, render: 282ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 281ms (compile: 13ms, proxy.ts: 89ms, render: 179ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 256ms (compile: 1124Âµs, proxy.ts: 75ms, render: 180ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 276ms (compile: 1363Âµs, proxy.ts: 89ms, render: 185ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 302ms (compile: 4ms, proxy.ts: 86ms, render: 213ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 237ms (compile: 1661Âµs, proxy.ts: 81ms, render: 155ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 290ms (compile: 4ms, proxy.ts: 85ms, render: 201ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 325ms (compile: 1510Âµs, proxy.ts: 85ms, render: 239ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 274ms (compile: 2ms, proxy.ts: 107ms, render: 165ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 359ms (compile: 1694Âµs, proxy.ts: 78ms, render: 280ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 338ms (compile: 2ms, proxy.ts: 77ms, render: 259ms)
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 528ms (compile: 3ms, proxy.ts: 139ms, render: 386ms)
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 365ms (compile: 1568Âµs, proxy.ts: 80ms, render: 283ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 567ms (compile: 1573Âµs, proxy.ts: 84ms, render: 482ms)
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 334ms (compile: 15ms, proxy.ts: 140ms, render: 178ms)
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 317ms (compile: 3ms, proxy.ts: 158ms, render: 156ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 1221ms (compile: 1881Âµs, proxy.ts: 77ms, render: 1142ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 395ms (compile: 4ms, proxy.ts: 157ms, render: 234ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1426ms (compile: 2ms, proxy.ts: 80ms, render: 1343ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 1146ms (compile: 1459Âµs, proxy.ts: 81ms, render: 1063ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1158ms (compile: 1206Âµs, proxy.ts: 78ms, render: 1079ms)
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/yearly-trend',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/progress',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Yearly Trend API] Calculando tendencias anuales para 2026
[Sales Targets Progress] Calculando progreso para 2026-1
[Sales Targets Progress] Rango de fechas: 2026-01-01 - 2026-01-31
[Sales Targets Progress] Calculado progreso para 10 ubicaciones
 GET /api/sales-targets/progress?year=2026&month=1 200 in 3.0s (compile: 1449ms, proxy.ts: 192ms, render: 1329ms)
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/progress',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Sales Targets Progress] Calculando progreso para 2026-1
[Sales Targets Progress] Rango de fechas: 2026-01-01 - 2026-01-31
[Sales Targets Progress] Calculado progreso para 10 ubicaciones
 GET /api/sales-targets/progress?year=2026&month=1 200 in 1304ms (compile: 14ms, proxy.ts: 282ms, render: 1008ms)
[Yearly Trend API] Tendencias calculadas para 10 tiendas
 GET /api/sales-targets/yearly-trend?year=2026 200 in 4.4s (compile: 1415ms, proxy.ts: 232ms, render: 2.8s)
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/yearly-trend',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Yearly Trend API] Calculando tendencias anuales para 2026
[Yearly Trend API] Tendencias calculadas para 10 tiendas
 GET /api/sales-targets/yearly-trend?year=2026 200 in 1432ms (compile: 28ms, proxy.ts: 186ms, render: 1218ms)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 286ms (compile: 80ms, proxy.ts: 156ms, render: 50ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/meta?t=1768376991006&_=0.5681475001190671 200 in 283ms (compile: 4ms, proxy.ts: 94ms, render: 185ms)
 GET /api/integrations/analytics?t=1768376991006&_=0.4932041652957675 200 in 284ms (compile: 4ms, proxy.ts: 129ms, render: 151ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/integrations/shopify?country=MX&t=1768376991006&_=0.44952838515130344 200 in 287ms (compile: 5ms, proxy.ts: 131ms, render: 152ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/integrations/shopify?country=ES&t=1768376991006&_=0.3174595112111652 200 in 303ms (compile: 5ms, proxy.ts: 137ms, render: 161ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/integrations/acuity?t=1768376991006&_=0.2900064760125878 200 in 338ms (compile: 6ms, proxy.ts: 180ms, render: 152ms)
 GET /api/integrations/meta?t=1768376991007&_=0.007917538444867644 200 in 351ms (compile: 948Âµs, proxy.ts: 186ms, render: 164ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/analytics?t=1768376991007&_=0.6456857716425026 200 in 238ms (compile: 7ms, proxy.ts: 75ms, render: 156ms)
 GET /api/integrations/acuity?t=1768376991007&_=0.6013061099841515 200 in 273ms (compile: 46ms, proxy.ts: 80ms, render: 146ms)
 GET /api/integrations/shopify?country=MX&t=1768376991007&_=0.7276340742179129 200 in 293ms (compile: 9ms, proxy.ts: 108ms, render: 177ms)
 GET /api/integrations/shopify?country=ES&t=1768376991007&_=0.15510703393668435 200 in 310ms (compile: 12ms, proxy.ts: 114ms, render: 184ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Shopify API] POST request for shopify_mx
[Shopify API] Country received: "MX"
[Shopify API] Shop domain received: "bund-mexico.myshopify.com"
[Shopify API] Has accessToken: false (length: 0)
[Shopify API] Has clientId: true
[Shopify API] Has clientSecret: true
[Shopify API] Using OAuth Client Credentials for Mexico
[Shopify OAuth] Requesting access token for bund-mexico.myshopify.com...
[Shopify OAuth] Access token obtained successfully. Expires in 86399s (24.0h)
[Shopify OAuth] Token saved to Supabase. Expires at 2026-01-15T07:50:20.687Z
[Shopify API] OAuth token obtained and saved successfully
 POST /api/integrations/shopify 200 in 1250ms (compile: 13ms, proxy.ts: 160ms, render: 1078ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=MX&t=1768377022193&_=0.696761635074476 200 in 398ms (compile: 1986Âµs, proxy.ts: 155ms, render: 241ms)
 GET /api/integrations/analytics?t=1768377022193&_=0.07403060741993117 200 in 403ms (compile: 6ms, proxy.ts: 117ms, render: 280ms)
 GET /api/integrations/meta?t=1768377022193&_=0.08726519888375595 200 in 407ms (compile: 14ms, proxy.ts: 118ms, render: 275ms)
 GET /api/integrations/shopify?country=ES&t=1768377022193&_=0.38503332124155243 200 in 679ms (compile: 2ms, proxy.ts: 164ms, render: 513ms)
 GET /api/integrations/acuity?t=1768377022193&_=0.9108807954686561 200 in 807ms (compile: 2ms, proxy.ts: 179ms, render: 625ms)
ğŸ” Middleware Debug: {
  url: '/api/sync/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Shopify Sync] Starting sync for country: MX
[Shopify Sync MX] Loaded settings:
[Shopify Sync MX] - Shop domain: "bund-mexico.myshopify.com"
[Shopify Sync MX] - Access token exists: true
[Shopify Sync MX] - Access token length: 38
[Shopify Sync MX] - Access token prefix: shpat_8260...
[Shopify Sync MX] Using OAuth to get access token...
[Shopify OAuth] Token expired or expiring soon. Refreshing...
[Shopify OAuth] Requesting access token for bund-mexico.myshopify.com...
[Shopify OAuth] Access token obtained successfully. Expires in 86393s (24.0h)
[Shopify OAuth] Token saved to Supabase. Expires at 2026-01-15T07:50:21.134Z
[Shopify Sync MX] Successfully obtained OAuth token
[Shopify Sync MX] Creating Shopify service with domain: bund-mexico.myshopify.com
[ShopifyService] Created with:
[ShopifyService] - Domain: "bund-mexico.myshopify.com"
[ShopifyService] - Token length: 38
[ShopifyService] - Token prefix: shpat_8260...
[ShopifyService] - API version: 2024-01
[Shopify Sync MX] Error creating sync log: {
  code: '23514',
  details: null,
  hint: null,
  message: 'new row for relation "sync_logs" violates check constraint "sync_logs_integration_check"'
}
[Shopify Sync MX] Starting sync process...
[Shopify Sync MX] ==========================================
[Shopify Sync MX] Country: MX
[Shopify Sync MX] Today: 2026-01-14T07:50:28.357Z
[Shopify Sync MX] Year: 2026, Month: 1
[Shopify Sync MX] First day ISO: 2026-01-01T00:00:00.000Z
[Shopify Sync MX] Today ISO: 2026-01-14T23:59:59.999Z
[Shopify Sync MX] Sync start date: 2026-01-01T00:00:00.000Z
[Shopify Sync MX] Sync end date: 2026-01-14T23:59:59.999Z
[Shopify Sync MX] Connection date: 2026-01-11T10:40:44.609Z
[Shopify Sync MX] ==========================================
[Shopify Sync MX] Fetching orders from Shopify API...
[Shopify] Fetching page 1 (first page)
[Shopify] Fetched page 1: 16 orders (total so far: 16)
[Shopify] No more pages (orders: 16, limit: 250)
[Shopify] Total orders fetched: 16 across 1 pages
[Shopify Sync MX] Found 16 orders
[Shopify Sync MX] Processed 16 orders
 POST /api/sync/shopify?country=MX 200 in 5.8s (compile: 1135ms, proxy.ts: 189ms, render: 4.5s)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/analytics?t=1768377031866&_=0.13912934344078398 200 in 270ms (compile: 14ms, proxy.ts: 102ms, render: 154ms)
 GET /api/integrations/meta?t=1768377031866&_=0.07906612984281836 200 in 277ms (compile: 20ms, proxy.ts: 106ms, render: 150ms)
 GET /api/integrations/acuity?t=1768377031866&_=0.8208532210030808 200 in 322ms (compile: 17ms, proxy.ts: 148ms, render: 157ms)
 GET /api/integrations/shopify?country=MX&t=1768377031866&_=0.7409737994686258 200 in 332ms (compile: 10ms, proxy.ts: 147ms, render: 175ms)
 GET /api/integrations/shopify?country=ES&t=1768377031866&_=0.8218929934545857 200 in 334ms (compile: 6ms, proxy.ts: 151ms, render: 177ms)
ğŸ” Middleware Debug: { url: '/ventas/espana', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas/espana 200 in 1858ms (compile: 1307ms, proxy.ts: 511ms, render: 39ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=ES 200 in 177ms (compile: 48ms, proxy.ts: 111ms, render: 17ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=ES 200 in 100ms (compile: 4ms, proxy.ts: 85ms, render: 11ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=ES 200 in 1593ms (compile: 1110ms, proxy.ts: 109ms, render: 374ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 1638ms (compile: 1018ms, proxy.ts: 189ms, render: 431ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 1643ms (compile: 1021ms, proxy.ts: 167ms, render: 455ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 2.0s (compile: 1020ms, proxy.ts: 187ms, render: 828ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 2.1s (compile: 1021ms, proxy.ts: 186ms, render: 861ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 592ms (compile: 5ms, proxy.ts: 89ms, render: 497ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 563ms (compile: 4ms, proxy.ts: 90ms, render: 469ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 245ms (compile: 2ms, proxy.ts: 75ms, render: 168ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 487ms (compile: 3ms, proxy.ts: 77ms, render: 407ms)
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 642ms (compile: 1872Âµs, proxy.ts: 85ms, render: 555ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 842ms (compile: 1634Âµs, proxy.ts: 106ms, render: 734ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=ES 200 in 304ms (compile: 4ms, proxy.ts: 93ms, render: 207ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 441ms (compile: 6ms, proxy.ts: 94ms, render: 341ms)
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 1055ms (compile: 1448Âµs, proxy.ts: 75ms, render: 979ms)
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=50&offset=0&country=ES 200 in 420ms (compile: 30ms, proxy.ts: 127ms, render: 264ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=10&offset=0&periodBasedLTV=true&country=ES 200 in 295ms (compile: 1775Âµs, proxy.ts: 100ms, render: 193ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 3.6s (compile: 1019ms, proxy.ts: 188ms, render: 2.4s)
 GET /api/shopify?type=customers&limit=10&offset=0&country=ES 200 in 322ms (compile: 2ms, proxy.ts: 99ms, render: 221ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=customer-metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 474ms (compile: 1637Âµs, proxy.ts: 140ms, render: 333ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=locations&startDate=2026-01-01&endDate=2026-01-14&country=ALL 200 in 405ms (compile: 1217Âµs, proxy.ts: 90ms, render: 313ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 2.2s (compile: 6ms, proxy.ts: 249ms, render: 1905ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 256ms (compile: 1250Âµs, proxy.ts: 102ms, render: 153ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 279ms (compile: 1151Âµs, proxy.ts: 89ms, render: 188ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 337ms (compile: 3ms, proxy.ts: 109ms, render: 225ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 317ms (compile: 1578Âµs, proxy.ts: 81ms, render: 234ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 379ms (compile: 1120Âµs, proxy.ts: 89ms, render: 289ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 292ms (compile: 1708Âµs, proxy.ts: 91ms, render: 199ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 269ms (compile: 1545Âµs, proxy.ts: 90ms, render: 178ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 264ms (compile: 2ms, proxy.ts: 90ms, render: 172ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 429ms (compile: 1266Âµs, proxy.ts: 80ms, render: 349ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 240ms (compile: 6ms, proxy.ts: 78ms, render: 156ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 402ms (compile: 11ms, proxy.ts: 82ms, render: 308ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 276ms (compile: 1639Âµs, proxy.ts: 97ms, render: 177ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 393ms (compile: 3ms, proxy.ts: 93ms, render: 297ms)
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 242ms (compile: 1606Âµs, proxy.ts: 75ms, render: 165ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 328ms (compile: 12ms, proxy.ts: 95ms, render: 221ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 512ms (compile: 2ms, proxy.ts: 78ms, render: 431ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 468ms (compile: 1688Âµs, proxy.ts: 85ms, render: 381ms)
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 458ms (compile: 6ms, proxy.ts: 115ms, render: 336ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 255ms (compile: 1319Âµs, proxy.ts: 83ms, render: 171ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 246ms (compile: 1380Âµs, proxy.ts: 80ms, render: 165ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 297ms (compile: 3ms, proxy.ts: 82ms, render: 212ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 383ms (compile: 2ms, proxy.ts: 95ms, render: 286ms)
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 371ms (compile: 3ms, proxy.ts: 158ms, render: 210ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1434ms (compile: 1404Âµs, proxy.ts: 76ms, render: 1357ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 440ms (compile: 3ms, proxy.ts: 155ms, render: 282ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 1452ms (compile: 1604Âµs, proxy.ts: 72ms, render: 1378ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/yearly-trend',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/progress',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 2.2s (compile: 1121Âµs, proxy.ts: 77ms, render: 2.1s)
[Sales Targets Progress] Calculando progreso para 2026-1
[Yearly Trend API] Calculando tendencias anuales para 2026
[Sales Targets Progress] Rango de fechas: 2026-01-01 - 2026-01-31
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 2.5s (compile: 1298Âµs, proxy.ts: 79ms, render: 2.4s)
[Sales Targets Progress] Calculado progreso para 10 ubicaciones
 GET /api/sales-targets/progress?year=2026&month=1 200 in 2.4s (compile: 1639ms, proxy.ts: 130ms, render: 609ms)
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/progress',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Sales Targets Progress] Calculando progreso para 2026-1
[Sales Targets Progress] Rango de fechas: 2026-01-01 - 2026-01-31
[Yearly Trend API] Tendencias calculadas para 10 tiendas
 GET /api/sales-targets/yearly-trend?year=2026 200 in 3.0s (compile: 1641ms, proxy.ts: 128ms, render: 1222ms)
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/yearly-trend',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Sales Targets Progress] Calculado progreso para 10 ubicaciones
 GET /api/sales-targets/progress?year=2026&month=1 200 in 671ms (compile: 20ms, proxy.ts: 120ms, render: 531ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Yearly Trend API] Calculando tendencias anuales para 2026
[Yearly Trend API] Tendencias calculadas para 10 tiendas
 GET /api/sales-targets/yearly-trend?year=2026 200 in 1249ms (compile: 1485Âµs, proxy.ts: 87ms, render: 1161ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=ES 200 in 1333ms (compile: 137ms, proxy.ts: 642ms, render: 554ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=ES 200 in 444ms (compile: 15ms, proxy.ts: 139ms, render: 291ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 488ms (compile: 29ms, proxy.ts: 241ms, render: 219ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 542ms (compile: 6ms, proxy.ts: 280ms, render: 257ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 783ms (compile: 6ms, proxy.ts: 279ms, render: 497ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 811ms (compile: 7ms, proxy.ts: 279ms, render: 525ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 432ms (compile: 3ms, proxy.ts: 137ms, render: 292ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 636ms (compile: 3ms, proxy.ts: 115ms, render: 518ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 307ms (compile: 3ms, proxy.ts: 137ms, render: 167ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 430ms (compile: 1532Âµs, proxy.ts: 80ms, render: 348ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 370ms (compile: 2ms, proxy.ts: 85ms, render: 283ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 370ms (compile: 5ms, proxy.ts: 92ms, render: 272ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 452ms (compile: 6ms, proxy.ts: 80ms, render: 366ms)
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 324ms (compile: 4ms, proxy.ts: 131ms, render: 189ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=ES 200 in 279ms (compile: 10ms, proxy.ts: 127ms, render: 141ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=50&offset=0&country=ES 200 in 299ms (compile: 1584Âµs, proxy.ts: 96ms, render: 202ms)
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=10&offset=0&periodBasedLTV=true&country=ES 200 in 261ms (compile: 1269Âµs, proxy.ts: 81ms, render: 179ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 1322ms (compile: 3ms, proxy.ts: 73ms, render: 1246ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1865ms (compile: 1612Âµs, proxy.ts: 367ms, render: 1497ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&limit=10&offset=0&country=ES 200 in 255ms (compile: 1435Âµs, proxy.ts: 77ms, render: 176ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customer-metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 418ms (compile: 1083Âµs, proxy.ts: 73ms, render: 344ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 250ms (compile: 4ms, proxy.ts: 95ms, render: 151ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 258ms (compile: 5ms, proxy.ts: 89ms, render: 164ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 318ms (compile: 1766Âµs, proxy.ts: 88ms, render: 228ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
Error: fetch failed
    at context.fetch (/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/node_modules/next/dist/server/web/sandbox/context.js:321:60)
    at eval (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/lib/helpers.js:120:25)
    at _handleRequest (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:106:24)
    at _request (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:96:24)
    at eval (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/GoTrueClient.js:1290:82)
    at SupabaseAuthClient._useSession (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/GoTrueClient.js:1176:26)
    at async SupabaseAuthClient._getUser (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/GoTrueClient.js:1280:20)
    at async eval (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/GoTrueClient.js:1264:20)
    at async eval (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/GoTrueClient.js:1121:28) {
  
}
ğŸ‘¤ User status: { hasUser: false, email: undefined }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 48.3min (compile: 36ms, proxy.ts: 47.4min, render: 52s)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 495ms (compile: 10ms, proxy.ts: 225ms, render: 260ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 486ms (compile: 7ms, proxy.ts: 190ms, render: 289ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 570ms (compile: 9ms, proxy.ts: 193ms, render: 369ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 484ms (compile: 8ms, proxy.ts: 176ms, render: 300ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 1696ms (compile: 6ms, proxy.ts: 192ms, render: 1498ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1212ms (compile: 9ms, proxy.ts: 200ms, render: 1003ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 352ms (compile: 9ms, proxy.ts: 164ms, render: 179ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 391ms (compile: 4ms, proxy.ts: 193ms, render: 193ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 426ms (compile: 3ms, proxy.ts: 194ms, render: 230ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1123ms (compile: 9ms, proxy.ts: 161ms, render: 954ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=locations&startDate=2026-01-01&endDate=2026-01-14&country=ALL 200 in 80.9min (compile: 1547Âµs, proxy.ts: 76ms, render: 80.9min)
â¨¯ {
  message: 'TypeError: terminated',
  details: 'TypeError: terminated\n' +
    '\n' +
    'Caused by: Error: read ECONNRESET (ECONNRESET)\n' +
    'Error: read ECONNRESET\n' +
    '    at TLSWrap.onStreamRead (node:internal/stream_base_commons:218:20)\n' +
    '    at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
  hint: '',
  code: ''
}
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 500 in 80.9min (compile: 1545Âµs, proxy.ts: 80ms, render: 80.9min)
TypeError: fetch failed
    at ignore-listed frames {
  [cause]: Error: read ECONNRESET
      at ignore-listed frames {
    errno: -54,
    code: 'ECONNRESET',
    syscall: 'read'
  }
}
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 401 in 81.4min (compile: 3ms, proxy.ts: 73ms, render: 81.4min)
TypeError: fetch failed
    at ignore-listed frames {
  [cause]: Error: read ECONNRESET
      at ignore-listed frames {
    errno: -54,
    code: 'ECONNRESET',
    syscall: 'read'
  }
}
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 401 in 81.4min (compile: 2ms, proxy.ts: 87ms, render: 81.4min)
â¨¯ {
  message: 'TypeError: fetch failed',
  details: 'TypeError: fetch failed\n' +
    '\n' +
    'Caused by: Error: read ECONNRESET (ECONNRESET)\n' +
    'Error: read ECONNRESET\n' +
    '    at TLSWrap.onStreamRead (node:internal/stream_base_commons:218:20)\n' +
    '    at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17)',
  hint: '',
  code: ''
}
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 500 in 81.4min (compile: 1850Âµs, proxy.ts: 79ms, render: 81.4min)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 2.3s (compile: 31ms, proxy.ts: 1218ms, render: 1030ms)
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 2.3s (compile: 35ms, proxy.ts: 1213ms, render: 1045ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 2.9s (compile: 28ms, proxy.ts: 1214ms, render: 1705ms)
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 3.0s (compile: 33ms, proxy.ts: 1216ms, render: 1781ms)
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 3.1s (compile: 29ms, proxy.ts: 1219ms, render: 1842ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 881ms (compile: 60ms, proxy.ts: 283ms, render: 538ms)
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 875ms (compile: 59ms, proxy.ts: 274ms, render: 541ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 603ms (compile: 1880Âµs, proxy.ts: 235ms, render: 367ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 2.1s (compile: 6ms, proxy.ts: 245ms, render: 1836ms)
Error: fetch failed
    at context.fetch (/Users/juanfabianidelaiglesia/Downloads/2Âº BUSINESS/BUND-Analytics/node_modules/next/dist/server/web/sandbox/context.js:321:60)
    at eval (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/lib/helpers.js:120:25)
    at _handleRequest (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:106:24)
    at _request (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:96:24)
    at eval (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/GoTrueClient.js:1290:82)
    at SupabaseAuthClient._useSession (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/GoTrueClient.js:1176:26)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async SupabaseAuthClient._getUser (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/GoTrueClient.js:1280:20)
    at async eval (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/GoTrueClient.js:1264:20)
    at async eval (webpack-internal:///(middleware)/./node_modules/@supabase/auth-js/dist/module/GoTrueClient.js:1121:28) {
  
}
ğŸ‘¤ User status: { hasUser: false, email: undefined }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 36.7min (compile: 48ms, proxy.ts: 36.7min, render: 1361ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=ES 200 in 414ms (compile: 18ms, proxy.ts: 286ms, render: 110ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=ES 200 in 1043ms (compile: 8ms, proxy.ts: 394ms, render: 641ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 1111ms (compile: 5ms, proxy.ts: 395ms, render: 711ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 1204ms (compile: 11ms, proxy.ts: 460ms, render: 733ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 1554ms (compile: 6ms, proxy.ts: 466ms, render: 1083ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1596ms (compile: 3ms, proxy.ts: 468ms, render: 1124ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 590ms (compile: 1919Âµs, proxy.ts: 93ms, render: 495ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 636ms (compile: 6ms, proxy.ts: 156ms, render: 474ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 430ms (compile: 1864Âµs, proxy.ts: 81ms, render: 347ms)
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 431ms (compile: 1486Âµs, proxy.ts: 74ms, render: 355ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 610ms (compile: 3ms, proxy.ts: 84ms, render: 522ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=ES 200 in 534ms (compile: 1581Âµs, proxy.ts: 112ms, render: 421ms)
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 657ms (compile: 1711Âµs, proxy.ts: 151ms, render: 504ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 608ms (compile: 1282Âµs, proxy.ts: 126ms, render: 481ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 974ms (compile: 13ms, proxy.ts: 270ms, render: 691ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=50&offset=0&country=ES 200 in 346ms (compile: 4ms, proxy.ts: 88ms, render: 255ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=10&offset=0&periodBasedLTV=true&country=ES 200 in 374ms (compile: 2ms, proxy.ts: 96ms, render: 275ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&limit=10&offset=0&country=ES 200 in 333ms (compile: 5ms, proxy.ts: 112ms, render: 216ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customer-metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 501ms (compile: 4ms, proxy.ts: 98ms, render: 400ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 263ms (compile: 2ms, proxy.ts: 85ms, render: 176ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 239ms (compile: 4ms, proxy.ts: 77ms, render: 159ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 2.3s (compile: 5ms, proxy.ts: 93ms, render: 2.2s)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 3.5s (compile: 7ms, proxy.ts: 245ms, render: 3.2s)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=locations&startDate=2026-01-01&endDate=2026-01-14&country=ALL 200 in 439ms (compile: 1648Âµs, proxy.ts: 96ms, render: 341ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 354ms (compile: 1421Âµs, proxy.ts: 89ms, render: 263ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 335ms (compile: 1788Âµs, proxy.ts: 88ms, render: 246ms)
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 317ms (compile: 1995Âµs, proxy.ts: 94ms, render: 221ms)
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 290ms (compile: 2ms, proxy.ts: 79ms, render: 209ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 471ms (compile: 1817Âµs, proxy.ts: 73ms, render: 396ms)
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 479ms (compile: 2ms, proxy.ts: 79ms, render: 398ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 779ms (compile: 1976Âµs, proxy.ts: 98ms, render: 679ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 628ms (compile: 155ms, proxy.ts: 209ms, render: 263ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 627ms (compile: 163ms, proxy.ts: 181ms, render: 282ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 468ms (compile: 6ms, proxy.ts: 292ms, render: 171ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 488ms (compile: 17ms, proxy.ts: 286ms, render: 186ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 795ms (compile: 160ms, proxy.ts: 185ms, render: 450ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 366ms (compile: 22ms, proxy.ts: 83ms, render: 261ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 300ms (compile: 1602Âµs, proxy.ts: 121ms, render: 177ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 391ms (compile: 4ms, proxy.ts: 123ms, render: 264ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 416ms (compile: 28ms, proxy.ts: 153ms, render: 236ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 352ms (compile: 1832Âµs, proxy.ts: 82ms, render: 268ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 331ms (compile: 1658Âµs, proxy.ts: 86ms, render: 243ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 258ms (compile: 1678Âµs, proxy.ts: 69ms, render: 188ms)
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 389ms (compile: 8ms, proxy.ts: 90ms, render: 290ms)
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 249ms (compile: 1743Âµs, proxy.ts: 79ms, render: 168ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1415ms (compile: 1863Âµs, proxy.ts: 82ms, render: 1331ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 776ms (compile: 1498Âµs, proxy.ts: 75ms, render: 699ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 1790ms (compile: 14ms, proxy.ts: 99ms, render: 1677ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1147ms (compile: 9ms, proxy.ts: 199ms, render: 940ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 1201ms (compile: 1904Âµs, proxy.ts: 78ms, render: 1122ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 293ms (compile: 53ms, proxy.ts: 199ms, render: 41ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:52.074Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:52.078Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:52.079Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:52.080Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:52.081Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:52.082Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 2.6s (compile: 1883ms, proxy.ts: 271ms, render: 400ms)
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 2.6s (compile: 1889ms, proxy.ts: 265ms, render: 405ms)
[Acuity Stats] Found 134 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 2.6s (compile: 1380ms, proxy.ts: 774ms, render: 412ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 499 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1610636740,
  datetime: '2026-01-20T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Ignacio FernÃ¡ndez de Cuevas'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 2.6s (compile: 1379ms, proxy.ts: 775ms, render: 429ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Stats Availability] Found 702 total employee availability records
[Stats Availability] Found 696 valid employee availability records (with calendar_id)
[Stats Availability] Found 90 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 31
[Stats Availability] Calendar Name to Store map size: 31
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 2.7s (compile: 1886ms, proxy.ts: 267ms, render: 571ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 2.9s (compile: 1885ms, proxy.ts: 269ms, render: 749ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-14T15:00:52.955Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-14T15:00:52.957Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 188 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612372274,
  datetime: '2026-01-15T14:15:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 1082ms (compile: 20ms, proxy.ts: 328ms, render: 734ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 684 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1608031931,
  datetime: '2026-01-17T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Andrea QuiÃ±ones'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 1151ms (compile: 19ms, proxy.ts: 330ms, render: 803ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[By Store API] Fetching data for years: 2025, grouping: monthly
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:54.742Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
 GET /api/acuity/stats?type=monthly&months=12 200 in 1404ms (compile: 846ms, proxy.ts: 293ms, render: 265ms)
[Acuity Appointments] Total appointments before filtering: 489
 GET /api/acuity/appointments?startDate=2025-12-31&endDate=2026-01-14 200 in 1478ms (compile: 848ms, proxy.ts: 356ms, render: 274ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:55.079Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:55.084Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 2.8s (compile: 1961ms, proxy.ts: 303ms, render: 572ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 337ms (compile: 3ms, proxy.ts: 83ms, render: 251ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 134 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 344ms (compile: 1692Âµs, proxy.ts: 83ms, render: 259ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:55.326Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 3.0s (compile: 1965ms, proxy.ts: 299ms, render: 761ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:55.365Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T15:00:55.367Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 3.1s (compile: 1966ms, proxy.ts: 159ms, render: 933ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 499 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1610636740,
  datetime: '2026-01-20T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Ignacio FernÃ¡ndez de Cuevas'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 378ms (compile: 1378Âµs, proxy.ts: 94ms, render: 282ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 2.9s (compile: 1621ms, proxy.ts: 314ms, render: 1006ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-14T15:00:55.766Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: monthly
[Acuity Stats] Found 188 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612372274,
  datetime: '2026-01-15T14:15:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 859ms (compile: 7ms, proxy.ts: 162ms, render: 691ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 798ms (compile: 21ms, proxy.ts: 202ms, render: 576ms)
[Stats Availability] Found 702 total employee availability records
[Stats Availability] Found 696 valid employee availability records (with calendar_id)
[Stats Availability] Found 90 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 31
[Stats Availability] Calendar Name to Store map size: 31
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 1219ms (compile: 1450Âµs, proxy.ts: 81ms, render: 1137ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/annual-totals',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=occupation&days=21 200 in 1494ms (compile: 1142Âµs, proxy.ts: 81ms, render: 1412ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-14T15:00:58.253Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[Annual Totals API] Fetching data for years: 2021, 2022, 2023, 2024, 2025
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 1986ms (compile: 1457ms, proxy.ts: 306ms, render: 223ms)
 GET /api/citas/historical?startDate=2025-12-31&endDate=2025-01-14 200 in 2.9s (compile: 2.4s, proxy.ts: 248ms, render: 235ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Annual Totals API] Success - Retrieved data for 5 years
 GET /api/citas/historical/annual-totals?years=2021,2022,2023,2024,2025 200 in 1983ms (compile: 1387ms, proxy.ts: 348ms, render: 248ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 684 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1608031931,
  datetime: '2026-01-17T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Andrea QuiÃ±ones'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 3.0s (compile: 2.2s, proxy.ts: 392ms, render: 317ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 910 appointments found (via RPC)
[Historical Compare API] Year 2024: 1173 appointments found (via RPC)
 GET /api/citas/historical?startDate=2024-12-31&endDate=2024-01-14 200 in 281ms (compile: 5ms, proxy.ts: 95ms, render: 180ms)
[Historical Compare API] Year 2025: 1657 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1 200 in 2.5s (compile: 1462ms, proxy.ts: 451ms, render: 543ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2023-12-31&endDate=2023-01-14 200 in 256ms (compile: 6ms, proxy.ts: 88ms, render: 163ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2022-12-31&endDate=2022-01-14 200 in 267ms (compile: 3ms, proxy.ts: 99ms, render: 165ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/appointments',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Appointments] Total appointments before filtering: 484
 GET /api/acuity/appointments?startDate=2026-01-01&endDate=2026-01-14 200 in 378ms (compile: 18ms, proxy.ts: 180ms, render: 181ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2025-01-01&endDate=2025-01-14 200 in 322ms (compile: 7ms, proxy.ts: 80ms, render: 235ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2024-01-01&endDate=2024-01-14 200 in 271ms (compile: 5ms, proxy.ts: 90ms, render: 177ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2023-01-01&endDate=2023-01-14 200 in 256ms (compile: 4ms, proxy.ts: 83ms, render: 169ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?startDate=2022-01-01&endDate=2022-01-14 200 in 268ms (compile: 7ms, proxy.ts: 87ms, render: 174ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
 GET /api/citas/historical?year=2024 200 in 1486ms (compile: 82ms, proxy.ts: 599ms, render: 804ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 1525ms (compile: 59ms, proxy.ts: 597ms, render: 869ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 1532ms (compile: 55ms, proxy.ts: 601ms, render: 876ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 1710ms (compile: 55ms, proxy.ts: 602ms, render: 1054ms)
[By Store API] Fetching data for years: 2025, grouping: monthly
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 1722ms (compile: 54ms, proxy.ts: 602ms, render: 1066ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 1743ms (compile: 72ms, proxy.ts: 603ms, render: 1068ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 247ms (compile: 2ms, proxy.ts: 83ms, render: 162ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/citas/historical?year=2024 200 in 333ms (compile: 1595Âµs, proxy.ts: 84ms, render: 248ms)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=monthly 200 in 289ms (compile: 1900Âµs, proxy.ts: 89ms, render: 198ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 309ms (compile: 1177Âµs, proxy.ts: 93ms, render: 215ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 321ms (compile: 4ms, proxy.ts: 101ms, render: 216ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 287ms (compile: 1161Âµs, proxy.ts: 76ms, render: 209ms)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 321ms (compile: 1196Âµs, proxy.ts: 82ms, render: 238ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: monthly
[By Store API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, grouping: annual
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: Madrid
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=annual 200 in 306ms (compile: 16ms, proxy.ts: 91ms, render: 199ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 603ms (compile: 878Âµs, proxy.ts: 92ms, render: 511ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2021,2022,2023,2024,2025&grouping=monthly 200 in 303ms (compile: 3ms, proxy.ts: 99ms, render: 201ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 287ms (compile: 3ms, proxy.ts: 93ms, render: 191ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 310ms (compile: 5ms, proxy.ts: 95ms, render: 210ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[By Store API] Fetching data for years: 2025, grouping: annual
[Historical Compare API] Fetching data for years: 2021, 2022, 2023, 2024, 2025, month: 1, store: Madrid
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 261ms (compile: 3ms, proxy.ts: 80ms, render: 179ms)
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 291ms (compile: 3ms, proxy.ts: 93ms, render: 195ms)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=Madrid 200 in 579ms (compile: 1583Âµs, proxy.ts: 79ms, render: 498ms)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2021,2022,2023,2024,2025&month=1&storeCity=Madrid 200 in 560ms (compile: 1275Âµs, proxy.ts: 80ms, render: 479ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 286ms (compile: 7ms, proxy.ts: 89ms, render: 190ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 295ms (compile: 5ms, proxy.ts: 90ms, render: 199ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2022, 2021, grouping: monthly
[By Store API] Fetching data for years: 2025, 2024, 2022, 2021, grouping: annual
[Historical Compare API] Fetching data for years: 2025, 2024, 2022, 2021, month: 1, store: Madrid
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 539ms (compile: 4ms, proxy.ts: 207ms, render: 328ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2022,2021&grouping=monthly 200 in 547ms (compile: 4ms, proxy.ts: 190ms, render: 353ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2022,2021&grouping=annual 200 in 548ms (compile: -279Âµs, proxy.ts: 212ms, render: 337ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2022,2021&month=1&storeCity=Madrid 200 in 1625ms (compile: 1395Âµs, proxy.ts: 220ms, render: 1403ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 386ms (compile: 3ms, proxy.ts: 179ms, render: 204ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/compare',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: monthly
[Historical Compare API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, month: 1, store: Madrid
[By Store API] Success - Retrieved data for 9 stores
 GET /api/citas/historical/by-store?years=2025&grouping=annual 200 in 270ms (compile: 13ms, proxy.ts: 97ms, render: 160ms)
[Historical Compare API] Year 2025: 718 appointments found (via RPC)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 309ms (compile: 7ms, proxy.ts: 104ms, render: 198ms)
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=monthly 200 in 330ms (compile: 16ms, proxy.ts: 106ms, render: 209ms)
[Historical Compare API] Year 2024: 548 appointments found (via RPC)
[Historical Compare API] Year 2023: 476 appointments found (via RPC)
[Historical Compare API] Year 2022: 168 appointments found (via RPC)
[Historical Compare API] Year 2021: 58 appointments found (via RPC)
 GET /api/citas/historical/compare?years=2025,2024,2023,2022,2021&month=1&storeCity=Madrid 200 in 610ms (compile: 7ms, proxy.ts: 118ms, render: 486ms)
ğŸ” Middleware Debug: {
  url: '/api/citas/historical/by-store',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[By Store API] Fetching data for years: 2025, 2024, 2023, 2022, 2021, grouping: annual
[By Store API] Success - Retrieved data for 15 stores
 GET /api/citas/historical/by-store?years=2025,2024,2023,2022,2021&grouping=annual 200 in 291ms (compile: 7ms, proxy.ts: 102ms, render: 181ms)
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET / 200 in 327ms (compile: 112ms, proxy.ts: 143ms, render: 73ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
 GET /api/dashboard 200 in 3.5s (compile: 2.1s, proxy.ts: 94ms, render: 1323ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
ğŸ” Middleware Debug: { url: '/ventas/espana', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/dashboard 200 in 1270ms (compile: 6ms, proxy.ts: 102ms, render: 1162ms)
 GET /ventas/espana 200 in 1173ms (compile: 1045ms, proxy.ts: 99ms, render: 29ms)
ğŸ” Middleware Debug: { url: '/ventas/mexico', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas/mexico 200 in 1058ms (compile: 888ms, proxy.ts: 78ms, render: 93ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=MX 200 in 203ms (compile: 59ms, proxy.ts: 114ms, render: 29ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=MX 200 in 128ms (compile: 26ms, proxy.ts: 90ms, render: 12ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=MX 200 in 1909ms (compile: 1604ms, proxy.ts: 149ms, render: 156ms)
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=MX 200 in 1918ms (compile: 1629ms, proxy.ts: 124ms, render: 165ms)
 GET /api/shopify?type=monthly-revenue&months=12&country=MX 200 in 1922ms (compile: 1629ms, proxy.ts: 123ms, render: 170ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 1961ms (compile: 1632ms, proxy.ts: 121ms, render: 208ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 1985ms (compile: 1630ms, proxy.ts: 123ms, render: 232ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 242ms (compile: 1470Âµs, proxy.ts: 76ms, render: 165ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 338ms (compile: 5ms, proxy.ts: 95ms, render: 239ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 427ms (compile: 1801Âµs, proxy.ts: 85ms, render: 340ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=MX 200 in 624ms (compile: 2ms, proxy.ts: 87ms, render: 534ms)
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=MX 200 in 399ms (compile: 3ms, proxy.ts: 128ms, render: 268ms)
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 280ms (compile: 3ms, proxy.ts: 88ms, render: 190ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 416ms (compile: 4ms, proxy.ts: 81ms, render: 331ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=MX 200 in 298ms (compile: 3ms, proxy.ts: 91ms, render: 204ms)
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=MX 200 in 302ms (compile: 5ms, proxy.ts: 89ms, render: 209ms)
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 307ms (compile: 3ms, proxy.ts: 84ms, render: 220ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&country=MX 200 in 264ms (compile: 1908Âµs, proxy.ts: 83ms, render: 179ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=50&offset=0&country=MX 200 in 284ms (compile: 1640Âµs, proxy.ts: 88ms, render: 194ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 3.2s (compile: 1630ms, proxy.ts: 122ms, render: 1464ms)
 GET /api/shopify?type=customers&limit=10&offset=0&country=MX 200 in 264ms (compile: 2ms, proxy.ts: 85ms, render: 177ms)
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=10&offset=0&periodBasedLTV=true&country=MX 200 in 283ms (compile: 3ms, proxy.ts: 97ms, render: 183ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 1431ms (compile: 1838Âµs, proxy.ts: 93ms, render: 1337ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=customer-metrics&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 440ms (compile: 1328Âµs, proxy.ts: 121ms, render: 317ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 259ms (compile: 1628Âµs, proxy.ts: 73ms, render: 184ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 296ms (compile: 2ms, proxy.ts: 89ms, render: 204ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 332ms (compile: 1901Âµs, proxy.ts: 89ms, render: 241ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 278ms (compile: 4ms, proxy.ts: 82ms, render: 191ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 308ms (compile: 1732Âµs, proxy.ts: 79ms, render: 228ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=MX 200 in 229ms (compile: 1391Âµs, proxy.ts: 73ms, render: 154ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=locations&startDate=2026-01-01&endDate=2026-01-14&country=ALL 200 in 544ms (compile: 3ms, proxy.ts: 89ms, render: 453ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=MX 200 in 252ms (compile: 3ms, proxy.ts: 84ms, render: 164ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 237ms (compile: 4ms, proxy.ts: 79ms, render: 154ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=MX 200 in 263ms (compile: 4ms, proxy.ts: 81ms, render: 177ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 244ms (compile: 7ms, proxy.ts: 73ms, render: 164ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&country=MX 200 in 232ms (compile: 4ms, proxy.ts: 84ms, render: 144ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 398ms (compile: 5ms, proxy.ts: 136ms, render: 257ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 243ms (compile: 4ms, proxy.ts: 81ms, render: 157ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 274ms (compile: 1456Âµs, proxy.ts: 73ms, render: 199ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 246ms (compile: 2ms, proxy.ts: 90ms, render: 154ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 257ms (compile: 2ms, proxy.ts: 84ms, render: 171ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=MX 200 in 315ms (compile: 4ms, proxy.ts: 134ms, render: 178ms)
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=MX 200 in 308ms (compile: 3ms, proxy.ts: 78ms, render: 227ms)
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 291ms (compile: 5ms, proxy.ts: 97ms, render: 190ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 920ms (compile: 6ms, proxy.ts: 80ms, render: 834ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 737ms (compile: 2ms, proxy.ts: 79ms, render: 656ms)
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 350ms (compile: 44ms, proxy.ts: 111ms, render: 195ms)
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 384ms (compile: 44ms, proxy.ts: 110ms, render: 229ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 1322ms (compile: 1276Âµs, proxy.ts: 73ms, render: 1248ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 1057ms (compile: 27ms, proxy.ts: 188ms, render: 842ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 797ms (compile: 3ms, proxy.ts: 81ms, render: 713ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=MX 200 in 529ms (compile: 188ms, proxy.ts: 290ms, render: 51ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=MX 200 in 165ms (compile: 7ms, proxy.ts: 141ms, render: 17ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=MX 200 in 256ms (compile: 8ms, proxy.ts: 223ms, render: 25ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=MX 200 in 624ms (compile: 13ms, proxy.ts: 150ms, render: 461ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&country=MX 200 in 2.0s (compile: 1667ms, proxy.ts: 153ms, render: 212ms)
 GET /api/integrations/shopify?country=MX 200 in 2.1s (compile: 1728ms, proxy.ts: 110ms, render: 223ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 2.1s (compile: 1638ms, proxy.ts: 183ms, render: 280ms)
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 2.1s (compile: 1671ms, proxy.ts: 149ms, render: 288ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=MX 200 in 2.1s (compile: 1540ms, proxy.ts: 281ms, render: 301ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 255ms (compile: 1592Âµs, proxy.ts: 89ms, render: 165ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=MX 200 in 287ms (compile: 4ms, proxy.ts: 87ms, render: 196ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 331ms (compile: 1326Âµs, proxy.ts: 89ms, render: 240ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 442ms (compile: 4ms, proxy.ts: 88ms, render: 350ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=MX 200 in 260ms (compile: 4ms, proxy.ts: 85ms, render: 172ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 325ms (compile: 11ms, proxy.ts: 123ms, render: 192ms)
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 365ms (compile: 1432Âµs, proxy.ts: 75ms, render: 288ms)
 GET /ventas?country=MX 200 in 188ms (compile: 51ms, proxy.ts: 97ms, render: 39ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 556ms (compile: 1455Âµs, proxy.ts: 92ms, render: 463ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 3.0s (compile: 1675ms, proxy.ts: 145ms, render: 1220ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&country=MX 200 in 296ms (compile: 7ms, proxy.ts: 112ms, render: 177ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=50&offset=0&country=MX 200 in 280ms (compile: 4ms, proxy.ts: 117ms, render: 160ms)
 GET /api/integrations/shopify?country=MX 200 in 321ms (compile: 4ms, proxy.ts: 112ms, render: 205ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 1166ms (compile: 3ms, proxy.ts: 103ms, render: 1060ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=10&offset=0&periodBasedLTV=true&country=MX 200 in 251ms (compile: 1393Âµs, proxy.ts: 86ms, render: 164ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&limit=10&offset=0&country=MX 200 in 263ms (compile: 1713Âµs, proxy.ts: 83ms, render: 178ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 290ms (compile: 2ms, proxy.ts: 88ms, render: 200ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 245ms (compile: 1861Âµs, proxy.ts: 82ms, render: 162ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customer-metrics&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 547ms (compile: 12ms, proxy.ts: 115ms, render: 419ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=locations&startDate=2026-01-01&endDate=2026-01-14&country=ALL 200 in 410ms (compile: 3ms, proxy.ts: 87ms, render: 320ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=MX 200 in 261ms (compile: 7ms, proxy.ts: 85ms, render: 169ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 258ms (compile: 1451Âµs, proxy.ts: 84ms, render: 173ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=MX 200 in 242ms (compile: 1593Âµs, proxy.ts: 77ms, render: 163ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 272ms (compile: 6ms, proxy.ts: 87ms, render: 178ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=MX 200 in 228ms (compile: 1544Âµs, proxy.ts: 80ms, render: 147ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 258ms (compile: 5ms, proxy.ts: 86ms, render: 167ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 328ms (compile: 1838Âµs, proxy.ts: 88ms, render: 239ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 258ms (compile: 2ms, proxy.ts: 78ms, render: 177ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&country=MX 200 in 231ms (compile: 1435Âµs, proxy.ts: 82ms, render: 148ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 439ms (compile: 4ms, proxy.ts: 88ms, render: 347ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 276ms (compile: 1559Âµs, proxy.ts: 89ms, render: 185ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 266ms (compile: 2ms, proxy.ts: 81ms, render: 183ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=MX 200 in 228ms (compile: 3ms, proxy.ts: 77ms, render: 148ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 264ms (compile: 1661Âµs, proxy.ts: 87ms, render: 175ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=MX 200 in 258ms (compile: 1499Âµs, proxy.ts: 75ms, render: 182ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 258ms (compile: 1635Âµs, proxy.ts: 84ms, render: 173ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=MX 200 in 318ms (compile: 4ms, proxy.ts: 91ms, render: 224ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 413ms (compile: 5ms, proxy.ts: 168ms, render: 239ms)
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 359ms (compile: 19ms, proxy.ts: 143ms, render: 197ms)
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=MX 200 in 519ms (compile: 8ms, proxy.ts: 176ms, render: 335ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 1152ms (compile: 1386Âµs, proxy.ts: 79ms, render: 1071ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=MX 200 in 510ms (compile: 10ms, proxy.ts: 169ms, render: 331ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 1366ms (compile: 3ms, proxy.ts: 88ms, render: 1275ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=MX 200 in 974ms (compile: 1378Âµs, proxy.ts: 84ms, render: 889ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=MX 200 in 1185ms (compile: 5ms, proxy.ts: 84ms, render: 1096ms)
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/yearly-trend',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/progress',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Sales Targets Progress] Calculando progreso para 2026-1
[Yearly Trend API] Calculando tendencias anuales para 2026
[Sales Targets Progress] Rango de fechas: 2026-01-01 - 2026-01-31
[Sales Targets Progress] Calculado progreso para 10 ubicaciones
 GET /api/sales-targets/progress?year=2026&month=1 200 in 3.4s (compile: 1816ms, proxy.ts: 267ms, render: 1352ms)
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/progress',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Sales Targets Progress] Calculando progreso para 2026-1
[Sales Targets Progress] Rango de fechas: 2026-01-01 - 2026-01-31
[Sales Targets Progress] Calculado progreso para 10 ubicaciones
 GET /api/sales-targets/progress?year=2026&month=1 200 in 745ms (compile: 8ms, proxy.ts: 84ms, render: 653ms)
[Yearly Trend API] Tendencias calculadas para 10 tiendas
 GET /api/sales-targets/yearly-trend?year=2026 200 in 4.5s (compile: 1814ms, proxy.ts: 270ms, render: 2.4s)
ğŸ” Middleware Debug: {
  url: '/api/sales-targets/yearly-trend',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Yearly Trend API] Calculando tendencias anuales para 2026
[Yearly Trend API] Tendencias calculadas para 10 tiendas
 GET /api/sales-targets/yearly-trend?year=2026 200 in 1425ms (compile: 1378Âµs, proxy.ts: 79ms, render: 1345ms)
ğŸ” Middleware Debug: { url: '/calendario', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /calendario ...
 GET /calendario 200 in 3.8s (compile: 3.5s, proxy.ts: 169ms, render: 72ms)
ğŸ” Middleware Debug: {
  url: '/api/calendar/events',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/calendar/events?year=2026 200 in 2.1s (compile: 1480ms, proxy.ts: 435ms, render: 195ms)
ğŸ” Middleware Debug: {
  url: '/api/calendar/events',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/calendar/events?year=2026 200 in 282ms (compile: 3ms, proxy.ts: 97ms, render: 182ms)
ğŸ” Middleware Debug: { url: '/calendario', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /calendario 200 in 349ms (compile: 117ms, proxy.ts: 194ms, render: 38ms)
ğŸ” Middleware Debug: { url: '/calendario', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /calendario 200 in 265ms (compile: 69ms, proxy.ts: 168ms, render: 29ms)
ğŸ” Middleware Debug: { url: '/calendario', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /calendario 200 in 1276ms (compile: 265ms, proxy.ts: 832ms, render: 180ms)
ğŸ” Middleware Debug: { url: '/ventas/espana', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/calendario', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /calendario 200 in 280ms (compile: 7ms, proxy.ts: 218ms, render: 55ms)
ğŸ” Middleware Debug: { url: '/calendario', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /ventas/espana ...
 GET /ventas/espana 200 in 7.2s (compile: 6.8s, proxy.ts: 264ms, render: 79ms)
 GET /calendario 200 in 6.9s (compile: 4.5s, proxy.ts: 2.3s, render: 78ms)
ğŸ” Middleware Debug: { url: '/ventas/espana', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas/espana 200 in 288ms (compile: 9ms, proxy.ts: 262ms, render: 16ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=ES 200 in 299ms (compile: 84ms, proxy.ts: 196ms, render: 19ms)
ğŸ” Middleware Debug: { url: '/ventas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /ventas?country=ES 200 in 223ms (compile: 5ms, proxy.ts: 175ms, render: 43ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/shopify ...
 GET /api/integrations/shopify?country=ES 200 in 4.1s (compile: 3.4s, proxy.ts: 235ms, render: 453ms)
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 4.1s (compile: 3.0s, proxy.ts: 583ms, render: 480ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 4.1s (compile: 3.0s, proxy.ts: 579ms, render: 510ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 4.4s (compile: 3.0s, proxy.ts: 580ms, render: 824ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 4.5s (compile: 3.0s, proxy.ts: 581ms, render: 855ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 560ms (compile: 1806Âµs, proxy.ts: 214ms, render: 345ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 589ms (compile: 9ms, proxy.ts: 126ms, render: 454ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 254ms (compile: 1691Âµs, proxy.ts: 88ms, render: 165ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 423ms (compile: 2ms, proxy.ts: 105ms, render: 316ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 281ms (compile: 2ms, proxy.ts: 84ms, render: 195ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 338ms (compile: 8ms, proxy.ts: 103ms, render: 227ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 377ms (compile: 4ms, proxy.ts: 117ms, render: 255ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 298ms (compile: 2ms, proxy.ts: 83ms, render: 213ms)
 GET /api/integrations/shopify?country=ES 200 in 234ms (compile: 1254Âµs, proxy.ts: 76ms, render: 157ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=50&offset=0&country=ES 200 in 275ms (compile: 1650Âµs, proxy.ts: 73ms, render: 200ms)
 GET /api/shopify?type=customers&startDate=2026-01-01&endDate=2026-01-14&limit=10&offset=0&periodBasedLTV=true&country=ES 200 in 1227ms (compile: 9ms, proxy.ts: 88ms, render: 1130ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=customers&limit=10&offset=0&country=ES 200 in 1303ms (compile: 5ms, proxy.ts: 92ms, render: 1206ms)
 GET /api/shopify?type=customer-metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1410ms (compile: 1596Âµs, proxy.ts: 81ms, render: 1327ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 433ms (compile: 12ms, proxy.ts: 237ms, render: 183ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 448ms (compile: 13ms, proxy.ts: 237ms, render: 199ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 7.0s (compile: 3.0s, proxy.ts: 582ms, render: 3.4s)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 2.9s (compile: 12ms, proxy.ts: 153ms, render: 2.8s)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=locations&startDate=2026-01-01&endDate=2026-01-14&country=ALL 200 in 757ms (compile: 74ms, proxy.ts: 149ms, render: 534ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 652ms (compile: 2ms, proxy.ts: 295ms, render: 355ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 383ms (compile: 3ms, proxy.ts: 79ms, render: 301ms)
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 284ms (compile: 38ms, proxy.ts: 78ms, render: 167ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 424ms (compile: 10ms, proxy.ts: 85ms, render: 329ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 394ms (compile: 2ms, proxy.ts: 73ms, render: 320ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 273ms (compile: 1417Âµs, proxy.ts: 95ms, render: 177ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 326ms (compile: 1514Âµs, proxy.ts: 82ms, render: 243ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 252ms (compile: 3ms, proxy.ts: 87ms, render: 162ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 256ms (compile: 5ms, proxy.ts: 69ms, render: 182ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=monthly-revenue&months=12&country=ES 200 in 260ms (compile: 1435Âµs, proxy.ts: 86ms, render: 172ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&country=ES 200 in 250ms (compile: 1670Âµs, proxy.ts: 80ms, render: 168ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 412ms (compile: 2ms, proxy.ts: 92ms, render: 318ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=charts&startDate=2026-01-01&endDate=2026-01-14&days=13&onlineOnly=true&country=ES 200 in 240ms (compile: 1823Âµs, proxy.ts: 77ms, render: 161ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 344ms (compile: 13ms, proxy.ts: 78ms, render: 253ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1170ms (compile: 3ms, proxy.ts: 79ms, render: 1087ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&country=ES 200 in 1208ms (compile: 1610Âµs, proxy.ts: 77ms, render: 1129ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=online-time-analysis&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 389ms (compile: 3ms, proxy.ts: 101ms, render: 285ms)
 GET /api/shopify?type=monthly-revenue&months=12&onlineOnly=true&country=ES 200 in 1418ms (compile: 339ms, proxy.ts: 402ms, render: 677ms)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=orders&limit=100&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 1564ms (compile: 477ms, proxy.ts: 295ms, render: 792ms)
 GET /api/shopify?type=products&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 735ms (compile: 13ms, proxy.ts: 136ms, render: 587ms)
 GET /api/shopify?type=online-customer-segmentation&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 315ms (compile: 3ms, proxy.ts: 92ms, render: 221ms)
 GET /api/shopify?type=complements&limit=10&startDate=2026-01-01&endDate=2026-01-14&filterType=monthly&onlineOnly=true&country=ES 200 in 373ms (compile: 3ms, proxy.ts: 91ms, render: 279ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 2.4s (compile: 1307Âµs, proxy.ts: 74ms, render: 2.3s)
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 2.4s (compile: 1691Âµs, proxy.ts: 78ms, render: 2.3s)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/api/shopify', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&country=ES 200 in 1601ms (compile: 8ms, proxy.ts: 112ms, render: 1481ms)
 GET /api/shopify?type=metrics&startDate=2026-01-01&endDate=2026-01-14&onlineOnly=true&country=ES 200 in 1738ms (compile: 5ms, proxy.ts: 87ms, render: 1647ms)
ğŸ” Middleware Debug: { url: '/calendario', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /calendario 200 in 314ms (compile: 64ms, proxy.ts: 217ms, render: 32ms)
ğŸ” Middleware Debug: {
  url: '/api/calendar/events',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 274ms (compile: 120ms, proxy.ts: 139ms, render: 15ms)
 GET /api/calendar/events?year=2026 200 in 1333ms (compile: 1055ms, proxy.ts: 95ms, render: 183ms)
ğŸ” Middleware Debug: {
  url: '/api/calendar/events',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/calendar/events?year=2026 200 in 262ms (compile: 4ms, proxy.ts: 88ms, render: 170ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:19.827Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:19.829Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:19.833Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:19.835Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:19.836Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:19.837Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 1320ms (compile: 981ms, proxy.ts: 137ms, render: 202ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 1344ms (compile: 1020ms, proxy.ts: 98ms, render: 226ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 134 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 1368ms (compile: 876ms, proxy.ts: 242ms, render: 250ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 499 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1610636740,
  datetime: '2026-01-20T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Ignacio FernÃ¡ndez de Cuevas'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 1399ms (compile: 971ms, proxy.ts: 147ms, render: 281ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-14T16:08:20.114Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Stats Availability] Found 702 total employee availability records
[Stats Availability] Found 696 valid employee availability records (with calendar_id)
[Stats Availability] Found 90 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 31
[Stats Availability] Calendar Name to Store map size: 31
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 1509ms (compile: 975ms, proxy.ts: 143ms, render: 391ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-14T16:08:20.136Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:20.160Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:20.194Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 188 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612372274,
  datetime: '2026-01-15T14:15:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 263ms (compile: 1311Âµs, proxy.ts: 86ms, render: 175ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 1625ms (compile: 873ms, proxy.ts: 245ms, render: 507ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 282ms (compile: 2ms, proxy.ts: 82ms, render: 197ms)
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 239ms (compile: 1405Âµs, proxy.ts: 81ms, render: 157ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:20.291Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Found 684 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1608031931,
  datetime: '2026-01-17T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Andrea QuiÃ±ones'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 353ms (compile: 3ms, proxy.ts: 87ms, render: 262ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 134 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 247ms (compile: 3ms, proxy.ts: 83ms, render: 161ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:20.399Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:20.413Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:20.430Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-14T16:08:20.465Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-14T16:08:20.486Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 499 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1610636740,
  datetime: '2026-01-20T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Ignacio FernÃ¡ndez de Cuevas'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 308ms (compile: 2ms, proxy.ts: 75ms, render: 231ms)
[Stats Availability] Found 702 total employee availability records
[Stats Availability] Found 696 valid employee availability records (with calendar_id)
[Stats Availability] Found 90 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 31
[Stats Availability] Calendar Name to Store map size: 31
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 348ms (compile: 1256Âµs, proxy.ts: 89ms, render: 258ms)
[Acuity Stats] Found 188 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612372274,
  datetime: '2026-01-15T14:15:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 345ms (compile: 1310Âµs, proxy.ts: 116ms, render: 228ms)
[Acuity Stats] Found 684 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1608031931,
  datetime: '2026-01-17T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Andrea QuiÃ±ones'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 331ms (compile: 1108Âµs, proxy.ts: 79ms, render: 250ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 369ms (compile: 1387Âµs, proxy.ts: 81ms, render: 286ms)
ğŸ” Middleware Debug: { url: '/citas', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /citas 200 in 1428ms (compile: 137ms, proxy.ts: 171ms, render: 1121ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.093Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.153Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.163Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.164Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.171Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 364ms (compile: 6ms, proxy.ts: 106ms, render: 252ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.205Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/acuity/stats?type=monthly&months=12 200 in 467ms (compile: 8ms, proxy.ts: 178ms, render: 281ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 134 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 491ms (compile: 1546Âµs, proxy.ts: 256ms, render: 233ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Found 499 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1610636740,
  datetime: '2026-01-20T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Ignacio FernÃ¡ndez de Cuevas'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 509ms (compile: 9ms, proxy.ts: 178ms, render: 323ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-14T16:08:38.358Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Stats Availability] Found 702 total employee availability records
[Stats Availability] Found 696 valid employee availability records (with calendar_id)
[Stats Availability] Found 90 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 31
[Stats Availability] Calendar Name to Store map size: 31
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 561ms (compile: 6ms, proxy.ts: 180ms, render: 374ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'monthly',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.487Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'daily',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.495Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Found 684 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1608031931,
  datetime: '2026-01-17T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Andrea QuiÃ±ones'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 310ms (compile: 1506Âµs, proxy.ts: 87ms, render: 221ms)
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-14T16:08:38.538Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=occupation&days=21 200 in 724ms (compile: 8ms, proxy.ts: 179ms, render: 537ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/acuity/stats?type=monthly&months=12 200 in 229ms (compile: 1595Âµs, proxy.ts: 75ms, render: 153ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'cancellations',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.574Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
 GET /api/acuity/stats?type=daily&year=2026&month=1 200 in 266ms (compile: 1727Âµs, proxy.ts: 90ms, render: 174ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 188 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612372274,
  datetime: '2026-01-15T14:15:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 349ms (compile: 8ms, proxy.ts: 87ms, render: 254ms)
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Found 134 cancellations
 GET /api/acuity/stats?type=cancellations 200 in 288ms (compile: 1256Âµs, proxy.ts: 100ms, render: 187ms)
ğŸ” Middleware Debug: {
  url: '/api/acuity/stats',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
[Acuity Stats] Query params: {
  type: 'availability',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.715Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.717Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'occupation',
  days: 21,
  startDateStr: '2026-01-13T23:00:00.000Z',
  endDateStr: '2026-02-04T22:59:59.999Z',
  futureEndDateStr: '2027-01-14T22:59:59.999Z',
  startDateStrOnly: '2026-01-14',
  endDateStrOnly: '2026-02-04',
  futureEndDateStrOnly: '2027-01-14',
  category: null,
  calendar: null,
  todayISO: '2026-01-14T16:08:38.748Z',
  todayStartISO: '2026-01-13T23:00:00.000Z'
}
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'mediciÃ³n',
  calendar: null,
  todayISO: '2026-01-14T16:08:38.750Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Acuity Stats] Query params: {
  type: 'upcoming',
  days: 21,
  startDateStr: '2025-12-31T23:00:00.000Z',
  endDateStr: '2026-01-31T22:59:59.999Z',
  futureEndDateStr: '2026-01-31T22:59:59.999Z',
  startDateStrOnly: '2026-01-01',
  endDateStrOnly: '2026-01-31',
  futureEndDateStrOnly: '2026-01-31',
  category: 'fitting',
  calendar: null,
  todayISO: '2026-01-14T16:08:38.864Z',
  todayStartISO: '2025-12-31T23:00:00.000Z'
}
[Acuity Stats] Found 499 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1610636740,
  datetime: '2026-01-20T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Ignacio FernÃ¡ndez de Cuevas'
}
 GET /api/acuity/stats?type=upcoming&days=21 200 in 343ms (compile: 3ms, proxy.ts: 87ms, render: 253ms)
[Stats Availability] Found 702 total employee availability records
[Stats Availability] Found 696 valid employee availability records (with calendar_id)
[Stats Availability] Found 90 calendars for mapping
[Stats Availability] Calendar ID to Store map size: 31
[Stats Availability] Calendar Name to Store map size: 31
[Stats Availability] Records without calendar_id: 0
[Stats Availability] Records with unknown store: 0
[Stats Availability] Employee data map size: 23
[Stats Availability] Added employee Andrea QuiÃ±ones to store The Bundclub Madrid (calendar_id=13199534)
[Stats Availability] Added employee Andrea HernÃ¡ndez to store The Bundclub Madrid (calendar_id=13199527)
[Stats Availability] Added employee Manuel Guadarrama to store The Bundclub CDMX (Polanco) (calendar_id=13199568)
[Stats Availability] Added employee Curro Zayas to store The Bundclub MÃ¡laga (calendar_id=13199548)
[Stats Availability] Added employee AdriÃ¡n SÃ¡nchez to store The Bundclub Madrid (calendar_id=13199571)
[Stats Availability] Added employee Pablo Cervantes to store The Bundclub MÃ¡laga (calendar_id=13199544)
[Stats Availability] Added employee Pablo Vallejo to store The Bundclub Madrid (calendar_id=13199520)
[Stats Availability] Added employee JesÃºs GonzÃ¡lez QuirÃ³s to store The Bundclub Madrid (calendar_id=13199524)
[Stats Availability] Added employee Francisco GutiÃ©rrez to store The Bundclub Sevilla (calendar_id=13199542)
[Stats Availability] Added employee Alberto Mesa to store The Bundclub MÃ¡laga (calendar_id=13199551)
[Stats Availability] Added employee RubÃ©n Blanco to store The Bundclub MÃ¡laga (calendar_id=13199546)
[Stats Availability] Added employee JosÃ© JimÃ©nez to store The Bundclub Madrid (calendar_id=13199513)
[Stats Availability] Added employee Irene RodrÃ­guez to store The Bundclub Sevilla (calendar_id=13199538)
[Stats Availability] Added employee Pablo Oliva to store The Bundclub Sevilla (calendar_id=13199543)
[Stats Availability] Added employee Alfonso LÃ³pez to store The Bundclub Sevilla (calendar_id=13199540)
[Stats Availability] Added employee Josmar GonzÃ¡lez to store The Bundclub Madrid (calendar_id=13199531)
[Stats Availability] Added employee AdriÃ¡n Lasarte to store The Bundclub Zaragoza (calendar_id=13199564)
[Stats Availability] Added employee Ignacio FernÃ¡ndez de Cuevas to store The Bundclub Bilbao (calendar_id=13199561)
[Stats Availability] Added employee Carlos SÃ¡nchez to store The Bundclub CDMX (Polanco) (calendar_id=13199567)
[Stats Availability] Added employee Joaquin Pombo to store The Bundclub Barcelona (calendar_id=13199553)
[Stats Availability] Added employee Ariadna Vega to store The Bundclub Barcelona (calendar_id=13199554)
[Stats Availability] Added employee Javier PeÃ±a to store The Bundclub Murcia (calendar_id=13199555)
[Stats Availability] Added employee Pedro Aguilera  to store The Bundclub Valencia (calendar_id=13226214)
[Stats Availability] Total employees added to stores: 23
 GET /api/acuity/stats?type=availability&days=21 200 in 364ms (compile: 1692Âµs, proxy.ts: 78ms, render: 284ms)
[Acuity Stats] Found 684 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1608031931,
  datetime: '2026-01-17T12:00:00+00:00',
  status: 'scheduled',
  category: 'mediciÃ³n',
  calendar: 'Andrea QuiÃ±ones'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=medici%C3%B3n 200 in 351ms (compile: 4ms, proxy.ts: 99ms, render: 248ms)
 GET /api/acuity/stats?type=occupation&days=21 200 in 403ms (compile: 3ms, proxy.ts: 82ms, render: 317ms)
[Acuity Stats] Found 188 upcoming appointments
[Acuity Stats] Sample appointment: {
  id: 1612372274,
  datetime: '2026-01-15T14:15:00+00:00',
  status: 'scheduled',
  category: 'fitting',
  calendar: 'Ariadna Vega'
}
 GET /api/acuity/stats?type=upcoming&startDate=2026-01-01&endDate=2026-01-31&category=fitting 200 in 312ms (compile: 1322Âµs, proxy.ts: 74ms, render: 237ms)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 1229ms (compile: 91ms, proxy.ts: 895ms, render: 243ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/integrations/shopify ...
 GET /api/integrations/analytics?t=1768407778064&_=0.7340228454009396 200 in 5.3s (compile: 4.2s, proxy.ts: 658ms, render: 479ms)
 GET /api/integrations/acuity?t=1768407778064&_=0.6894612393418853 200 in 5.3s (compile: 4.2s, proxy.ts: 659ms, render: 498ms)
 GET /api/integrations/shopify?country=ES&t=1768407778064&_=0.3979346075637743 200 in 5.3s (compile: 4.2s, proxy.ts: 657ms, render: 499ms)
 GET /api/integrations/meta?t=1768407778065&_=0.8233392069592094 200 in 5.3s (compile: 4.2s, proxy.ts: 642ms, render: 501ms)
 GET /api/integrations/shopify?country=MX&t=1768407778064&_=0.4244780214312358 200 in 5.3s (compile: 4.2s, proxy.ts: 658ms, render: 501ms)
 GET /api/integrations/meta?t=1768407778064&_=0.10160182089308722 200 in 5.3s (compile: 4.4s, proxy.ts: 389ms, render: 503ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=MX&t=1768407778065&_=0.4632718787158332 200 in 343ms (compile: 16ms, proxy.ts: 120ms, render: 208ms)
 GET /api/integrations/shopify?country=ES&t=1768407778065&_=0.011024437576038437 200 in 371ms (compile: 20ms, proxy.ts: 115ms, render: 236ms)
 GET /api/integrations/analytics?t=1768407778065&_=0.9137280394907592 200 in 380ms (compile: 19ms, proxy.ts: 121ms, render: 240ms)
 GET /api/integrations/acuity?t=1768407778065&_=0.2669139501961857 200 in 391ms (compile: 22ms, proxy.ts: 125ms, render: 243ms)
ğŸ” Middleware Debug: {
  url: '/api/sync/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Analytics Sync] Starting sync process...
[Analytics Sync] Creating service from Supabase...
[Analytics Sync] Service created successfully
[Analytics Sync] Using default date range: 2025-12-15 to 2026-01-14
[Analytics Sync] Fetching overview metrics...
[Analytics Sync] Error fetching overview metrics: Error: TOKEN_REVOKED: Bad Request. Please reconnect Google Analytics from the integrations page.
    at GoogleAnalyticsService.ensureValidToken (src/lib/integrations/google-analytics.ts:80:17)
    at async GoogleAnalyticsService.getClient (src/lib/integrations/google-analytics.ts:115:15)
    at async GoogleAnalyticsService.getOverviewMetrics (src/lib/integrations/google-analytics.ts:195:20)
    at async POST (src/app/api/sync/analytics/route.ts:101:27)
  78 |         if (errorData.error === 'invalid_grant') {
  79 |           const errorMessage = errorData.error_description || 'Token has been expired or revoked'
> 80 |           throw new Error(`TOKEN_REVOKED: ${errorMessage}. Please reconnect Google Analytics from the integrations page.`)
     |                 ^
  81 |         }
  82 |
  83 |         throw new Error(`Failed to refresh token: ${errorText}`)
 POST /api/sync/analytics 401 in 4.2s (compile: 3.4s, proxy.ts: 116ms, render: 687ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/meta?t=1768407790435&_=0.32802547873100196 200 in 347ms (compile: 12ms, proxy.ts: 110ms, render: 225ms)
 GET /api/integrations/shopify?country=ES&t=1768407790435&_=0.988234041576758 200 in 391ms (compile: 20ms, proxy.ts: 213ms, render: 157ms)
 GET /api/integrations/analytics?t=1768407790435&_=0.29883592290768735 200 in 393ms (compile: 10ms, proxy.ts: 212ms, render: 171ms)
 GET /api/integrations/acuity?t=1768407790435&_=0.30009070954708916 200 in 409ms (compile: 13ms, proxy.ts: 213ms, render: 184ms)
 GET /api/integrations/shopify?country=MX&t=1768407790435&_=0.6399051044114921 200 in 422ms (compile: 16ms, proxy.ts: 218ms, render: 188ms)
  Reload env: .env.local
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 528ms (compile: 175ms, proxy.ts: 308ms, render: 44ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=MX&t=1768408258989&_=0.18543825137586 200 in 3.0s (compile: 1112ms, proxy.ts: 1502ms, render: 400ms)
 GET /api/integrations/analytics?t=1768408258989&_=0.9843892355436835 200 in 3.0s (compile: 1114ms, proxy.ts: 1500ms, render: 405ms)
 GET /api/integrations/shopify?country=ES&t=1768408258989&_=0.24130286274059576 200 in 3.0s (compile: 1113ms, proxy.ts: 1501ms, render: 407ms)
 GET /api/integrations/acuity?t=1768408258989&_=0.8680045714092351 200 in 3.0s (compile: 1112ms, proxy.ts: 1502ms, render: 410ms)
 GET /api/integrations/meta?t=1768408258989&_=0.2081385154243286 200 in 3.1s (compile: 2.5s, proxy.ts: 111ms, render: 414ms)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 3.2s (compile: 1086ms, proxy.ts: 1990ms, render: 111ms)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 292ms (compile: 148ms, proxy.ts: 117ms, render: 27ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/acuity?t=1768408745924&_=0.6886849001957388 200 in 2.3s (compile: 1638ms, proxy.ts: 249ms, render: 429ms)
 GET /api/integrations/shopify?country=ES&t=1768408745924&_=0.019284173780208413 200 in 2.3s (compile: 1637ms, proxy.ts: 250ms, render: 431ms)
 GET /api/integrations/meta?t=1768408745924&_=0.9492055029874051 200 in 2.3s (compile: 1641ms, proxy.ts: 247ms, render: 433ms)
 GET /api/integrations/analytics?t=1768408745924&_=0.9198297518275409 200 in 2.3s (compile: 1636ms, proxy.ts: 251ms, render: 435ms)
 GET /api/integrations/shopify?country=MX&t=1768408745924&_=0.09954329479950907 200 in 2.4s (compile: 1608ms, proxy.ts: 280ms, render: 558ms)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 208ms (compile: 61ms, proxy.ts: 123ms, render: 24ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/meta?t=1768408753574&_=0.35104361376140236 200 in 491ms (compile: 120ms, proxy.ts: 143ms, render: 227ms)
 GET /api/integrations/shopify?country=MX&t=1768408753574&_=0.5804987425283034 200 in 521ms (compile: 5ms, proxy.ts: 357ms, render: 160ms)
 GET /api/integrations/acuity?t=1768408753574&_=0.47061052018779126 200 in 545ms (compile: 3ms, proxy.ts: 386ms, render: 156ms)
 GET /api/integrations/shopify?country=ES&t=1768408753574&_=0.5376223310930442 200 in 550ms (compile: 4ms, proxy.ts: 371ms, render: 175ms)
 GET /api/integrations/analytics?t=1768408753574&_=0.05093590061795117 200 in 551ms (compile: 7ms, proxy.ts: 372ms, render: 171ms)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 210ms (compile: 55ms, proxy.ts: 127ms, render: 29ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/analytics?t=1768408767941&_=0.5706524467940055 200 in 504ms (compile: 95ms, proxy.ts: 191ms, render: 218ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/integrations/shopify?country=ES&t=1768408767941&_=0.4836272248202793 200 in 567ms (compile: 19ms, proxy.ts: 318ms, render: 230ms)
 GET /api/integrations/meta?t=1768408767941&_=0.6587469231337826 200 in 572ms (compile: 24ms, proxy.ts: 322ms, render: 225ms)
 GET /api/integrations/shopify?country=MX&t=1768408767941&_=0.8701620669229779 200 in 572ms (compile: 21ms, proxy.ts: 316ms, render: 235ms)
 GET /api/integrations/acuity?t=1768408767941&_=0.8627916455335517 200 in 578ms (compile: 13ms, proxy.ts: 315ms, render: 250ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
 GET /api/integrations/meta?t=1768408767947&_=0.05427237269867269 200 in 510ms (compile: 28ms, proxy.ts: 239ms, render: 243ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/analytics?t=1768408767947&_=0.9004042398423049 200 in 285ms (compile: 2ms, proxy.ts: 82ms, render: 201ms)
 GET /api/integrations/shopify?country=ES&t=1768408767947&_=0.8279265697501692 200 in 362ms (compile: 12ms, proxy.ts: 91ms, render: 259ms)
 GET /api/integrations/shopify?country=MX&t=1768408767947&_=0.4063384518043739 200 in 361ms (compile: 8ms, proxy.ts: 92ms, render: 260ms)
 GET /api/integrations/acuity?t=1768408767947&_=0.2782408801696328 200 in 365ms (compile: 16ms, proxy.ts: 109ms, render: 240ms)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 194ms (compile: 3ms, proxy.ts: 168ms, render: 23ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/meta?t=1768408776476&_=0.4167420646862422 200 in 396ms (compile: 1347Âµs, proxy.ts: 129ms, render: 266ms)
 GET /api/integrations/acuity?t=1768408776476&_=0.05250723289186687 200 in 424ms (compile: 18ms, proxy.ts: 244ms, render: 162ms)
 GET /api/integrations/shopify?country=MX&t=1768408776476&_=0.3289171436835593 200 in 426ms (compile: 14ms, proxy.ts: 240ms, render: 173ms)
 GET /api/integrations/shopify?country=ES&t=1768408776476&_=0.6361367458579018 200 in 428ms (compile: 9ms, proxy.ts: 245ms, render: 174ms)
 GET /api/integrations/analytics?t=1768408776476&_=0.009103775488150334 200 in 456ms (compile: 16ms, proxy.ts: 242ms, render: 197ms)
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET / 200 in 372ms (compile: 73ms, proxy.ts: 232ms, render: 67ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /api/dashboard ...
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
 GET /api/dashboard 200 in 5.8s (compile: 4.1s, proxy.ts: 99ms, render: 1673ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
 GET /api/dashboard 200 in 1157ms (compile: 20ms, proxy.ts: 118ms, render: 1019ms)
ğŸ” Middleware Debug: { url: '/privacidad', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /privacidad 200 in 2.2s (compile: 1875ms, proxy.ts: 163ms, render: 153ms)
âš  Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET / 200 in 711ms (compile: 43ms, proxy.ts: 229ms, render: 439ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
 GET /api/dashboard 200 in 1604ms (compile: 70ms, proxy.ts: 95ms, render: 1438ms)
ğŸ” Middleware Debug: { url: '/api/dashboard', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
[Dashboard] Raw occupation data: {
  source: 'availability_by_store',
  count: 16,
  sample: [
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'mediciÃ³n',
      booked: 3,
      total: 34,
      available: 31
    },
    {
      store_name: 'The Bundclub Sevilla',
      normalized: 'Sevilla',
      category: 'fitting',
      booked: 1,
      total: 6,
      available: 5
    },
    {
      store_name: 'The Bundclub MÃ¡laga',
      normalized: 'MÃ¡laga',
      category: 'fitting',
      booked: 4,
      total: 8,
      available: 4
    },
    {
      store_name: 'The Bundclub Barcelona',
      normalized: 'Barcelona',
      category: 'fitting',
      booked: 2,
      total: 1,
      available: 0
    },
    {
      store_name: 'The Bundclub Zaragoza',
      normalized: 'Zaragoza',
      category: 'fitting',
      booked: 1,
      total: 7,
      available: 6
    }
  ]
}
[Dashboard] Store map after processing: {
  dataSource: 'availability_by_store',
  storesInMap: [
    'MÃ¡laga',    'Sevilla',
    'Barcelona', 'Zaragoza',
    'Cdmx',      'Murcia',
    'Bilbao',    'Madrid'
  ],
  orderedStores: [
    'Madrid',   'Sevilla',
    'MÃ¡laga',   'Barcelona',
    'Murcia',   'Cdmx',
    'Bilbao',   'Zaragoza',
    'Valencia'
  ]
}
[Dashboard] Store occupation data: {
  today: '2026-01-14',
  storesFound: 9,
  stores: [
    {
      name: 'Madrid',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Sevilla',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'MÃ¡laga',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Barcelona',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Murcia',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Cdmx',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Bilbao',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Zaragoza',
      hasData: true,
      medicion: [Object],
      fitting: [Object]
    },
    {
      name: 'Valencia',
      hasData: false,
      medicion: [Object],
      fitting: [Object]
    }
  ]
}
[Dashboard] Investment data: {
  totalAdsRecords: 1000,
  uniqueDates: 12,
  sampleDates: [
    [ '2025-12-16', 0 ],
    [ '2025-12-18', 0 ],
    [ '2025-12-22', 0 ],
    [ '2025-12-21', 92.77 ],
    [ '2025-12-23', 0 ]
  ]
}
 GET /api/dashboard 200 in 1243ms (compile: 5ms, proxy.ts: 91ms, render: 1147ms)
ğŸ” Middleware Debug: { url: '/', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET / 200 in 565ms (compile: 250ms, proxy.ts: 263ms, render: 52ms)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
â—‹ Compiling /integraciones ...
 GET /integraciones 200 in 6.3s (compile: 5.4s, proxy.ts: 869ms, render: 54ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=ES&t=1768410331504&_=0.3419421346628252 200 in 3.1s (compile: 2.6s, proxy.ts: 254ms, render: 295ms)
 GET /api/integrations/shopify?country=MX&t=1768410331504&_=0.9013979726785978 200 in 3.1s (compile: 2.6s, proxy.ts: 242ms, render: 298ms)
 GET /api/integrations/acuity?t=1768410331504&_=0.5620274087518139 200 in 3.1s (compile: 2.6s, proxy.ts: 249ms, render: 299ms)
 GET /api/integrations/meta?t=1768410331507&_=0.03701218599320988 200 in 3.1s (compile: 2.6s, proxy.ts: 234ms, render: 302ms)
 GET /api/integrations/meta?t=1768410331504&_=0.3097607875705498 200 in 3.1s (compile: 2.6s, proxy.ts: 229ms, render: 302ms)
 GET /api/integrations/analytics?t=1768410331504&_=0.36976265414462484 200 in 3.1s (compile: 2.6s, proxy.ts: 233ms, render: 303ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=MX&t=1768410331507&_=0.593306372425522 200 in 265ms (compile: 11ms, proxy.ts: 92ms, render: 163ms)
 GET /api/integrations/analytics?t=1768410331507&_=0.7262154027458968 200 in 272ms (compile: 8ms, proxy.ts: 88ms, render: 176ms)
 GET /api/integrations/shopify?country=ES&t=1768410331507&_=0.2824403918392562 200 in 273ms (compile: 6ms, proxy.ts: 96ms, render: 170ms)
 GET /api/integrations/acuity?t=1768410331507&_=0.2915853234988809 200 in 296ms (compile: -176Âµs, proxy.ts: 115ms, render: 182ms)
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (131kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 1212ms (compile: 231ms, proxy.ts: 916ms, render: 64ms)
ğŸ” Middleware Debug: { url: '/integraciones', hasSupabaseUrl: true, hasSupabaseKey: true }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /integraciones 200 in 114ms (compile: 3ms, proxy.ts: 96ms, render: 16ms)
ğŸ” Middleware Debug: {
  url: '/api/integrations/meta',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/analytics',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/acuity',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ” Middleware Debug: {
  url: '/api/integrations/shopify',
  hasSupabaseUrl: true,
  hasSupabaseKey: true
}
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
ğŸ‘¤ User status: { hasUser: true, email: 'fabiani@bundcompany.com' }
 GET /api/integrations/shopify?country=ES&t=1768411830816&_=0.9349495606450813 200 in 868ms (compile: 1893Âµs, proxy.ts: 379ms, render: 487ms)
 GET /api/integrations/analytics?t=1768411830816&_=0.9923776295121582 200 in 873ms (compile: 4ms, proxy.ts: 323ms, render: 546ms)
 GET /api/integrations/shopify?country=MX&t=1768411830816&_=0.8490875337176612 200 in 877ms (compile: 3ms, proxy.ts: 259ms, render: 615ms)
 GET /api/integrations/acuity?t=1768411830816&_=0.2984063883817981 200 in 880ms (compile: 3ms, proxy.ts: 361ms, render: 516ms)
 GET /api/integrations/meta?t=1768411830816&_=0.5231038752365513 200 in 882ms (compile: 16ms, proxy.ts: 210ms, render: 656ms)
